module.exports=[757215,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(700760);let e=(0,c.forwardRef)(({label:a,onClick:c,intent:e="outline",size:f="md",icon:g,isLoading:h=!1,disabled:i=!1,type:j="button",className:k="",showArrow:l=!0,children:m,...n},o)=>{let p=(0,d.cn)("group inline-flex items-center gap-2 font-semibold transition-all duration-200 rounded-lg ring-1 shadow-sm hover:shadow-md backdrop-blur-sm",{sm:"text-xs px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5"}[f],{primary:"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40",success:"text-green-600 hover:text-green-700 bg-green-50 hover:bg-green-100 ring-green-200 hover:ring-green-300 dark:text-green-400 dark:hover:text-green-300 dark:bg-green-950 dark:hover:bg-green-900 dark:ring-green-800 dark:hover:ring-green-700",destructive:"text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 ring-red-200 hover:ring-red-300 dark:text-red-400 dark:hover:text-red-300 dark:bg-red-950 dark:hover:bg-red-900 dark:ring-red-800 dark:hover:ring-red-700",warning:"text-amber-600 hover:text-amber-700 bg-amber-50 hover:bg-amber-100 ring-amber-200 hover:ring-amber-300 dark:text-amber-400 dark:hover:text-amber-300 dark:bg-amber-950 dark:hover:bg-amber-900 dark:ring-amber-800 dark:hover:ring-amber-700",secondary:"text-gray-600 hover:text-gray-700 bg-gray-50 hover:bg-gray-100 ring-gray-200 hover:ring-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 dark:ring-gray-700 dark:hover:ring-gray-600",outline:"text-gray-600 hover:text-gray-700 bg-white hover:bg-gray-50 ring-gray-200 hover:ring-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:bg-gray-900 dark:hover:bg-gray-800 dark:ring-gray-700 dark:hover:ring-gray-600",plain:"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"}[e]),q=i||h,r=h?"Loading...":a||m;return(0,b.jsxs)("button",{ref:o,onClick:c,disabled:q,type:j,className:(0,d.cn)(p,q&&"opacity-50 cursor-not-allowed",k),...n,children:[g&&(0,b.jsx)("span",{className:"shrink-0",children:g}),r,!h&&l&&(0,b.jsx)("span",{"aria-hidden":"true",className:"group-hover:translate-x-1 transition-transform duration-200",children:"â†’"})]})});e.displayName="StyledButton",a.s(["StyledButton",0,e])},404665,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(757215);function f(){let a=(0,d.useSearchParams)(),f=(0,d.useParams)(),g=f?.token,h=a.get("session_id"),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),s=(0,c.useMemo)(()=>i?.invoice.total?`$${(i.invoice.total||0).toFixed(2)}`:"$0.00",[i]);(0,c.useEffect)(()=>{(async()=>{if(g)try{let a=await fetch(`/api/pay/invoice?token=${encodeURIComponent(g)}`,{cache:"no-store"}),b=await a.json();if(!a.ok)throw Error(b?.error||"Invoice not found");j(b),"paid"===b.invoice.status&&r(!0)}catch(a){n(a instanceof Error?a.message:"Unable to load invoice details.")}finally{l(!1)}})()},[g]),(0,c.useEffect)(()=>{(async()=>{if(h&&i&&!q&&g){p(!0);try{let a=await fetch("/api/pay/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:g,sessionId:h})}),b=await a.json();a.ok&&"paid"===b.status?r(!0):a.ok||n(b?.error||"Payment confirmation failed.")}catch(a){n(a instanceof Error?a.message:"Payment confirmation failed.")}finally{p(!1)}}})()},[i,q,h,g]);let t=async()=>{n(null),l(!0);try{let a=await fetch("/api/pay/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:g})}),b=await a.json();if(!a.ok||!b?.url)throw Error(b?.error||"Unable to start checkout.");window.location.href=b.url}catch(a){n(a instanceof Error?a.message:"Unable to start checkout.")}finally{l(!1)}};return(0,b.jsx)("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:(0,b.jsxs)("div",{className:"mx-auto max-w-2xl px-6 py-12",children:[(0,b.jsxs)("div",{className:"mb-8 text-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900",children:"Invoice Payment"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Secure checkout powered by Stripe"})]}),(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:k?(0,b.jsx)("p",{className:"text-slate-500",children:"Loading invoice..."}):m?(0,b.jsx)("p",{className:"text-red-600",children:m}):i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Invoice"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:i.invoice.invoiceNumber??"Invoice"}),i.org?.name&&(0,b.jsx)("p",{className:"text-sm text-slate-500",children:i.org.name})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Amount Due"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:s})]})]}),(0,b.jsxs)("div",{className:"mt-6 space-y-2 text-sm text-slate-600",children:[(0,b.jsxs)("p",{children:["Status:"," ",(0,b.jsx)("span",{className:"font-medium text-slate-900",children:q||"paid"===i.invoice.status?"Paid":"Unpaid"})]}),i.invoice.dueDate&&(0,b.jsxs)("p",{children:["Due date:"," ",(0,b.jsx)("span",{className:"font-medium text-slate-900",children:new Date(i.invoice.dueDate).toLocaleDateString()})]})]}),(0,b.jsx)("div",{className:"mt-8",children:q?(0,b.jsx)("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-900",children:"Payment received. Thank you!"}):(0,b.jsx)(e.StyledButton,{size:"md",intent:"primary",className:"w-full justify-center",onClick:t,disabled:k||o,showArrow:!1,children:k?"Starting checkout...":"Pay securely with Stripe"})}),o&&(0,b.jsx)("p",{className:"mt-3 text-xs text-slate-500",children:"Confirming payment..."})]}):(0,b.jsx)("p",{className:"text-slate-600",children:"Invoice not found."})})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=apps_web_src_b9b33b54._.js.map