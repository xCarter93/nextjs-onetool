{"version":3,"sources":["../../../../../../apps/web/src/app/%28workspace%29/clients/components/csv-upload-zone.tsx","../../../../../../apps/web/src/app/%28workspace%29/clients/components/csv-mapping-preview.tsx","../../../../../../apps/web/src/types/csv-import.ts","../../../../../../apps/web/src/app/%28workspace%29/clients/components/csv-import-step.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback, useState } from \"react\";\nimport { Upload, FileText, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface CsvUploadZoneProps {\n\tonFileSelect: (file: File, content: string) => void;\n\tmaxSizeMB?: number;\n\tdisabled?: boolean;\n}\n\nexport function CsvUploadZone({\n\tonFileSelect,\n\tmaxSizeMB = 5,\n\tdisabled = false,\n}: CsvUploadZoneProps) {\n\tconst [isDragging, setIsDragging] = useState(false);\n\tconst [selectedFile, setSelectedFile] = useState<File | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\n\tconst handleFileRead = useCallback(\n\t\t(file: File) => {\n\t\t\t// Validate file type\n\t\t\tif (!file.name.endsWith(\".csv\")) {\n\t\t\t\tsetError(\"Please upload a CSV file\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Validate file size\n\t\t\tconst maxSize = maxSizeMB * 1024 * 1024;\n\t\t\tif (file.size > maxSize) {\n\t\t\t\tsetError(`File size exceeds ${maxSizeMB}MB limit`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Read file content\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = (e) => {\n\t\t\t\tconst content = e.target?.result as string;\n\t\t\t\tsetSelectedFile(file);\n\t\t\t\tsetError(null);\n\t\t\t\tonFileSelect(file, content);\n\t\t\t};\n\t\t\treader.onerror = () => {\n\t\t\t\tsetError(\"Failed to read file\");\n\t\t\t};\n\t\t\treader.readAsText(file);\n\t\t},\n\t\t[maxSizeMB, onFileSelect]\n\t);\n\n\tconst handleDrop = useCallback(\n\t\t(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tsetIsDragging(false);\n\n\t\t\tif (disabled) return;\n\n\t\t\tconst files = Array.from(e.dataTransfer.files);\n\t\t\tif (files.length > 0) {\n\t\t\t\thandleFileRead(files[0]);\n\t\t\t}\n\t\t},\n\t\t[disabled, handleFileRead]\n\t);\n\n\tconst handleDragOver = useCallback(\n\t\t(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tif (!disabled) {\n\t\t\t\tsetIsDragging(true);\n\t\t\t}\n\t\t},\n\t\t[disabled]\n\t);\n\n\tconst handleDragLeave = useCallback((e: React.DragEvent<HTMLDivElement>) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tsetIsDragging(false);\n\t}, []);\n\n\tconst handleFileInput = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tif (disabled) return;\n\n\t\t\tconst files = e.target.files;\n\t\t\tif (files && files.length > 0) {\n\t\t\t\thandleFileRead(files[0]);\n\t\t\t}\n\t\t},\n\t\t[disabled, handleFileRead]\n\t);\n\n\tconst handleClear = useCallback(() => {\n\t\tsetSelectedFile(null);\n\t\tsetError(null);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<div\n\t\t\t\tonDrop={handleDrop}\n\t\t\t\tonDragOver={handleDragOver}\n\t\t\t\tonDragLeave={handleDragLeave}\n\t\t\t\tclassName={`\n\t\t\t\t\trelative rounded-lg border-2 border-dashed p-8 text-center transition-all\n\t\t\t\t\t${isDragging ? \"border-primary bg-primary/5 scale-[1.02]\" : \"border-border\"}\n\t\t\t\t\t${selectedFile ? \"bg-muted/30\" : \"hover:border-primary/50 hover:bg-muted/20\"}\n\t\t\t\t`}\n\t\t\t\taria-disabled={disabled}\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\taccept=\".csv\"\n\t\t\t\t\tonChange={handleFileInput}\n\t\t\t\t\tclassName=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n\t\t\t\t\tid=\"csv-upload\"\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttabIndex={disabled ? -1 : 0}\n\t\t\t\t\taria-disabled={disabled}\n\t\t\t\t/>\n\n\t\t\t\t{!selectedFile ? (\n\t\t\t\t\t<div className=\"flex flex-col items-center gap-3\">\n\t\t\t\t\t\t<div className=\"rounded-full bg-primary/10 p-4\">\n\t\t\t\t\t\t\t<Upload className=\"w-8 h-8 text-primary\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-foreground\">\n\t\t\t\t\t\t\t\tDrop your CSV file here, or{\" \"}\n\t\t\t\t\t\t\t\t<span className=\"text-primary\">browse</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\tMaximum file size: {maxSizeMB}MB\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"flex items-center justify-center gap-3\">\n\t\t\t\t\t\t<FileText className=\"w-6 h-6 text-primary\" />\n\t\t\t\t\t\t<div className=\"flex-1 text-left\">\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-foreground\">\n\t\t\t\t\t\t\t\t{selectedFile.name}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t{(selectedFile.size / 1024).toFixed(2)} KB\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tintent=\"outline\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\thandleClear();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"hover:bg-destructive/10 hover:text-destructive\"\n\t\t\t\t\t\t\tisDisabled={disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<X className=\"w-4 h-4\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{error && (\n\t\t\t\t<div className=\"p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg\">\n\t\t\t\t\t<p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport React from \"react\";\nimport { Check, AlertTriangle, X } from \"lucide-react\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport {\n\tCLIENT_SCHEMA_FIELDS,\n\tPROJECT_SCHEMA_FIELDS,\n\ttype EntityType,\n\ttype FieldMapping,\n\ttype ValidationResult,\n} from \"@/types/csv-import\";\n\ninterface CsvMappingPreviewProps {\n\tentityType: EntityType;\n\tmappings: FieldMapping[];\n\tvalidation: ValidationResult;\n\tonMappingChange: (csvColumn: string, newSchemaField: string) => void;\n}\n\nexport function CsvMappingPreview({\n\tentityType,\n\tmappings,\n\tvalidation,\n\tonMappingChange,\n}: CsvMappingPreviewProps) {\n\t// Ensure validation has all required fields with defaults\n\tconst safeValidation: ValidationResult = {\n\t\tisValid: validation?.isValid ?? false,\n\t\terrors: validation?.errors ?? [],\n\t\twarnings: validation?.warnings ?? [],\n\t\tmissingRequiredFields: validation?.missingRequiredFields ?? [],\n\t};\n\n\t// Get available schema fields based on entity type\n\tconst schemaFields =\n\t\tentityType === \"clients\" ? CLIENT_SCHEMA_FIELDS : PROJECT_SCHEMA_FIELDS;\n\tconst schemaFieldNames = Object.keys(schemaFields);\n\n\tconst getStatusIcon = (mapping: FieldMapping) => {\n\t\tif (mapping.isRequired && mapping.confidence < 0.8) {\n\t\t\treturn <AlertTriangle className=\"w-4 h-4 text-yellow-600\" />;\n\t\t}\n\t\tif (mapping.confidence >= 0.9) {\n\t\t\treturn <Check className=\"w-4 h-4 text-green-600\" />;\n\t\t}\n\t\tif (mapping.confidence >= 0.7) {\n\t\t\treturn <Check className=\"w-4 h-4 text-blue-600\" />;\n\t\t}\n\t\treturn <X className=\"w-4 h-4 text-red-600\" />;\n\t};\n\n\tconst getStatusColor = (mapping: FieldMapping) => {\n\t\tif (mapping.isRequired && mapping.confidence < 0.8) {\n\t\t\treturn \"bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-800\";\n\t\t}\n\t\tif (mapping.confidence >= 0.9) {\n\t\t\treturn \"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800\";\n\t\t}\n\t\tif (mapping.confidence >= 0.7) {\n\t\t\treturn \"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800\";\n\t\t}\n\t\treturn \"bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800\";\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t{/* Validation Summary */}\n\t\t\t{(safeValidation.errors.length > 0 ||\n\t\t\t\tsafeValidation.warnings.length > 0) && (\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t{safeValidation.errors.length > 0 && (\n\t\t\t\t\t\t<div className=\"p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg\">\n\t\t\t\t\t\t\t<h4 className=\"text-sm font-semibold text-red-800 dark:text-red-200 mb-2\">\n\t\t\t\t\t\t\t\tErrors ({safeValidation.errors.length})\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<ul className=\"space-y-1\">\n\t\t\t\t\t\t\t\t{safeValidation.errors.map((error, idx) => (\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-red-700 dark:text-red-300\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t• {error.message}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{safeValidation.warnings.length > 0 && (\n\t\t\t\t\t\t<div className=\"p-3 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\n\t\t\t\t\t\t\t<h4 className=\"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2\">\n\t\t\t\t\t\t\t\tWarnings ({safeValidation.warnings.length})\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<ul className=\"space-y-1\">\n\t\t\t\t\t\t\t\t{safeValidation.warnings.map((warning, idx) => (\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-yellow-700 dark:text-yellow-300\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t• {warning.message}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Mappings Table */}\n\t\t\t<div className=\"border border-border rounded-lg overflow-hidden\">\n\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t<thead className=\"bg-muted/50\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\n\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\n\t\t\t\t\t\t\t\t\tCSV Column\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\n\t\t\t\t\t\t\t\t\tMapped Field\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\n\t\t\t\t\t\t\t\t\tSample Value\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\n\t\t\t\t\t\t\t\t\tConfidence\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody className=\"divide-y divide-border\">\n\t\t\t\t\t\t\t{mappings.map((mapping, idx) => (\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\t\t\tclassName={`transition-colors hover:bg-muted/30 ${getStatusColor(mapping)}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<td className=\"px-4 py-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t{getStatusIcon(mapping)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-4 py-3\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t{mapping.csvColumn}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-4 py-3\">\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tvalue={mapping.schemaField}\n\t\t\t\t\t\t\t\t\t\t\tonValueChange={(value) =>\n\t\t\t\t\t\t\t\t\t\t\t\tonMappingChange(mapping.csvColumn, value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-full max-w-xs bg-background\">\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t{schemaFieldNames.map((fieldName) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem key={fieldName} value={fieldName}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{fieldName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{schemaFields[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldName as keyof typeof schemaFields\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]?.required && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-red-600 ml-1\">*</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-4 py-3\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground truncate max-w-xs block\">\n\t\t\t\t\t\t\t\t\t\t\t{mapping.sampleValue !== null &&\n\t\t\t\t\t\t\t\t\t\t\tmapping.sampleValue !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? String(mapping.sampleValue)\n\t\t\t\t\t\t\t\t\t\t\t\t: \"-\"}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-4 py-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 h-2 bg-muted rounded-full overflow-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`h-full transition-all ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmapping.confidence >= 0.9\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: mapping.confidence >= 0.7\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-yellow-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: `${mapping.confidence * 100}%` }}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground min-w-[3ch]\">\n\t\t\t\t\t\t\t\t\t\t\t\t{Math.round(mapping.confidence * 100)}%\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Legend */}\n\t\t\t<div className=\"flex items-center gap-6 text-xs text-muted-foreground\">\n\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t<Check className=\"w-4 h-4 text-green-600\" />\n\t\t\t\t\t<span>High confidence (90%+)</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t<Check className=\"w-4 h-4 text-blue-600\" />\n\t\t\t\t\t<span>Good confidence (70-89%)</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t<AlertTriangle className=\"w-4 h-4 text-yellow-600\" />\n\t\t\t\t\t<span>Needs review</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t<X className=\"w-4 h-4 text-red-600\" />\n\t\t\t\t\t<span>Low confidence</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","// Type definitions for CSV import feature\n\nexport type EntityType = \"clients\" | \"projects\";\n\nexport interface CsvData {\n\theaders: string[];\n\trows: Record<string, string | number | boolean>[];\n\trowCount: number;\n}\n\nexport interface FieldMapping {\n\tcsvColumn: string;\n\tschemaField: string;\n\tconfidence: number; // 0-1 score indicating mapping confidence\n\tdataType: string;\n\tisRequired: boolean;\n\tsampleValue?: string | number | boolean;\n}\n\nexport interface ValidationError {\n\tfield: string;\n\tmessage: string;\n\tseverity: \"error\" | \"warning\";\n}\n\nexport interface ValidationResult {\n\tisValid: boolean;\n\terrors: ValidationError[];\n\twarnings: ValidationError[];\n\tmissingRequiredFields: string[];\n}\n\nexport interface CsvAnalysisResult {\n\tentityType: EntityType;\n\tdetectedFields: FieldMapping[];\n\tvalidation: ValidationResult;\n\tsuggestedDefaults: Record<string, string | boolean | number>;\n\tconfidence: number;\n\tsampleData?: Record<string, string>[];\n}\n\nexport interface ImportResultItem {\n\tsuccess: boolean;\n\tid?: string;\n\terror?: string;\n\trowIndex: number;\n}\n\nexport interface ImportResult {\n\tsuccessCount: number;\n\tfailureCount: number;\n\titems: ImportResultItem[];\n}\n\n/**\n * State for CSV import flow\n */\nexport interface CsvImportState {\n\tfile: File | null;\n\tfileContent: string | null;\n\tentityType: EntityType;\n\tisAnalyzing: boolean;\n\tanalysisResult: CsvAnalysisResult | null;\n\tmappings?: FieldMapping[];\n\tisImporting?: boolean;\n\timportResult?: ImportResult | null;\n\tskipImport?: boolean;\n}\n\n// Schema field definitions for reference - must match convex/schema.ts clients table\nexport const CLIENT_SCHEMA_FIELDS = {\n\t// Required fields (from schema)\n\tcompanyName: { type: \"string\", required: true },\n\tstatus: {\n\t\ttype: \"enum\",\n\t\trequired: true,\n\t\toptions: [\"lead\", \"prospect\", \"active\", \"inactive\", \"archived\"],\n\t},\n\temailOptIn: { type: \"boolean\", required: true },\n\tsmsOptIn: { type: \"boolean\", required: true },\n\n\t// Optional fields (from schema)\n\tindustry: { type: \"string\", required: false },\n\tcompanyDescription: { type: \"string\", required: false },\n\tleadSource: {\n\t\ttype: \"enum\",\n\t\trequired: false,\n\t\toptions: [\n\t\t\t\"word-of-mouth\",\n\t\t\t\"website\",\n\t\t\t\"social-media\",\n\t\t\t\"referral\",\n\t\t\t\"advertising\",\n\t\t\t\"trade-show\",\n\t\t\t\"cold-outreach\",\n\t\t\t\"other\",\n\t\t],\n\t},\n\tcategory: {\n\t\ttype: \"enum\",\n\t\trequired: false,\n\t\toptions: [\n\t\t\t\"design\",\n\t\t\t\"development\",\n\t\t\t\"consulting\",\n\t\t\t\"maintenance\",\n\t\t\t\"marketing\",\n\t\t\t\"other\",\n\t\t],\n\t},\n\tclientSize: {\n\t\ttype: \"enum\",\n\t\trequired: false,\n\t\toptions: [\"small\", \"medium\", \"large\", \"enterprise\"],\n\t},\n\tclientType: {\n\t\ttype: \"enum\",\n\t\trequired: false,\n\t\toptions: [\n\t\t\t\"new-client\",\n\t\t\t\"existing-client\",\n\t\t\t\"partner\",\n\t\t\t\"vendor\",\n\t\t\t\"contractor\",\n\t\t],\n\t},\n\tisActive: { type: \"boolean\", required: false },\n\tpriorityLevel: {\n\t\ttype: \"enum\",\n\t\trequired: false,\n\t\toptions: [\"low\", \"medium\", \"high\", \"urgent\"],\n\t},\n\tprojectDimensions: { type: \"string\", required: false },\n\tcommunicationPreference: {\n\t\ttype: \"enum\",\n\t\trequired: false,\n\t\toptions: [\"email\", \"phone\", \"both\"],\n\t},\n\tservicesNeeded: { type: \"array\", required: false },\n\ttags: { type: \"array\", required: false },\n\tnotes: { type: \"string\", required: false },\n} as const;\n\n// Schema field definitions for reference - must match convex/schema.ts projects table\nexport const PROJECT_SCHEMA_FIELDS = {\n\t// Required fields (from schema)\n\ttitle: { type: \"string\", required: true },\n\tstatus: {\n\t\ttype: \"enum\",\n\t\trequired: true,\n\t\toptions: [\"planned\", \"in-progress\", \"completed\", \"cancelled\"],\n\t},\n\tprojectType: {\n\t\ttype: \"enum\",\n\t\trequired: true,\n\t\toptions: [\"one-off\", \"recurring\"],\n\t},\n\tclientId: { type: \"id\", required: true }, // Can be resolved from client name\n\n\t// Optional fields (from schema)\n\tdescription: { type: \"string\", required: false },\n\tinstructions: { type: \"string\", required: false },\n\tprojectNumber: { type: \"string\", required: false },\n\tstartDate: { type: \"number\", required: false },\n\tendDate: { type: \"number\", required: false },\n\tsalespersonId: { type: \"id\", required: false },\n\tassignedUserIds: { type: \"array\", required: false },\n\tinvoiceReminderEnabled: { type: \"boolean\", required: false },\n\tscheduleForLater: { type: \"boolean\", required: false },\n} as const;\n","\"use client\";\n\nimport { CsvUploadZone } from \"@/app/(workspace)/clients/components/csv-upload-zone\";\nimport { CsvMappingPreview } from \"@/app/(workspace)/clients/components/csv-mapping-preview\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Label } from \"@/components/ui/label\";\nimport { Users, Building2, Check } from \"lucide-react\";\nimport type {\n\tEntityType,\n\tCsvAnalysisResult,\n\tFieldMapping,\n\tImportResult,\n} from \"@/types/csv-import\";\n\ninterface CsvImportStepProps {\n\tentityType: EntityType;\n\tonEntityTypeChange: (type: EntityType) => void;\n\tisAnalyzing: boolean;\n\tonFileSelect: (file: File, content: string) => void;\n\tanalysisResult: CsvAnalysisResult | null;\n\tmappings: FieldMapping[];\n\tonMappingChange: (csvColumn: string, newSchemaField: string) => void;\n\timportResult: ImportResult | null;\n\terror?: string | null;\n\tshowTitle?: boolean;\n\tdisabledEntityTypes?: EntityType[];\n\tdisabled?: boolean;\n}\n\nexport function CsvImportStep({\n\tentityType,\n\tonEntityTypeChange,\n\tisAnalyzing,\n\tonFileSelect,\n\tanalysisResult,\n\tmappings,\n\tonMappingChange,\n\timportResult,\n\terror,\n\tshowTitle = true,\n\tdisabledEntityTypes = [],\n\tdisabled = false,\n}: CsvImportStepProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName={`space-y-8 ${disabled ? \"opacity-50\" : \"\"}`}\n\t\t\taria-disabled={disabled}\n\t\t>\n\t\t\t{showTitle && (\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"flex items-center gap-3 mb-3\">\n\t\t\t\t\t\t<div className=\"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full\" />\n\t\t\t\t\t\t<h2 className=\"text-2xl font-semibold text-foreground tracking-tight\">\n\t\t\t\t\t\t\tImport Existing Data\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-muted-foreground ml-5 leading-relaxed\">\n\t\t\t\t\t\tOptionally import your existing clients or projects from a CSV file.\n\t\t\t\t\t\tOur AI will help map your data to the correct fields.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Entity Type Selection */}\n\t\t\t<div>\n\t\t\t\t<label className=\"block text-sm font-semibold text-foreground mb-4 tracking-wide\">\n\t\t\t\t\tWhat type of data are you importing?\n\t\t\t\t</label>\n\t\t\t\t<RadioGroup\n\t\t\t\t\tvalue={entityType}\n\t\t\t\t\tonValueChange={(value) => onEntityTypeChange(value as EntityType)}\n\t\t\t\t\tclassName=\"grid grid-cols-2 gap-4\"\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RadioGroupItem\n\t\t\t\t\t\t\tvalue=\"clients\"\n\t\t\t\t\t\t\tid=\"step-clients\"\n\t\t\t\t\t\t\tclassName=\"peer sr-only\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\thtmlFor=\"step-clients\"\n\t\t\t\t\t\t\tclassName=\"flex flex-col items-center justify-between rounded-lg border-2 border-border bg-background p-4 hover:bg-muted/30 peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/5 cursor-pointer transition-all\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Users className=\"mb-3 h-6 w-6 text-muted-foreground peer-data-[state=checked]:text-primary\" />\n\t\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t\t<div className=\"font-semibold text-sm\">Clients</div>\n\t\t\t\t\t\t\t\t<div className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\tImport client/customer data\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RadioGroupItem\n\t\t\t\t\t\t\tvalue=\"projects\"\n\t\t\t\t\t\t\tid=\"step-projects\"\n\t\t\t\t\t\t\tclassName=\"peer sr-only\"\n\t\t\t\t\t\t\tdisabled={disabledEntityTypes.includes(\"projects\")}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\thtmlFor=\"step-projects\"\n\t\t\t\t\t\t\tclassName={`flex flex-col items-center justify-between rounded-lg border-2 border-border bg-background p-4 hover:bg-muted/30 peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/5 cursor-pointer transition-all ${\n\t\t\t\t\t\t\t\tdisabledEntityTypes.includes(\"projects\")\n\t\t\t\t\t\t\t\t\t? \"opacity-50 cursor-not-allowed bg-muted/20\"\n\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Building2\n\t\t\t\t\t\t\t\tclassName={`mb-3 h-6 w-6 text-muted-foreground peer-data-[state=checked]:text-primary ${\n\t\t\t\t\t\t\t\t\tdisabledEntityTypes.includes(\"projects\") ? \"opacity-50\" : \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t\t<div className=\"font-semibold text-sm\">Projects</div>\n\t\t\t\t\t\t\t\t<div className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\tImport project data\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{disabledEntityTypes.includes(\"projects\") && (\n\t\t\t\t\t\t\t\t\t<div className=\"text-xs text-amber-600 dark:text-amber-400 mt-1 font-medium\">\n\t\t\t\t\t\t\t\t\t\tComing soon\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t</div>\n\t\t\t\t</RadioGroup>\n\t\t\t</div>\n\n\t\t\t{/* CSV Upload */}\n\t\t\t<div>\n\t\t\t\t<label className=\"block text-sm font-semibold text-foreground mb-4 tracking-wide\">\n\t\t\t\t\tUpload CSV File\n\t\t\t\t</label>\n\t\t\t\t<CsvUploadZone\n\t\t\t\t\tonFileSelect={onFileSelect}\n\t\t\t\t\tmaxSizeMB={5}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{/* AI Analysis Loading */}\n\t\t\t{isAnalyzing && (\n\t\t\t\t<div className=\"p-6 bg-muted/30 border border-border rounded-lg\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\"></div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-foreground\">\n\t\t\t\t\t\t\t\tAI is analyzing your data...\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\tThis may take a moment\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Mapping Preview */}\n\t\t\t{analysisResult && mappings.length > 0 && (\n\t\t\t\t<div>\n\t\t\t\t\t<label className=\"block text-sm font-semibold text-foreground mb-4 tracking-wide\">\n\t\t\t\t\t\tReview & Adjust Field Mappings\n\t\t\t\t\t</label>\n\t\t\t\t\t<CsvMappingPreview\n\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\tmappings={mappings}\n\t\t\t\t\t\tvalidation={analysisResult.validation}\n\t\t\t\t\t\tonMappingChange={onMappingChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Import Result */}\n\t\t\t{importResult && (\n\t\t\t\t<div className=\"p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Check className=\"w-5 h-5 text-green-600 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-semibold text-green-800 dark:text-green-200\">\n\t\t\t\t\t\t\t\tImport Complete\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">\n\t\t\t\t\t\t\t\tSuccessfully imported {importResult.successCount} {entityType}\n\t\t\t\t\t\t\t\t{importResult.failureCount > 0 &&\n\t\t\t\t\t\t\t\t\t` (${importResult.failureCount} failed)`}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Error Display */}\n\t\t\t{error && (\n\t\t\t\t<div className=\"p-4 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg\">\n\t\t\t\t\t<p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}