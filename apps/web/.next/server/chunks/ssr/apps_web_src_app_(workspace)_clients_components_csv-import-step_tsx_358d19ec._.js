module.exports=[224,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(773320),e=a.i(104720),f=a.i(633508),g=a.i(539524);function h({onFileSelect:a,maxSizeMB:h=5,disabled:i=!1}){let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),p=(0,c.useCallback)(b=>{if(!b.name.endsWith(".csv"))return void o("Please upload a CSV file");let c=1024*h*1024;if(b.size>c)return void o(`File size exceeds ${h}MB limit`);let d=new FileReader;d.onload=c=>{let d=c.target?.result;m(b),o(null),a(b,d)},d.onerror=()=>{o("Failed to read file")},d.readAsText(b)},[h,a]),q=(0,c.useCallback)(a=>{if(a.preventDefault(),a.stopPropagation(),k(!1),i)return;let b=Array.from(a.dataTransfer.files);b.length>0&&p(b[0])},[i,p]),r=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),i||k(!0)},[i]),s=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),k(!1)},[]),t=(0,c.useCallback)(a=>{if(i)return;let b=a.target.files;b&&b.length>0&&p(b[0])},[i,p]),u=(0,c.useCallback)(()=>{m(null),o(null)},[]);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{onDrop:q,onDragOver:r,onDragLeave:s,className:`
					relative rounded-lg border-2 border-dashed p-8 text-center transition-all
					${j?"border-primary bg-primary/5 scale-[1.02]":"border-border"}
					${l?"bg-muted/30":"hover:border-primary/50 hover:bg-muted/20"}
				`,"aria-disabled":i,children:[(0,b.jsx)("input",{type:"file",accept:".csv",onChange:t,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"csv-upload",disabled:i,tabIndex:i?-1:0,"aria-disabled":i}),l?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)(e.FileText,{className:"w-6 h-6 text-primary"}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:l.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(l.size/1024).toFixed(2)," KB"]})]}),(0,b.jsx)(g.Button,{intent:"outline",size:"sm",onClick:a=>{a.preventDefault(),u()},className:"hover:bg-destructive/10 hover:text-destructive",isDisabled:i,children:(0,b.jsx)(f.X,{className:"w-4 h-4"})})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,b.jsx)("div",{className:"rounded-full bg-primary/10 p-4",children:(0,b.jsx)(d.Upload,{className:"w-8 h-8 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-foreground",children:["Drop your CSV file here, or"," ",(0,b.jsx)("span",{className:"text-primary",children:"browse"})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Maximum file size: ",h,"MB"]})]})]})]}),n&&(0,b.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:n})})]})}var i=a.i(533441),j=a.i(73570),k=a.i(547885);let l={companyName:{type:"string",required:!0},status:{type:"enum",required:!0,options:["lead","prospect","active","inactive","archived"]},emailOptIn:{type:"boolean",required:!0},smsOptIn:{type:"boolean",required:!0},industry:{type:"string",required:!1},companyDescription:{type:"string",required:!1},leadSource:{type:"enum",required:!1,options:["word-of-mouth","website","social-media","referral","advertising","trade-show","cold-outreach","other"]},category:{type:"enum",required:!1,options:["design","development","consulting","maintenance","marketing","other"]},clientSize:{type:"enum",required:!1,options:["small","medium","large","enterprise"]},clientType:{type:"enum",required:!1,options:["new-client","existing-client","partner","vendor","contractor"]},isActive:{type:"boolean",required:!1},priorityLevel:{type:"enum",required:!1,options:["low","medium","high","urgent"]},projectDimensions:{type:"string",required:!1},communicationPreference:{type:"enum",required:!1,options:["email","phone","both"]},servicesNeeded:{type:"array",required:!1},tags:{type:"array",required:!1},notes:{type:"string",required:!1}},m={title:{type:"string",required:!0},status:{type:"enum",required:!0,options:["planned","in-progress","completed","cancelled"]},projectType:{type:"enum",required:!0,options:["one-off","recurring"]},clientId:{type:"id",required:!0},description:{type:"string",required:!1},instructions:{type:"string",required:!1},projectNumber:{type:"string",required:!1},startDate:{type:"number",required:!1},endDate:{type:"number",required:!1},salespersonId:{type:"id",required:!1},assignedUserIds:{type:"array",required:!1},invoiceReminderEnabled:{type:"boolean",required:!1},scheduleForLater:{type:"boolean",required:!1}};function n({entityType:a,mappings:c,validation:d,onMappingChange:e}){let g={isValid:d?.isValid??!1,errors:d?.errors??[],warnings:d?.warnings??[],missingRequiredFields:d?.missingRequiredFields??[]},h="clients"===a?l:m,n=Object.keys(h);return(0,b.jsxs)("div",{className:"space-y-4",children:[(g.errors.length>0||g.warnings.length>0)&&(0,b.jsxs)("div",{className:"space-y-2",children:[g.errors.length>0&&(0,b.jsxs)("div",{className:"p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:["Errors (",g.errors.length,")"]}),(0,b.jsx)("ul",{className:"space-y-1",children:g.errors.map((a,c)=>(0,b.jsxs)("li",{className:"text-xs text-red-700 dark:text-red-300",children:["• ",a.message]},c))})]}),g.warnings.length>0&&(0,b.jsxs)("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:["Warnings (",g.warnings.length,")"]}),(0,b.jsx)("ul",{className:"space-y-1",children:g.warnings.map((a,c)=>(0,b.jsxs)("li",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:["• ",a.message]},c))})]})]}),(0,b.jsx)("div",{className:"border border-border rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"CSV Column"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Mapped Field"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Sample Value"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Confidence"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:c.map((a,c)=>(0,b.jsxs)("tr",{className:`transition-colors hover:bg-muted/30 ${a.isRequired&&a.confidence<.8?"bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-800":a.confidence>=.9?"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800":a.confidence>=.7?"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800":"bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800"}`,children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("div",{className:"flex items-center justify-center",children:a.isRequired&&a.confidence<.8?(0,b.jsx)(j.AlertTriangle,{className:"w-4 h-4 text-yellow-600"}):a.confidence>=.9?(0,b.jsx)(i.Check,{className:"w-4 h-4 text-green-600"}):a.confidence>=.7?(0,b.jsx)(i.Check,{className:"w-4 h-4 text-blue-600"}):(0,b.jsx)(f.X,{className:"w-4 h-4 text-red-600"})})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"text-sm font-medium text-foreground",children:a.csvColumn})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)(k.Select,{value:a.schemaField,onValueChange:b=>e(a.csvColumn,b),children:[(0,b.jsx)(k.SelectTrigger,{className:"w-full max-w-xs bg-background",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:n.map(a=>(0,b.jsxs)(k.SelectItem,{value:a,children:[a,h[a]?.required&&(0,b.jsx)("span",{className:"text-red-600 ml-1",children:"*"})]},a))})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"text-xs text-muted-foreground truncate max-w-xs block",children:null!==a.sampleValue&&void 0!==a.sampleValue?String(a.sampleValue):"-"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full transition-all ${a.confidence>=.9?"bg-green-600":a.confidence>=.7?"bg-blue-600":"bg-yellow-600"}`,style:{width:`${100*a.confidence}%`}})}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground min-w-[3ch]",children:[Math.round(100*a.confidence),"%"]})]})})]},c))})]})})}),(0,b.jsxs)("div",{className:"flex items-center gap-6 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.Check,{className:"w-4 h-4 text-green-600"}),(0,b.jsx)("span",{children:"High confidence (90%+)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.Check,{className:"w-4 h-4 text-blue-600"}),(0,b.jsx)("span",{children:"Good confidence (70-89%)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(j.AlertTriangle,{className:"w-4 h-4 text-yellow-600"}),(0,b.jsx)("span",{children:"Needs review"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(f.X,{className:"w-4 h-4 text-red-600"}),(0,b.jsx)("span",{children:"Low confidence"})]})]})]})}var o=a.i(812911),p=a.i(658547),q=a.i(660246),r=a.i(267900);function s({entityType:a,onEntityTypeChange:c,isAnalyzing:d,onFileSelect:e,analysisResult:f,mappings:g,onMappingChange:j,importResult:k,error:l,showTitle:m=!0,disabledEntityTypes:s=[],disabled:t=!1}){return(0,b.jsxs)("div",{className:`space-y-8 ${t?"opacity-50":""}`,"aria-disabled":t,children:[m&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Import Existing Data"})]}),(0,b.jsx)("p",{className:"text-muted-foreground ml-5 leading-relaxed",children:"Optionally import your existing clients or projects from a CSV file. Our AI will help map your data to the correct fields."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-4 tracking-wide",children:"What type of data are you importing?"}),(0,b.jsxs)(o.RadioGroup,{value:a,onValueChange:a=>c(a),className:"grid grid-cols-2 gap-4",disabled:t,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(o.RadioGroupItem,{value:"clients",id:"step-clients",className:"peer sr-only"}),(0,b.jsxs)(p.Label,{htmlFor:"step-clients",className:"flex flex-col items-center justify-between rounded-lg border-2 border-border bg-background p-4 hover:bg-muted/30 peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/5 cursor-pointer transition-all",children:[(0,b.jsx)(q.Users,{className:"mb-3 h-6 w-6 text-muted-foreground peer-data-[state=checked]:text-primary"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"font-semibold text-sm",children:"Clients"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Import client/customer data"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.RadioGroupItem,{value:"projects",id:"step-projects",className:"peer sr-only",disabled:s.includes("projects")}),(0,b.jsxs)(p.Label,{htmlFor:"step-projects",className:`flex flex-col items-center justify-between rounded-lg border-2 border-border bg-background p-4 hover:bg-muted/30 peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/5 cursor-pointer transition-all ${s.includes("projects")?"opacity-50 cursor-not-allowed bg-muted/20":""}`,children:[(0,b.jsx)(r.Building2,{className:`mb-3 h-6 w-6 text-muted-foreground peer-data-[state=checked]:text-primary ${s.includes("projects")?"opacity-50":""}`}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"font-semibold text-sm",children:"Projects"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Import project data"}),s.includes("projects")&&(0,b.jsx)("div",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 font-medium",children:"Coming soon"})]})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-4 tracking-wide",children:"Upload CSV File"}),(0,b.jsx)(h,{onFileSelect:e,maxSizeMB:5,disabled:t})]}),d&&(0,b.jsx)("div",{className:"p-6 bg-muted/30 border border-border rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:"AI is analyzing your data..."}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This may take a moment"})]})]})}),f&&g.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-4 tracking-wide",children:"Review & Adjust Field Mappings"}),(0,b.jsx)(n,{entityType:a,mappings:g,validation:f.validation,onMappingChange:j})]}),k&&(0,b.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(i.Check,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-green-800 dark:text-green-200",children:"Import Complete"}),(0,b.jsxs)("p",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:["Successfully imported ",k.successCount," ",a,k.failureCount>0&&` (${k.failureCount} failed)`]})]})]})}),l&&(0,b.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:l})})]})}a.s(["CsvImportStep",()=>s],224)}];

//# sourceMappingURL=apps_web_src_app_%28workspace%29_clients_components_csv-import-step_tsx_358d19ec._.js.map