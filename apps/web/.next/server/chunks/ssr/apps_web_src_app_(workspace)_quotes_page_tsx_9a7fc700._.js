module.exports=[626472,a=>{"use strict";var b=a.i(187924),c=a.i(572131);a.i(511241);var d=a.i(296373),e=a.i(130487),f=a.i(928503),g=a.i(539524),h=a.i(592552),i=a.i(948217),j=a.i(968177),k=a.i(478788),l=a.i(452308),m=a.i(613749),n=a.i(50522),o=a.i(104720),p=a.i(790166),q=a.i(641710),r=a.i(452495),s=a.i(915618),t=a.i(781560),u=a.i(741616),v=a.i(957064),w=a.i(50944),x=a.i(564361);a.i(501786);var y=a.i(757215),z=a.i(58812),A=a.i(272266),B=a.i(892984),C=a.i(700760);let D=[{id:"draft",name:"Draft",description:"Being prepared"},{id:"sent",name:"Sent",description:"Awaiting response"},{id:"approved",name:"Approved",description:"Accepted by client"},{id:"declined",name:"Declined",description:"Rejected by client"},{id:"expired",name:"Expired",description:"Past valid date"}],E=a=>{switch(a){case"approved":return"default";case"sent":return"secondary";case"declined":case"expired":return"destructive";default:return"outline"}},F=a=>{switch(a){case"draft":return"Draft";case"sent":return"Sent";case"approved":return"Approved";case"declined":return"Declined";case"expired":return"Expired";default:return a}},G=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),H=(a,c)=>[{accessorKey:"quoteNumber",header:"Quote",cell:({row:a})=>(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.original.quoteNumber||`#${a.original._id.slice(-6)}`}),(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:a.original.title||a.original.projectName||"Untitled Quote"})]})},{accessorKey:"clientName",header:"Client",cell:({row:a})=>(0,b.jsx)("span",{className:"text-foreground",children:a.original.clientName})},{accessorKey:"total",header:"Amount",cell:({row:a})=>(0,b.jsx)("span",{className:"text-foreground font-medium",children:G(a.original.total)})},{accessorKey:"status",header:"Status",cell:({row:a})=>(0,b.jsx)(j.Badge,{variant:E(a.original.status),children:F(a.original.status)})},{accessorKey:"_creationTime",header:"Created",cell:({row:a})=>{let c=new Date(a.original._creationTime);return(0,b.jsx)("span",{className:"text-foreground",children:c.toLocaleDateString()})}},{accessorKey:"validUntil",header:"Valid Until",cell:({row:a})=>{if(!a.original.validUntil)return(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"});let c=new Date(a.original.validUntil),d=c<new Date;return(0,b.jsx)("span",{className:`text-foreground ${d?"text-destructive":""}`,children:c.toLocaleDateString()})}},{id:"actions",header:"",cell:({row:d})=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>a.push(`/quotes/${d.original._id}`),"aria-label":`View quote ${d.original.quoteNumber||d.original._id.slice(-6)}`,children:(0,b.jsx)(r.ExternalLink,{className:"size-4"})}),(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>c(d.original._id,d.original.quoteNumber||d.original._id.slice(-6)),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950","aria-label":`Delete quote ${d.original.quoteNumber||d.original._id.slice(-6)}`,children:(0,b.jsx)(t.Trash2,{className:"size-4"})})]})}];function I(){let a=(0,w.useRouter)(),[j,t]=(0,c.useState)("table"),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),M=(0,d.useMutation)(e.api.quotes.remove),N=(0,d.useMutation)(e.api.quotes.update),[O,P]=(0,c.useState)([]),Q=(0,d.useQuery)(e.api.quotes.list,{}),R=(0,d.useQuery)(e.api.clients.list,{}),S=(0,d.useQuery)(e.api.projects.list,{}),T=c.default.useMemo(()=>Q||[],[Q]),U=c.default.useMemo(()=>R||[],[R]),V=c.default.useMemo(()=>S||[],[S]),W=c.default.useMemo(()=>T.map(a=>{let b=U.find(b=>b._id===a.clientId),c=V.find(b=>b._id===a.projectId);return{...a,clientName:b?.companyName||"Unknown Client",projectName:c?.title}}),[T,U,V]),[X,Y]=c.default.useState([]),[Z,$]=c.default.useState([]),[_,aa]=c.default.useState(""),ab=c.default.useMemo(()=>{let a=new Map;return W.forEach(b=>a.set(b._id,b.status)),a},[W]);c.default.useEffect(()=>{W&&0!==W.length?P(W.map(a=>({id:a._id,name:a.title||a.projectName||"Untitled Quote",column:a.status,status:a.status,clientName:a.clientName,total:a.total,quoteNumber:a.quoteNumber||`#${a._id.slice(-6)}`,validUntil:a.validUntil}))):P([])},[W]);let ac=(a,b)=>{L({id:a,name:b}),J(!0)},ad=async()=>{if(K)try{await M({id:K.id}),J(!1),L(null)}catch(a){console.error("Failed to delete quote:",a)}},ae=c.default.useCallback(a=>{P(a);let b=a.find(a=>{let b=ab.get(a.id);return b&&b!==a.column});b&&N({id:b.id,status:b.column}).catch(a=>{console.error("Failed to update quote status:",a)})},[ab,N]),af=(0,k.useReactTable)({data:W,columns:H(a,ac),state:{sorting:X,columnFilters:Z,globalFilter:_,pagination:{pageIndex:0,pageSize:10}},onSortingChange:Y,onColumnFiltersChange:$,getCoreRowModel:(0,l.getCoreRowModel)(),getSortedRowModel:(0,l.getSortedRowModel)(),getFilteredRowModel:(0,l.getFilteredRowModel)(),getPaginationRowModel:(0,l.getPaginationRowModel)()});c.default.useEffect(()=>{af.setPageSize(10)},[10,af]),c.default.useEffect(()=>{af.getColumn("quoteNumber")?.setFilterValue(_),af.getColumn("clientName")?.setFilterValue(_),af.getColumn("status")?.setFilterValue(_)},[_,af]);let ag=c.default.useMemo(()=>W.filter(a=>"sent"===a.status).length,[W]),ah=c.default.useMemo(()=>W.filter(a=>"approved"===a.status).reduce((a,b)=>a+b.total,0),[W]),ai=void 0===Q||void 0===R||void 0===S,aj=!ai&&0===W.length;return(0,b.jsxs)("div",{className:"relative p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Quotes"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Overview of your quotes and proposals"})]})]}),(0,b.jsxs)("button",{onClick:()=>a.push("/quotes/new"),className:"group inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 transition-all duration-200 px-4 py-2 rounded-lg bg-primary/10 hover:bg-primary/15 ring-1 ring-primary/30 hover:ring-primary/40 shadow-sm hover:shadow-md backdrop-blur-sm",children:[(0,b.jsx)(s.Plus,{className:"h-4 w-4"}),"Create Quote",(0,b.jsx)("span",{"aria-hidden":"true",className:"group-hover:translate-x-1 transition-transform duration-200",children:"→"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10",children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(o.FileText,{className:"size-4"})," Total Quotes"]}),(0,b.jsx)(h.CardDescription,{children:"All quotes in your workspace"})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10",children:(0,b.jsx)("div",{className:"text-3xl font-semibold",children:ai?(0,b.jsx)("div",{className:"h-9 w-12 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):W.length})})]}),(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10",children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(q.Clock,{className:"size-4"})," Pending Approval"]}),(0,b.jsx)(h.CardDescription,{children:"Quotes awaiting client response"})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10",children:(0,b.jsx)("div",{className:"text-3xl font-semibold",children:ai?(0,b.jsx)("div",{className:"h-9 w-12 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):ag})})]}),(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10",children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(p.DollarSign,{className:"size-4"})," Approved Value"]}),(0,b.jsx)(h.CardDescription,{children:"Total value of approved quotes"})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10",children:(0,b.jsx)("div",{className:"text-3xl font-semibold",children:ai?(0,b.jsx)("div",{className:"h-9 w-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):G(ah)})})]})]}),(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10 flex flex-col gap-2 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{children:"Quotes"}),(0,b.jsx)(h.CardDescription,{children:"Search, sort, and browse your quotes"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsx)(f.Input,{placeholder:"Search quotes...",value:_,onChange:a=>aa(a.target.value),className:"w-full md:w-96"}),(0,b.jsxs)(B.ButtonGroup,{children:[(0,b.jsxs)("button",{onClick:()=>t("table"),"aria-pressed":"table"===j,"aria-label":"Table view",className:(0,C.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","table"===j?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:[(0,b.jsx)(u.TableProperties,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Table"})]}),(0,b.jsxs)("button",{onClick:()=>t("kanban"),"aria-pressed":"kanban"===j,"aria-label":"Kanban view",className:(0,C.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","kanban"===j?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:[(0,b.jsx)(v.LayoutGrid,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Kanban"})]})]})]})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10 px-0",children:aj?(0,b.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-muted",children:(0,b.jsx)(o.FileText,{className:"h-12 w-12 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No quotes yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6 max-w-sm mx-auto",children:"Create your first quote to get started and track proposals in one place."}),(0,b.jsxs)("button",{onClick:()=>a.push("/quotes/new"),className:"group inline-flex items-center gap-2 rounded-lg bg-primary/10 px-4 py-2 text-sm font-semibold text-primary shadow-sm transition-all duration-200 hover:bg-primary/15 hover:text-primary/80 hover:shadow-md ring-1 ring-primary/30 hover:ring-primary/40 backdrop-blur-sm",children:[(0,b.jsx)(s.Plus,{className:"h-4 w-4"}),"Create Your First Quote",(0,b.jsx)("span",{"aria-hidden":"true",className:"transition-transform duration-200 group-hover:translate-x-1",children:"→"})]})]}):"kanban"===j?(0,b.jsx)("div",{className:"px-2 py-6 h-[calc(100vh-28rem)]",children:(0,b.jsx)(A.KanbanProvider,{columns:D,data:O,onDataChange:ae,children:c=>{let d=O.filter(a=>a.column===c.id);return(0,b.jsxs)(A.KanbanBoard,{id:c.id,className:"bg-card/60 flex flex-col",children:[(0,b.jsxs)(A.KanbanHeader,{className:"flex items-center justify-between border-b bg-muted/30 shrink-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm text-foreground",children:c.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:c.description})]}),(0,b.jsx)(z.StyledBadge,{variant:"outline",children:d.length})]}),(0,b.jsx)(A.KanbanCards,{id:c.id,children:c=>(0,b.jsx)(A.KanbanCard,{id:c.id,name:c.name,column:c.column,children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground",children:c.quoteNumber}),(0,b.jsx)(z.StyledBadge,{variant:E(c.status),children:F(c.status)})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:c.name}),(0,b.jsx)("div",{className:"flex items-center justify-between text-xs",children:(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Client: ",c.clientName]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs border-t border-border/50 pt-2",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground text-base",children:G(c.total)}),c.validUntil&&(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Valid until:"," ",new Date(c.validUntil).toLocaleDateString()]})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-border/50",children:(0,b.jsx)(y.StyledButton,{intent:"outline",size:"sm",icon:(0,b.jsx)(r.ExternalLink,{className:"h-3.5 w-3.5"}),label:"View Quote",showArrow:!1,onClick:b=>{b?.stopPropagation(),a.push(`/quotes/${c.id}`)},className:"w-full justify-center"})})]})},c.id)})]},c.id)}})}):(0,b.jsxs)("div",{className:"px-6",children:[(0,b.jsx)("div",{className:"overflow-hidden rounded-lg border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{className:"bg-muted sticky top-0 z-10",children:af.getHeaderGroups().map(a=>(0,b.jsx)(i.TableRow,{children:a.headers.map(a=>(0,b.jsx)(i.TableHead,{children:a.isPlaceholder?null:(0,k.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(i.TableBody,{children:ai?Array.from({length:5}).map((c,d)=>(0,b.jsx)(i.TableRow,{children:Array.from({length:H(a,ac).length}).map((a,c)=>(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 animate-pulse"})},c))},d)):af.getRowModel().rows?.length?af.getRowModel().rows.map(a=>(0,b.jsx)(i.TableRow,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(a=>(0,b.jsx)(i.TableCell,{children:(0,k.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:H(a,ac).length,className:"h-24 text-center",children:"No quotes match your search."})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,b.jsxs)("div",{className:"text-muted-foreground text-sm",children:[af.getFilteredRowModel().rows.length," of ",W.length," ","quotes"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>af.previousPage(),isDisabled:!af.getCanPreviousPage(),"aria-label":"Previous page",children:(0,b.jsx)(m.ChevronLeft,{className:"size-4"})}),(0,b.jsxs)("div",{className:"text-sm font-medium",children:["Page ",af.getState().pagination?.pageIndex+1," of"," ",af.getPageCount()]}),(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>af.nextPage(),isDisabled:!af.getCanNextPage(),"aria-label":"Next page",children:(0,b.jsx)(n.ChevronRight,{className:"size-4"})})]})]})]})})]}),K&&(0,b.jsx)(x.default,{isOpen:I,onClose:()=>J(!1),onConfirm:ad,title:"Delete Quote",itemName:K.name,itemType:"Quote"})]})}a.s(["default",()=>I])}];

//# sourceMappingURL=apps_web_src_app_%28workspace%29_quotes_page_tsx_9a7fc700._.js.map