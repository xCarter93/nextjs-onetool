module.exports=[886716,a=>{"use strict";let b,c,d,e,f,g,h,i,j,k;var l=a.i(187924);a.i(511241);var m=a.i(296373),n=a.i(130487),o=a.i(50944),p=a.i(539524),q=a.i(629353),r=a.i(770137),s=a.i(572131),t=a.i(811182),u=a.i(954714),v=a.i(592552),w=a.i(968177),x=a.i(84059),y=a.i(928503),z=a.i(197463),A=a.i(762537),B=a.i(165004),C=a.i(477430),D=a.i(295458),E=a.i(297257),F=a.i(360031),G=a.i(892984);a.i(501786);var H=a.i(184394),I=a.i(976695),J=a.i(284505),K=a.i(170106);let L=(0,K.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var M=a.i(296101),N=a.i(596221);let O=(0,K.default)("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),P=(0,s.memo)(({document:a})=>{var b;let c;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"shrink-0",children:"signed-quote"===a.type?(0,l.jsx)("div",{className:"h-16 w-16 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:(0,l.jsx)(O,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}):a.mimeType.startsWith("image/")?(0,l.jsx)("div",{className:"h-16 w-16 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden",children:(0,l.jsx)(L,{className:"h-6 w-6 text-blue-500"})}):(0,l.jsx)("div",{className:"h-16 w-16 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:(0,l.jsx)(I.FileIcon,{className:`h-6 w-6 ${"application/pdf"===a.mimeType?"text-red-500":"text-gray-500"}`})})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:a.fileName}),"signed-quote"===a.type&&(0,l.jsx)(w.Badge,{variant:"outline",className:"shrink-0 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800",children:"Signed Quote"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[a.fileSize>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(a=>{if(0===a)return"0 Bytes";let b=["Bytes","KB","MB","GB","TB","PB"],c=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,c=Math.min(c,b.length-1))*100)/100+" "+b[c]})(a.fileSize)}),(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"•"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(b=a.uploadedAt,c="undefined"!=typeof navigator?navigator.language:void 0,new Date(b).toLocaleDateString(c,{year:"numeric",month:"short",day:"numeric"}))}),a.quoteNumber&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Quote #",a.quoteNumber]})]})]})]}),(0,l.jsx)("div",{className:"shrink-0",children:(0,l.jsx)(J.Download,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})})]})});function Q({projectId:a}){let b=(0,m.useQuery)(n.api.messageAttachments.listByEntity,{entityType:"project",entityId:a}),c=(0,m.useQuery)(n.api.documents.listSignedByProject,{projectId:a}),d=(0,s.useMemo)(()=>{if(b&&c)return[...b.map(a=>({_id:a._id,fileName:a.fileName,fileSize:a.fileSize,mimeType:a.mimeType,uploadedAt:a.uploadedAt,downloadUrl:a.downloadUrl,type:"attachment"})),...c.map(a=>({_id:a._id,fileName:a.fileName,fileSize:a.fileSize,mimeType:a.mimeType,uploadedAt:a.uploadedAt,downloadUrl:a.downloadUrl,type:"signed-quote",quoteNumber:a.quoteNumber}))].sort((a,b)=>b.uploadedAt-a.uploadedAt)},[b,c]);return void 0===d?(0,l.jsxs)(H.StyledCard,{children:[(0,l.jsx)(H.StyledCardHeader,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(M.FolderOpen,{className:"h-5 w-5 text-primary"}),(0,l.jsx)(H.StyledCardTitle,{className:"text-lg",children:"Project Documents"})]})}),(0,l.jsx)(H.StyledCardContent,{children:(0,l.jsx)("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(a=>(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-16 w-16 bg-gray-200 dark:bg-gray-700 rounded-lg"}),(0,l.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,l.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},a))})})]}):0===d.length?(0,l.jsxs)(H.StyledCard,{children:[(0,l.jsxs)(H.StyledCardHeader,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(M.FolderOpen,{className:"h-5 w-5 text-primary"}),(0,l.jsx)(H.StyledCardTitle,{className:"text-lg",children:"Project Documents"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Files shared in team communications and signed quotes"})]}),(0,l.jsx)(H.StyledCardContent,{children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:(0,l.jsx)(M.FolderOpen,{className:"h-8 w-8 text-gray-400 dark:text-gray-600"})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No documents yet"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-sm",children:"Documents and signed quotes will appear here"})]})})]}):(0,l.jsxs)(H.StyledCard,{children:[(0,l.jsxs)(H.StyledCardHeader,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(M.FolderOpen,{className:"h-5 w-5 text-primary"}),(0,l.jsx)(H.StyledCardTitle,{className:"text-lg",children:"Project Documents"}),(0,l.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",d.length,")"]})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Files shared in team communications and signed quotes"})]}),(0,l.jsx)(H.StyledCardContent,{children:(0,l.jsx)("div",{className:"grid grid-cols-1 gap-3",children:d.map(a=>(0,l.jsx)(R,{downloadUrl:a.downloadUrl,children:(0,l.jsx)(P,{document:a})},a._id))})})]})}function R({downloadUrl:a,children:b}){return a?(0,l.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all",children:b}):(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg opacity-50","aria-busy":"true","aria-label":"Loading download link",children:[(0,l.jsx)(N.Loader2,{className:"h-4 w-4 text-gray-400 animate-spin shrink-0"}),b]})}P.displayName="DocumentContent";var S=a.i(700760),T=a.i(706607),U=a.i(813296);let V=s.forwardRef(function({title:a,titleId:b,...c},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?s.createElement("title",{id:b},a):null,s.createElement("path",{fillRule:"evenodd",d:"M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))});var W=a.i(23692),X=a.i(39267),Y=a.i(703471);let Z=s.forwardRef(function({title:a,titleId:b,...c},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?s.createElement("title",{id:b},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}),$=s.forwardRef(function({title:a,titleId:b,...c},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?s.createElement("title",{id:b},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))});var _=a.i(730769),aa=a.i(915618),ab=a.i(911300),ac=a.i(501199),ad=a.i(104720),ae=a.i(546842),af=a.i(130827);let ag=u.object({clientId:u.string().optional(),title:u.string().min(1,"Project title is required"),instructions:u.string().optional(),projectType:u.enum(["one-off","recurring"]),startDate:u.date().optional(),endDate:u.date().optional(),assignedUserIds:u.array(u.string()).optional(),invoiceReminderEnabled:u.boolean(),scheduleForLater:u.boolean()}),ah=a=>a?("number"==typeof a?new Date(a):a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set",ai=a=>{switch(a){case"planned":case"lead":case"prospect":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"completed":case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"cancelled":case"archived":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}};function aj({projectId:a,project:b,onUpdate:c,onDelete:d,onStatusUpdate:e,isUpdating:f,projectTasks:g,projectQuotes:h,approvedQuotesCount:i,onTaskSheetOpen:j,onNavigate:k,onGenerateInvoice:o,isEditing:q,onEditingChange:r}){let[u,H]=(0,s.useState)(!1),I=void 0!==q?q:u,J=a=>{r?r(a):H(a)},[K,L]=(0,s.useState)(()=>{let a=new Date;return a.setHours(0,0,0,0),a}),[M,N]=(0,s.useState)(!1),[O,P]=(0,s.useState)(!1),R=(0,m.useQuery)(n.api.clients.list,{}),aj=(0,m.useQuery)(n.api.clients.get,b?.clientId?{id:b.clientId}:"skip"),ak=(0,m.useQuery)(n.api.clientContacts.listByClient,b?.clientId?{clientId:b.clientId}:"skip"),al=(0,m.useQuery)(n.api.clientProperties.listByClient,b?.clientId?{clientId:b.clientId}:"skip"),am=(0,m.useQuery)(n.api.users.listByOrg),an=(0,t.useForm)({defaultValues:{clientId:b.clientId?.toString()||"",title:b.title,instructions:b.instructions||"",projectType:b.projectType,startDate:b.startDate?new Date(b.startDate):void 0,endDate:b.endDate?new Date(b.endDate):void 0,assignedUserIds:b.assignedUserIds||[],invoiceReminderEnabled:b.invoiceReminderEnabled||!1,scheduleForLater:b.scheduleForLater||!1},onSubmit:async({value:a})=>{let d=ag.safeParse(a);if(!d.success)return void console.error("Validation errors:",d.error.flatten());let e={};(a.clientId||void 0)!==(b.clientId||void 0)&&(e.clientId=a.clientId),a.title!==b.title&&(e.title=a.title.trim()),(a.instructions||"")!==(b.instructions||"")&&(e.instructions=a.instructions||void 0),a.projectType!==b.projectType&&(e.projectType=a.projectType),(a.startDate?a.startDate.getTime():void 0)!==(b.startDate||void 0)&&(e.startDate=a.startDate?a.startDate.getTime():void 0),(a.endDate?a.endDate.getTime():void 0)!==(b.endDate||void 0)&&(e.endDate=a.endDate?a.endDate.getTime():void 0);let f=b.assignedUserIds||[],g=a.assignedUserIds||[];(f.length!==g.length||f.some((a,b)=>a!==g[b]))&&(e.assignedUserIds=g.length>0?g:void 0),(a.invoiceReminderEnabled||!1)!==(b.invoiceReminderEnabled||!1)&&(e.invoiceReminderEnabled=!!a.invoiceReminderEnabled),(a.scheduleForLater||!1)!==(b.scheduleForLater||!1)&&(e.scheduleForLater=!!a.scheduleForLater),0===Object.keys(e).length||await c(e),J(!1)}});(0,s.useEffect)(()=>{b&&(an.setFieldValue("clientId",b.clientId?.toString()||""),an.setFieldValue("title",b.title),an.setFieldValue("instructions",b.instructions||""),an.setFieldValue("projectType",b.projectType),an.setFieldValue("startDate",b.startDate?new Date(b.startDate):void 0),an.setFieldValue("endDate",b.endDate?new Date(b.endDate):void 0),an.setFieldValue("assignedUserIds",b.assignedUserIds||[]),an.setFieldValue("invoiceReminderEnabled",b.invoiceReminderEnabled||!1),an.setFieldValue("scheduleForLater",b.scheduleForLater||!1))},[b,an]);let ao=ak?.find(a=>a.isPrimary)||ak?.[0],ap=al?.find(a=>a.isPrimary)||al?.[0],aq=a=>{an.setFieldValue("projectType",a)},ar=(0,s.useMemo)(()=>(R??[]).map(a=>a.companyName),[R]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,l.jsxs)(v.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,l.jsx)(v.CardHeader,{className:"pb-4",children:(0,l.jsxs)(v.CardTitle,{className:"flex items-center justify-between text-xl font-semibold text-gray-900 dark:text-white",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(T.MagnifyingGlassIcon,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Client Information"]}),aj&&(0,l.jsxs)(C.Tooltip,{children:[(0,l.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,l.jsx)("button",{onClick:()=>k(`/clients/${aj._id}`),className:"inline-flex items-center justify-center h-8 w-8 rounded-md bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors",type:"button",children:(0,l.jsx)($,{className:"h-4 w-4"})})}),(0,l.jsx)(C.TooltipContent,{children:(0,l.jsx)("p",{children:"Navigate to client page"})})]})]})}),(0,l.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400 text-left",children:"Selected Client"}),(0,l.jsx)(an.Field,{name:"clientId",children:a=>(0,l.jsx)(D.default,{options:ar,placeholder:aj?aj.companyName:"No client selected...",disabled:!I,onSelect:b=>{if(I){let c=R?.find(a=>a.companyName===b);a.handleChange(c?c._id:"")}}})})]}),aj&&!I?(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),(0,l.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,l.jsx)(w.Badge,{className:ai(aj.status),variant:"outline",children:aj.status})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white capitalize",children:aj.clientType||"Not specified"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Industry:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:aj.industry||"No industry specified"})]}),aj.companyDescription&&(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Description:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:aj.companyDescription})]}),ao?.email&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Email:"}),(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)("a",{href:`mailto:${ao.email}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ao.email})})]}),ao?.phone&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Phone:"}),(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)("a",{href:`tel:${ao.phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ao.phone})})]})]}):I?(0,l.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,l.jsx)("p",{className:"text-sm",children:"Select a client above to see details"})}):(0,l.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,l.jsx)("p",{className:"text-sm",children:"No client selected"})})]})]}),(0,l.jsxs)(v.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,l.jsx)(v.CardHeader,{className:"pb-4",children:(0,l.jsxs)(v.CardTitle,{className:"flex items-center gap-2 text-xl font-semibold text-gray-900 dark:text-white",children:[(0,l.jsx)(W.MapPinIcon,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),"Property Address"]})}),(0,l.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400 text-left",children:"Selected Property"}),(0,l.jsx)(D.default,{options:al&&al.length>0?al.map(a=>a.propertyName?`${a.propertyName} - ${a.streetAddress}`:a.streetAddress):[],placeholder:ap?ap.propertyName?`${ap.propertyName} - ${ap.streetAddress}`:ap.streetAddress:aj&&al&&al.length>0?"Select a property...":aj?"No properties available...":"Select a client first...",disabled:!I,onSelect:a=>{I&&al&&console.log("Selected property:",al.find(b=>(b.propertyName?`${b.propertyName} - ${b.streetAddress}`:b.streetAddress)===a))}})]}),ap&&!I?(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[ap.propertyName&&(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Property Name:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white font-medium",children:ap.propertyName})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white capitalize",children:ap.propertyType||"Not specified"})]}),ap.squareFootage&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Square Footage:"}),(0,l.jsxs)("div",{className:"mt-1 text-gray-900 dark:text-white",children:[ap.squareFootage.toLocaleString()," sq ft"]})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Address:"}),(0,l.jsxs)("div",{className:"mt-1 text-gray-900 dark:text-white",children:[(0,l.jsx)("div",{className:"font-medium",children:ap.streetAddress}),(0,l.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:[ap.city,", ",ap.state," ",ap.zipCode,ap.country&&`, ${ap.country}`]})]})]}),ap.description&&(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Description:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:ap.description})]})]}):I?(0,l.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,l.jsx)("p",{className:"text-sm",children:aj?al&&al.length>0?"Select a property above to see details":"No properties available for this client":"Select a client first to see properties"})}):(0,l.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,l.jsx)("p",{className:"text-sm",children:"No property selected"})})]})]}),(0,l.jsxs)(v.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,l.jsx)(v.CardHeader,{className:"pb-4",children:(0,l.jsxs)(v.CardTitle,{className:"flex items-center gap-2 text-xl font-semibold text-gray-900 dark:text-white",children:[(0,l.jsx)(U.UserIcon,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),"Contact Details"]})}),(0,l.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400 text-left",children:"Selected Contact"}),(0,l.jsx)(D.default,{options:ak&&ak.length>0?ak.map(a=>`${a.firstName} ${a.lastName}${a.jobTitle?` - ${a.jobTitle}`:""}`):[],placeholder:ao?`${ao.firstName} ${ao.lastName}${ao.jobTitle?` - ${ao.jobTitle}`:""}`:aj&&ak&&ak.length>0?"Select a contact...":aj?"No contacts available...":"Select a client first...",disabled:!I,onSelect:a=>{I&&ak&&console.log("Selected contact:",ak.find(b=>`${b.firstName} ${b.lastName}${b.jobTitle?` - ${b.jobTitle}`:""}`===a))}})]}),ao&&!I?(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Name:"}),(0,l.jsxs)("div",{className:"mt-1 text-gray-900 dark:text-white font-medium",children:[ao.firstName," ",ao.lastName]})]}),ao.jobTitle&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Job Title:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:ao.jobTitle})]}),ao.role&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Role:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white capitalize",children:ao.role})]}),ao.department&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Department:"}),(0,l.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:ao.department})]}),ao.email&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Email:"}),(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)("a",{href:`mailto:${ao.email}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ao.email})})]}),ao.phone&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Phone:"}),(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)("a",{href:`tel:${ao.phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ao.phone})})]})]}):I?(0,l.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,l.jsx)("p",{className:"text-sm",children:aj?ak&&ak.length>0?"Select a contact above to see details":"No contacts available for this client":"Select a client first to see contacts"})}):(0,l.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,l.jsx)("p",{className:"text-sm",children:"No contact selected"})})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,l.jsxs)(v.Card,{className:(0,S.cn)("shadow-sm border-gray-200/60 dark:border-white/10",I?"lg:col-span-3":"lg:col-span-2"),children:[(0,l.jsx)(v.CardHeader,{className:"pb-4",children:(0,l.jsx)(v.CardTitle,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Project Information"})}),(0,l.jsx)(v.CardContent,{className:"space-y-6",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(x.FieldGroup,{children:(0,l.jsx)(an.Field,{name:"title",children:a=>{let b=a.state.meta.isTouched&&a.state.meta.errors.length>0;return(0,l.jsxs)(x.Field,{"data-invalid":b,children:[(0,l.jsx)(x.FieldLabel,{htmlFor:a.name,children:"Project Title"}),(0,l.jsx)(y.Input,{id:a.name,name:a.name,value:a.state.value,onBlur:a.handleBlur,onChange:b=>a.handleChange(b.target.value),"aria-invalid":b,disabled:!I}),b&&(0,l.jsx)(x.FieldError,{errors:a.state.meta.errors})]})}})}),(0,l.jsx)(x.FieldGroup,{children:(0,l.jsx)(an.Field,{name:"instructions",children:a=>{let b=a.state.meta.isTouched&&a.state.meta.errors.length>0;return(0,l.jsxs)(x.Field,{"data-invalid":b,children:[(0,l.jsx)(x.FieldLabel,{htmlFor:a.name,children:"Instructions"}),(0,l.jsx)(z.Textarea,{id:a.name,name:a.name,value:a.state.value,onBlur:a.handleBlur,onChange:b=>a.handleChange(b.target.value),"aria-invalid":b,rows:4,disabled:!I}),b&&(0,l.jsx)(x.FieldError,{errors:a.state.meta.errors})]})}})}),(0,l.jsx)(x.FieldGroup,{children:(0,l.jsx)(an.Field,{name:"assignedUserIds",children:a=>{let b=a.state.value||[];return(0,l.jsxs)(x.Field,{children:[(0,l.jsxs)(x.FieldLabel,{htmlFor:a.name,className:"flex items-center gap-2",children:[(0,l.jsx)(ae.User,{className:"h-4 w-4 text-primary"}),"Assign To"]}),(0,l.jsx)(af.StyledMultiSelector,{options:am?.map(a=>({label:a.name||a.email,value:a._id}))||[],value:b,onValueChange:b=>a.handleChange(b),placeholder:"Select team members",maxCount:2,disabled:!I,className:"w-full"})]})}})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Project Number"}),(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("span",{className:"text-sm text-gray-900 dark:text-white font-mono",children:["#",b.projectNumber||a.slice(-6)]})})]}),(0,l.jsx)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-white/10",children:(0,l.jsx)(an.Field,{name:"invoiceReminderEnabled",children:a=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"checkbox",checked:a.state.value,onChange:b=>a.handleChange(b.target.checked),readOnly:!I,disabled:!I,className:"h-4 w-4 rounded border-gray-300 dark:border-white/10 text-blue-600 dark:text-indigo-500"}),(0,l.jsx)("label",{className:"text-sm text-gray-900 dark:text-white",children:"Remind me to invoice when I close the project"})]})})})]})})]}),!I&&(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsx)(Q,{projectId:a})})]}),(0,l.jsxs)(v.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,l.jsx)(v.CardHeader,{className:"pb-4",children:(0,l.jsxs)(v.CardTitle,{className:"flex items-center gap-2 text-xl font-semibold text-gray-900 dark:text-white",children:[(0,l.jsx)(_.CalendarIcon,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),"Schedule & Project Details"]})}),(0,l.jsxs)(v.CardContent,{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Project Type"}),(0,l.jsx)(an.Field,{name:"projectType",children:a=>(0,l.jsxs)(G.ButtonGroup,{children:[(0,l.jsx)("button",{type:"button",onClick:()=>{I&&aq("one-off")},disabled:!I,className:(0,S.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","one-off"===a.state.value?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:"One-off Project"}),(0,l.jsx)("button",{type:"button",onClick:()=>{I&&aq("recurring")},disabled:!I,className:(0,S.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","recurring"===a.state.value?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:"Recurring Project"})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Start Date"}),(0,l.jsx)(an.Field,{name:"startDate",children:a=>(0,l.jsxs)(B.Popover,{open:M,onOpenChange:N,children:[(0,l.jsx)(B.PopoverTrigger,{asChild:!0,children:(0,l.jsxs)(p.Button,{intent:"outline",className:"w-full justify-start text-left font-normal",isDisabled:!I||f,children:[(0,l.jsx)(_.CalendarIcon,{className:"mr-2 h-4 w-4"}),a.state.value?ah(a.state.value):"Select start date"]})}),(0,l.jsx)(B.PopoverContent,{className:"w-auto p-0 bg-white dark:bg-gray-950",align:"start",children:(0,l.jsx)(A.Calendar,{mode:"single",selected:a.state.value,onSelect:b=>{a.handleChange(b),N(!1)},disabled:f,className:"bg-white! dark:bg-gray-950!"})})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"End Date"}),(0,l.jsx)(an.Field,{name:"endDate",children:a=>{let b=an.getFieldValue("startDate");return(0,l.jsxs)(B.Popover,{open:O,onOpenChange:P,children:[(0,l.jsx)(B.PopoverTrigger,{asChild:!0,children:(0,l.jsxs)(p.Button,{intent:"outline",className:"w-full justify-start text-left font-normal",isDisabled:!I||f,children:[(0,l.jsx)(_.CalendarIcon,{className:"mr-2 h-4 w-4"}),a.state.value?ah(a.state.value):"Select end date"]})}),(0,l.jsx)(B.PopoverContent,{className:"w-auto p-0 bg-white dark:bg-gray-950",align:"start",children:(0,l.jsx)(A.Calendar,{mode:"single",selected:a.state.value,onSelect:b=>{a.handleChange(b),P(!1)},disabled:a=>{if(f)return!0;if(!b)return!1;let c=new Date("number"==typeof b?b:b.getTime());c.setHours(0,0,0,0);let d=new Date(a);return d.setHours(0,0,0,0),d<c},className:"bg-white! dark:bg-gray-950!"})})]})}})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)(an.Field,{name:"scheduleForLater",children:a=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"checkbox",checked:a.state.value,onChange:b=>a.handleChange(b.target.checked),readOnly:!I,disabled:!I,className:"h-4 w-4 rounded border-gray-300 dark:border-white/10 text-blue-600 dark:text-indigo-500"}),(0,l.jsx)("label",{className:"text-sm text-gray-900 dark:text-white",children:"Scheduled for later"})]})})})]}),(0,l.jsx)(E.CalendarWidget,{form:an,calendarDate:K,handleCalendarNavigation:a=>{L(b=>{let c=new Date(b);return"prev"===a?c.setMonth(c.getMonth()-1):c.setMonth(c.getMonth()+1),c})},handleDateClick:a=>{if(!a||!I)return;let b=new Date(K.getFullYear(),K.getMonth(),a);b.setHours(0,0,0,0);let c=an.getFieldValue("startDate"),d=an.getFieldValue("endDate");c?d?(an.setFieldValue("startDate",b),an.setFieldValue("endDate",void 0)):an.setFieldValue("endDate",b):an.setFieldValue("startDate",b)},formatDisplayDate:ah,variant:"default"})]})]})]}),!I&&(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,l.jsxs)(v.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,l.jsx)(v.CardHeader,{className:"pb-4",children:(0,l.jsxs)(v.CardTitle,{className:"flex items-center justify-between text-xl font-semibold text-gray-900 dark:text-white",children:[(0,l.jsxs)("span",{children:["Tasks (",g?.length||0,")"]}),(0,l.jsxs)("button",{type:"button",onClick:j,className:"group inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 transition-all duration-200 px-4 py-2 rounded-lg bg-primary/10 hover:bg-primary/15 ring-1 ring-primary/30 hover:ring-primary/40 shadow-sm hover:shadow-md backdrop-blur-sm",children:[(0,l.jsx)(aa.Plus,{className:"h-4 w-4"}),"Add Task",(0,l.jsx)("span",{"aria-hidden":"true",className:"group-hover:translate-x-1 transition-transform duration-200",children:"→"})]})]})}),(0,l.jsx)(v.CardContent,{children:g&&g.length>0?(0,l.jsxs)("div",{className:"space-y-3",children:[g.slice(0,4).map(a=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:`w-2 h-2 rounded-full ${"completed"===a.status?"bg-green-500":"cancelled"===a.status?"bg-red-500":"bg-yellow-500"}`}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:a.title}),a.date&&(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ah(a.date)})]})]}),(0,l.jsx)(w.Badge,{className:ai(a.status),children:a.status})]},a._id)),g.length>4&&(0,l.jsxs)("button",{type:"button",onClick:()=>k(`/projects/${a}/tasks`),className:"w-full mt-3 h-9 px-3 py-2 text-sm border border-gray-200 dark:border-white/10 rounded-md hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:["View All ",g.length," Tasks"]})]}):(0,l.jsxs)("div",{className:"p-6 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"flex justify-center mb-3",children:(0,l.jsx)(ab.ClipboardList,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})}),(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tasks created yet"})]})})]}),(0,l.jsxs)(v.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,l.jsx)(v.CardHeader,{className:"pb-4",children:(0,l.jsxs)(v.CardTitle,{className:"flex items-center justify-between text-xl font-semibold text-gray-900 dark:text-white",children:[(0,l.jsxs)("span",{children:["Quotes (",h?.length||0,")"]}),(0,l.jsxs)("button",{type:"button",onClick:()=>k(`/quotes/new?projectId=${a}`),className:"group inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 transition-all duration-200 px-4 py-2 rounded-lg bg-primary/10 hover:bg-primary/15 ring-1 ring-primary/30 hover:ring-primary/40 shadow-sm hover:shadow-md backdrop-blur-sm",children:[(0,l.jsx)(aa.Plus,{className:"h-4 w-4"}),"Add Quote",(0,l.jsx)("span",{"aria-hidden":"true",className:"group-hover:translate-x-1 transition-transform duration-200",children:"→"})]})]})}),(0,l.jsx)(v.CardContent,{children:h&&h.length>0?(0,l.jsxs)("div",{className:"space-y-3",children:[h.slice(0,4).map(a=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 transition-colors cursor-pointer",onClick:()=>k(`/quotes/${a._id}`),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["Quote #",a.quoteNumber||a._id.slice(-6)]}),(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ah(a._creationTime)})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[a.total&&(0,l.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",a.total.toLocaleString()]}),(0,l.jsx)(w.Badge,{className:ai(a.status||"draft"),children:a.status||"draft"})]})]},a._id)),h.length>4&&(0,l.jsxs)("button",{type:"button",onClick:()=>k(`/projects/${a}/quotes`),className:"w-full mt-3 h-9 px-3 py-2 text-sm border border-gray-200 dark:border-white/10 rounded-md hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:["View All ",h.length," Quotes"]})]}):(0,l.jsxs)("div",{className:"p-6 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"flex justify-center mb-3",children:(0,l.jsx)(ac.Receipt,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})}),(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No quotes created yet"})]})})]})]})]}),(0,l.jsx)(an.Subscribe,{selector:a=>a.values,children:a=>{var c,g;let h,j,k=(a.clientId||"")!==(b.clientId?.toString()||"")||a.title!==b.title||(a.instructions||"")!==(b.instructions||"")||a.projectType!==b.projectType||(a.startDate?a.startDate.getTime():void 0)!==(b.startDate||void 0)||(a.endDate?a.endDate.getTime():void 0)!==(b.endDate||void 0)||(c=a.assignedUserIds,g=b.assignedUserIds,h=c||[],j=g||[],!(h.length===j.length&&h.every((a,b)=>a===j[b])))||(a.invoiceReminderEnabled||!1)!==(b.invoiceReminderEnabled||!1)||(a.scheduleForLater||!1)!==(b.scheduleForLater||!1);return(0,l.jsx)(F.StickyFormFooter,{buttons:(a=>{let c=[];if(I?(c.push({label:f?"Saving...":"Save",onClick:()=>an.handleSubmit(),intent:"primary",disabled:f||!a,icon:(0,l.jsx)(V,{className:"h-4 w-4"})}),c.push({label:"Cancel",onClick:()=>{an.setFieldValue("clientId",b.clientId?.toString()||""),an.setFieldValue("title",b.title),an.setFieldValue("instructions",b.instructions||""),an.setFieldValue("projectType",b.projectType),an.setFieldValue("startDate",b.startDate?new Date(b.startDate):void 0),an.setFieldValue("endDate",b.endDate?new Date(b.endDate):void 0),an.setFieldValue("assignedUserIds",b.assignedUserIds||[]),an.setFieldValue("invoiceReminderEnabled",b.invoiceReminderEnabled||!1),an.setFieldValue("scheduleForLater",b.scheduleForLater||!1),J(!1)},intent:"outline"})):c.push({label:"Edit",onClick:()=>J(!0),intent:"outline",icon:(0,l.jsx)(X.PencilIcon,{className:"h-4 w-4"})}),b)switch(b.status){case"planned":c.push({label:"Start Project",onClick:()=>e("in-progress"),intent:"success",disabled:f,icon:(0,l.jsx)(Z,{className:"h-4 w-4"}),position:"right"});break;case"in-progress":c.push({label:"Complete",onClick:()=>e("completed"),intent:"success",disabled:f,icon:(0,l.jsx)(V,{className:"h-4 w-4"}),position:"right"});break;case"completed":c.push({label:"Reopen Project",onClick:()=>e("in-progress"),intent:"outline",disabled:f,position:"right"});break;case"cancelled":c.push({label:"Restore Project",onClick:()=>e("planned"),intent:"outline",disabled:f,position:"right"})}return c.push({label:"Generate Invoice",onClick:o,intent:"primary",icon:(0,l.jsx)(ad.FileText,{className:"h-4 w-4"}),position:"right",disabled:0===i}),c.push({label:"Delete",onClick:d,intent:"destructive",icon:(0,l.jsx)(Y.TrashIcon,{className:"h-4 w-4"}),position:"right"}),c})(k),fullWidth:!0,hasUnsavedChanges:k,isEditing:I})}})]})}aj.displayName="ProjectViewEditForm";var ak=a.i(527415),al=a.i(564361),am=a.i(877559),an=a.i(757215),ao=a.i(800343),ap=a.i(412564),aq=a.i(935112),ar=Object.defineProperty,as=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?ar(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c,c};let at=new class{constructor(){as(this,"current",this.detect()),as(this,"handoffState","pending"),as(this,"currentId",0)}set(a){this.current!==a&&(this.handoffState="pending",this.currentId=0,this.current=a)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"server"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},au=(a,b)=>{at.isServer?(0,s.useEffect)(a,b):(0,s.useLayoutEffect)(a,b)};function av(a){let b=(0,s.useRef)(a);return au(()=>{b.current=a},[a]),b}let aw=function(a){let b=av(a);return s.default.useCallback((...a)=>b.current(...a),[b])};function ax(a){return(0,s.useMemo)(()=>a,Object.values(a))}let ay=Symbol();function az(...a){let b=(0,s.useRef)(a);(0,s.useEffect)(()=>{b.current=a},[a]);let c=aw(a=>{for(let c of b.current)null!=c&&("function"==typeof c?c(a):c.current=a)});return a.every(a=>null==a||(null==a?void 0:a[ay]))?void 0:c}let aA=(0,s.createContext)(void 0);function aB(){return(0,s.useContext)(aA)}function aC(a,b){return a?a+"["+b+"]":b}function aD(...a){return Array.from(new Set(a.flatMap(a=>"string"==typeof a?a.split(" "):[]))).filter(Boolean).join(" ")}function aE(a,b,...c){if(a in b){let d=b[a];return"function"==typeof d?d(...c):d}let d=Error(`Tried to handle "${a}" but there is no handler defined. Only defined handlers are: ${Object.keys(b).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,aE),d}var aF=((b=aF||{})[b.None=0]="None",b[b.RenderStrategy=1]="RenderStrategy",b[b.Static=2]="Static",b),aG=((c=aG||{})[c.Unmount=0]="Unmount",c[c.Hidden=1]="Hidden",c);function aH(){let a,b,c=(a=(0,s.useRef)([]),b=(0,s.useCallback)(b=>{for(let c of a.current)null!=c&&("function"==typeof c?c(b):c.current=b)},[]),(...c)=>{if(!c.every(a=>null==a))return a.current=c,b});return(0,s.useCallback)(a=>(function({ourProps:a,theirProps:b,slot:c,defaultTag:d,features:e,visible:f=!0,name:g,mergeRefs:h}){h=null!=h?h:aJ;let i=aK(b,a);if(f)return aI(i,c,d,g,h);let j=null!=e?e:0;if(2&j){let{static:a=!1,...b}=i;if(a)return aI(b,c,d,g,h)}if(1&j){let{unmount:a=!0,...b}=i;return aE(+!a,{0:()=>null,1:()=>aI({...b,hidden:!0,style:{display:"none"}},c,d,g,h)})}return aI(i,c,d,g,h)})({mergeRefs:c,...a}),[c])}function aI(a,b={},c,d,e){let{as:f=c,children:g,refName:h="ref",...i}=aO(a,["unmount","static"]),j=void 0!==a.ref?{[h]:a.ref}:{},k="function"==typeof g?g(b):g;"className"in i&&i.className&&"function"==typeof i.className&&(i.className=i.className(b)),i["aria-labelledby"]&&i["aria-labelledby"]===i.id&&(i["aria-labelledby"]=void 0);let l={};if(b){let a=!1,c=[];for(let[d,e]of Object.entries(b))"boolean"==typeof e&&(a=!0),!0===e&&c.push(d.replace(/([A-Z])/g,a=>`-${a.toLowerCase()}`));if(a)for(let a of(l["data-headlessui-state"]=c.join(" "),c))l[`data-${a}`]=""}if(aP(f)&&(Object.keys(aN(i)).length>0||Object.keys(aN(l)).length>0))if(!(0,s.isValidElement)(k)||Array.isArray(k)&&k.length>1||aP(k.type)){if(Object.keys(aN(i)).length>0)throw Error(['Passing props on "Fragment"!',"",`The current component <${d} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(aN(i)).concat(Object.keys(aN(l))).map(a=>`  - ${a}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(a=>`  - ${a}`).join(`
`)].join(`
`))}else{var m;let a=k.props,b=null==a?void 0:a.className,c="function"==typeof b?(...a)=>aD(b(...a),i.className):aD(b,i.className),d=aK(k.props,aN(aO(i,["ref"])));for(let a in l)a in d&&delete l[a];return(0,s.cloneElement)(k,Object.assign({},d,l,j,{ref:e((m=k,s.default.version.split(".")[0]>="19"?m.props.ref:m.ref),j.ref)},c?{className:c}:{}))}return(0,s.createElement)(f,Object.assign({},aO(i,["ref"]),!aP(f)&&j,!aP(f)&&l),k)}function aJ(...a){return a.every(a=>null==a)?void 0:b=>{for(let c of a)null!=c&&("function"==typeof c?c(b):c.current=b)}}function aK(...a){if(0===a.length)return{};if(1===a.length)return a[0];let b={},c={};for(let d of a)for(let a in d)a.startsWith("on")&&"function"==typeof d[a]?(null!=c[a]||(c[a]=[]),c[a].push(d[a])):b[a]=d[a];if(b.disabled||b["aria-disabled"])for(let a in c)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(a)&&(c[a]=[a=>{var b;return null==(b=null==a?void 0:a.preventDefault)?void 0:b.call(a)}]);for(let a in c)Object.assign(b,{[a](b,...d){for(let e of c[a]){if((b instanceof Event||(null==b?void 0:b.nativeEvent)instanceof Event)&&b.defaultPrevented)return;e(b,...d)}}});return b}function aL(...a){if(0===a.length)return{};if(1===a.length)return a[0];let b={},c={};for(let d of a)for(let a in d)a.startsWith("on")&&"function"==typeof d[a]?(null!=c[a]||(c[a]=[]),c[a].push(d[a])):b[a]=d[a];for(let a in c)Object.assign(b,{[a](...b){for(let d of c[a])null==d||d(...b)}});return b}function aM(a){var b;return Object.assign((0,s.forwardRef)(a),{displayName:null!=(b=a.displayName)?b:a.name})}function aN(a){let b=Object.assign({},a);for(let a in b)void 0===b[a]&&delete b[a];return b}function aO(a,b=[]){let c=Object.assign({},a);for(let a of b)a in c&&delete c[a];return c}function aP(a){return a===s.Fragment||a===Symbol.for("react.fragment")}var aQ=((d=aQ||{})[d.None=1]="None",d[d.Focusable=2]="Focusable",d[d.Hidden=4]="Hidden",d);let aR=aM(function(a,b){var c;let{features:d=1,...e}=a,f={ref:b,"aria-hidden":(2&d)==2||(null!=(c=e["aria-hidden"])?c:void 0),hidden:(4&d)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&d)==4&&(2&d)!=2&&{display:"none"}}};return aH()({ourProps:f,theirProps:e,slot:{},defaultTag:"span",name:"Hidden"})}),aS=(0,s.createContext)(null);function aT({children:a}){let b=(0,s.useContext)(aS);if(!b)return s.default.createElement(s.default.Fragment,null,a);let{target:c}=b;return c?(0,aq.createPortal)(s.default.createElement(s.default.Fragment,null,a),c):null}function aU({data:a,form:b,disabled:c,onReset:d,overrides:e}){let[f,g]=(0,s.useState)(null),h=function(){let[a]=(0,s.useState)(function a(){let b=[],c={addEventListener:(a,b,d,e)=>(a.addEventListener(b,d,e),c.add(()=>a.removeEventListener(b,d,e))),requestAnimationFrame(...a){let b=requestAnimationFrame(...a);return c.add(()=>cancelAnimationFrame(b))},nextFrame:(...a)=>c.requestAnimationFrame(()=>c.requestAnimationFrame(...a)),setTimeout(...a){let b=setTimeout(...a);return c.add(()=>clearTimeout(b))},microTask(...a){var b;let d={current:!0};return b=()=>{d.current&&a[0]()},"function"==typeof queueMicrotask?queueMicrotask(b):Promise.resolve().then(b).catch(a=>setTimeout(()=>{throw a})),c.add(()=>{d.current=!1})},style(a,b,c){let d=a.style.getPropertyValue(b);return Object.assign(a.style,{[b]:c}),this.add(()=>{Object.assign(a.style,{[b]:d})})},group(b){let c=a();return b(c),this.add(()=>c.dispose())},add:a=>(b.includes(a)||b.push(a),()=>{let c=b.indexOf(a);if(c>=0)for(let a of b.splice(c,1))a()}),dispose(){for(let a of b.splice(0))a()}};return c});return(0,s.useEffect)(()=>()=>a.dispose(),[a]),a}();return(0,s.useEffect)(()=>{if(d&&f)return h.addEventListener(f,"reset",d)},[f,b,d]),s.default.createElement(aT,null,s.default.createElement(aV,{setForm:g,formId:b}),(function a(b={},c=null,d=[]){for(let[e,f]of Object.entries(b))!function b(c,d,e){if(Array.isArray(e))for(let[a,f]of e.entries())b(c,aC(d,a.toString()),f);else e instanceof Date?c.push([d,e.toISOString()]):"boolean"==typeof e?c.push([d,e?"1":"0"]):"string"==typeof e?c.push([d,e]):"number"==typeof e?c.push([d,`${e}`]):null==e?c.push([d,""]):function(a){if("[object Object]"!==Object.prototype.toString.call(a))return!1;let b=Object.getPrototypeOf(a);return null===b||null===Object.getPrototypeOf(b)}(e)&&!(0,s.isValidElement)(e)&&a(e,d,c)}(d,aC(c,e),f);return d})(a).map(([a,d])=>s.default.createElement(aR,{features:aQ.Hidden,...aN({key:a,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:b,disabled:c,name:a,value:d,...e})})))}function aV({setForm:a,formId:b}){return(0,s.useEffect)(()=>{if(b){let c=document.getElementById(b);c&&a(c)}},[a,b]),b?null:s.default.createElement(aR,{features:aQ.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:b=>{if(!b)return;let c=b.closest("form");c&&a(c)}})}let aW=(0,s.createContext)(void 0);function aX(){return(0,s.useContext)(aW)}function aY(a){return"object"==typeof a&&null!==a&&"nodeType"in a&&"tagName"in a}function aZ(a){return aY(a)&&"accessKey"in a}function a$(a){return aZ(a)&&"LABEL"===a.nodeName}function a_(a){return aZ(a)&&"LEGEND"===a.nodeName}function a0(a){var b;let c=a.parentElement,d=null;for(;c&&!(aZ(b=c)&&"FIELDSET"===b.nodeName);)a_(c)&&(d=c),c=c.parentElement;let e=(null==c?void 0:c.getAttribute("disabled"))==="";return!(e&&function(a){if(!a)return!1;let b=a.previousElementSibling;for(;null!==b;){if(a_(b))return!1;b=b.previousElementSibling}return!0}(d))&&e}function a1(a){var b,c;return at.isServer?null:null==a?document:null!=(c=null==(b=null==a?void 0:a.getRootNode)?void 0:b.call(a))?c:document}function a2(a){var b,c;return null!=(c=null==(b=a1(a))?void 0:b.activeElement)?c:null}let a3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(a=>`${a}:not([tabindex='-1'])`).join(","),a4=["[data-autofocus]"].map(a=>`${a}:not([tabindex='-1'])`).join(",");var a5=((e=a5||{})[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e),a6=((f=a6||{})[f.Error=0]="Error",f[f.Overflow=1]="Overflow",f[f.Success=2]="Success",f[f.Underflow=3]="Underflow",f),a7=((g=a7||{})[g.Previous=-1]="Previous",g[g.Next=1]="Next",g),a8=((h=a8||{})[h.Strict=0]="Strict",h[h.Loose=1]="Loose",h),a9=((i=a9||{})[i.Keyboard=0]="Keyboard",i[i.Mouse=1]="Mouse",i);function ba(a,b=a=>a){return a.slice().sort((a,c)=>{let d=b(a),e=b(c);if(null===d||null===e)return 0;let f=d.compareDocumentPosition(e);return f&Node.DOCUMENT_POSITION_FOLLOWING?-1:f&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function bb(a,b,{sorted:c=!0,relativeTo:d=null,skipElements:e=[]}={}){var f,g,h;let i=Array.isArray(a)?a.length>0?a1(a[0]):document:a1(a),j=Array.isArray(a)?c?ba(a):a:64&b?function(a=document.body){return null==a?[]:Array.from(a.querySelectorAll(a4)).sort((a,b)=>Math.sign((a.tabIndex||Number.MAX_SAFE_INTEGER)-(b.tabIndex||Number.MAX_SAFE_INTEGER)))}(a):function(a=document.body){return null==a?[]:Array.from(a.querySelectorAll(a3)).sort((a,b)=>Math.sign((a.tabIndex||Number.MAX_SAFE_INTEGER)-(b.tabIndex||Number.MAX_SAFE_INTEGER)))}(a);e.length>0&&j.length>1&&(j=j.filter(a=>!e.some(b=>null!=b&&"current"in b?(null==b?void 0:b.current)===a:b===a))),d=null!=d?d:null==i?void 0:i.activeElement;let k=(()=>{if(5&b)return 1;if(10&b)return -1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(1&b)return 0;if(2&b)return Math.max(0,j.indexOf(d))-1;if(4&b)return Math.max(0,j.indexOf(d))+1;if(8&b)return j.length-1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=32&b?{preventScroll:!0}:{},n=0,o=j.length,p;do{if(n>=o||n+o<=0)return 0;let a=l+n;if(16&b)a=(a+o)%o;else{if(a<0)return 3;if(a>=o)return 1}null==(p=j[a])||p.focus(m),n+=k}while(p!==a2(p))return 6&b&&null!=(h=null==(g=null==(f=p)?void 0:f.matches)?void 0:g.call(f,"textarea,input"))&&h&&p.select(),2}let bc=(0,s.createContext)(null);function bd(){let[a,b]=(0,s.useState)([]);return[a.length>0?a.join(" "):void 0,(0,s.useMemo)(()=>function(a){let c=aw(a=>(b(b=>[...b,a]),()=>b(b=>{let c=b.slice(),d=c.indexOf(a);return -1!==d&&c.splice(d,1),c}))),d=(0,s.useMemo)(()=>({register:c,slot:a.slot,name:a.name,props:a.props,value:a.value}),[c,a.slot,a.name,a.props,a.value]);return s.default.createElement(bc.Provider,{value:d},a.children)},[b])]}bc.displayName="DescriptionContext";let be=Object.assign(aM(function(a,b){let c=(0,s.useId)(),d=aB(),{id:e=`headlessui-description-${c}`,...f}=a,g=function a(){let b=(0,s.useContext)(bc);if(null===b){let b=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(b,a),b}return b}(),h=az(b);au(()=>g.register(e),[e,g.register]);let i=ax({...g.slot,disabled:d||!1}),j={ref:h,...g.props,id:e};return aH()({ourProps:j,theirProps:f,slot:i,defaultTag:"p",name:g.name||"Description"})}),{});var bf=((j=bf||{}).Space=" ",j.Enter="Enter",j.Escape="Escape",j.Backspace="Backspace",j.Delete="Delete",j.ArrowLeft="ArrowLeft",j.ArrowUp="ArrowUp",j.ArrowRight="ArrowRight",j.ArrowDown="ArrowDown",j.Home="Home",j.End="End",j.PageUp="PageUp",j.PageDown="PageDown",j.Tab="Tab",j);let bg=(0,s.createContext)(null);function bh(a){var b,c,d;let e=null!=(c=null==(b=(0,s.useContext)(bg))?void 0:b.value)?c:void 0;return(null!=(d=null==a?void 0:a.length)?d:0)>0?[e,...a].filter(Boolean).join(" "):e}function bi({inherit:a=!1}={}){let b=bh(),[c,d]=(0,s.useState)([]),e=a?[b,...c].filter(Boolean):c;return[e.length>0?e.join(" "):void 0,(0,s.useMemo)(()=>function(a){let b=aw(a=>(d(b=>[...b,a]),()=>d(b=>{let c=b.slice(),d=c.indexOf(a);return -1!==d&&c.splice(d,1),c}))),c=(0,s.useMemo)(()=>({register:b,slot:a.slot,name:a.name,props:a.props,value:a.value}),[b,a.slot,a.name,a.props,a.value]);return s.default.createElement(bg.Provider,{value:c},a.children)},[d])]}bg.displayName="LabelContext";let bj=Object.assign(aM(function(a,b){var c;let d=(0,s.useId)(),e=function a(){let b=(0,s.useContext)(bg);if(null===b){let b=Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(b,a),b}return b}(),f=aX(),g=aB(),{id:h=`headlessui-label-${d}`,htmlFor:i=null!=f?f:null==(c=e.props)?void 0:c.htmlFor,passive:j=!1,...k}=a,l=az(b);au(()=>e.register(h),[h,e.register]);let m=aw(a=>{var b;let c=a.currentTarget;if(!(a.target!==a.currentTarget&&aY(b=a.target)&&b.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'))&&(a$(c)&&a.preventDefault(),e.props&&"onClick"in e.props&&"function"==typeof e.props.onClick&&e.props.onClick(a),a$(c))){let a=document.getElementById(c.htmlFor);if(a){let b=a.getAttribute("disabled");if("true"===b||""===b)return;let c=a.getAttribute("aria-disabled");if("true"===c||""===c)return;(aZ(a)&&"INPUT"===a.nodeName&&("file"===a.type||"radio"===a.type||"checkbox"===a.type)||"radio"===a.role||"checkbox"===a.role||"switch"===a.role)&&a.click(),a.focus({preventScroll:!0})}}}),n=ax({...e.slot,disabled:g||!1}),o={ref:l,...e.props,id:h,htmlFor:i,onClick:m};return j&&("onClick"in o&&(delete o.htmlFor,delete o.onClick),"onClick"in k&&delete k.onClick),aH()({ourProps:o,theirProps:k,slot:n,defaultTag:i?"label":"div",name:e.name||"Label"})}),{});var bk=((k=bk||{})[k.RegisterOption=0]="RegisterOption",k[k.UnregisterOption=1]="UnregisterOption",k);let bl={0(a,b){let c=[...a.options,{id:b.id,element:b.element,propsRef:b.propsRef}];return{...a,options:ba(c,a=>a.element.current)}},1(a,b){let c=a.options.slice(),d=a.options.findIndex(a=>a.id===b.id);return -1===d?a:(c.splice(d,1),{...a,options:c})}},bm=(0,s.createContext)(null);function bn(a){let b=(0,s.useContext)(bm);if(null===b){let b=Error(`<${a} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,bn),b}return b}bm.displayName="RadioGroupDataContext";let bo=(0,s.createContext)(null);function bp(a){let b=(0,s.useContext)(bo);if(null===b){let b=Error(`<${a} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,bp),b}return b}function bq(a,b){return aE(b.type,bl,a,b)}bo.displayName="RadioGroupActionsContext";let br=Object.assign(aM(function(a,b){let c=(0,s.useId)(),d=aB(),{id:e=`headlessui-radiogroup-${c}`,value:f,form:g,name:h,onChange:i,by:j,disabled:k=d||!1,defaultValue:l,tabIndex:m=0,...n}=a,o=function(a=function(a,b){return null!==a&&null!==b&&"object"==typeof a&&"object"==typeof b&&"id"in a&&"id"in b?a.id===b.id:a===b}){return(0,s.useCallback)((b,c)=>"string"==typeof a?(null==b?void 0:b[a])===(null==c?void 0:c[a]):a(b,c),[a])}(j),[p,q]=(0,s.useReducer)(bq,{options:[]}),r=p.options,[t,u]=bi(),[v,w]=bd(),x=(0,s.useRef)(null),y=az(x,b),z=function(a){let[b]=(0,s.useState)(a);return b}(l),[A,B]=function(a,b,c){let[d,e]=(0,s.useState)(c),f=void 0!==a,g=(0,s.useRef)(f),h=(0,s.useRef)(!1),i=(0,s.useRef)(!1);return!f||g.current||h.current?f||!g.current||i.current||(i.current=!0,g.current=f,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(h.current=!0,g.current=f,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[f?a:d,aw(a=>(f||(0,aq.flushSync)(()=>e(a)),null==b?void 0:b(a)))]}(f,i,z),C=(0,s.useMemo)(()=>r.find(a=>!a.propsRef.current.disabled),[r]),D=(0,s.useMemo)(()=>r.some(a=>o(a.propsRef.current.value,A)),[r,A]),E=aw(a=>{var b;if(k||o(a,A))return!1;let c=null==(b=r.find(b=>o(b.propsRef.current.value,a)))?void 0:b.propsRef.current;return(null==c||!c.disabled)&&(null==B||B(a),!0)}),F=aw(a=>{if(!x.current)return;let b=r.filter(a=>!1===a.propsRef.current.disabled).map(a=>a.element.current);switch(a.key){case bf.Enter:!function(a){var b,c;let d=null!=(b=null==a?void 0:a.form)?b:a.closest("form");if(d){for(let b of d.elements)if(b!==a&&("INPUT"===b.tagName&&"submit"===b.type||"BUTTON"===b.tagName&&"submit"===b.type||"INPUT"===b.nodeName&&"image"===b.type))return void b.click();null==(c=d.requestSubmit)||c.call(d)}}(a.currentTarget);break;case bf.ArrowLeft:case bf.ArrowUp:if(a.preventDefault(),a.stopPropagation(),bb(b,a5.Previous|a5.WrapAround)===a6.Success){let a=r.find(a=>{var b;return a2(b=a.element.current)===b});a&&E(a.propsRef.current.value)}break;case bf.ArrowRight:case bf.ArrowDown:if(a.preventDefault(),a.stopPropagation(),bb(b,a5.Next|a5.WrapAround)===a6.Success){let a=r.find(a=>{var b;return a2(b=a.element.current)===b});a&&E(a.propsRef.current.value)}break;case bf.Space:{a.preventDefault(),a.stopPropagation();let b=r.find(a=>{var b;return a2(b=a.element.current)===b});b&&E(b.propsRef.current.value)}}}),G=aw(a=>(q({type:0,...a}),()=>q({type:1,id:a.id}))),H=(0,s.useMemo)(()=>({value:A,firstOption:C,containsCheckedOption:D,disabled:k,compare:o,tabIndex:m,...p}),[A,C,D,k,o,m,p]),I=(0,s.useMemo)(()=>({registerOption:G,change:E}),[G,E]),J=ax({value:A}),K=(0,s.useCallback)(()=>{if(void 0!==z)return E(z)},[E,z]),L=aH();return s.default.createElement(w,{name:"RadioGroup.Description"},s.default.createElement(u,{name:"RadioGroup.Label"},s.default.createElement(bo.Provider,{value:I},s.default.createElement(bm.Provider,{value:H},null!=h&&s.default.createElement(aU,{disabled:k,data:{[h]:A||"on"},overrides:{type:"radio",checked:null!=A},form:g,onReset:K}),L({ourProps:{ref:y,id:e,role:"radiogroup","aria-labelledby":t,"aria-describedby":v,onKeyDown:F},theirProps:n,slot:J,defaultTag:"div",name:"RadioGroup"})))))}),{Option:aM(function(a,b){var c;let d=bn("RadioGroup.Option"),e=bp("RadioGroup.Option"),f=(0,s.useId)(),{id:g=`headlessui-radiogroup-option-${f}`,value:h,disabled:i=d.disabled||!1,autoFocus:j=!1,...k}=a,l=(0,s.useRef)(null),m=az(l,b),[n,o]=bi(),[p,q]=bd(),r=av({value:h,disabled:i});au(()=>e.registerOption({id:g,element:l,propsRef:r}),[g,e,l,r]);let t=aw(a=>{var b;if(a0(a.currentTarget))return a.preventDefault();e.change(h)&&(null==(b=l.current)||b.focus())}),u=(null==(c=d.firstOption)?void 0:c.id)===g,{isFocusVisible:v,focusProps:w}=(0,ao.useFocusRing)({autoFocus:j}),{isHovered:x,hoverProps:y}=(0,ap.useHover)({isDisabled:i}),z=d.compare(d.value,h),A=aL({ref:m,id:g,role:"radio","aria-checked":z?"true":"false","aria-labelledby":n,"aria-describedby":p,"aria-disabled":!!i||void 0,tabIndex:i?-1:z||!d.containsCheckedOption&&u?d.tabIndex:-1,onClick:i?void 0:t,autoFocus:j},w,y),B=ax({checked:z,disabled:i,active:v,hover:x,focus:v,autofocus:j}),C=aH();return s.default.createElement(q,{name:"RadioGroup.Description"},s.default.createElement(o,{name:"RadioGroup.Label"},C({ourProps:A,theirProps:k,slot:B,defaultTag:"div",name:"RadioGroup.Option"})))}),Radio:aM(function(a,b){var c,d,e;let f=bn("Radio"),g=bp("Radio"),h=(0,s.useId)(),i=aX(),j=aB(),{id:k=i||`headlessui-radio-${h}`,value:l,disabled:m=f.disabled||j||!1,autoFocus:n=!1,...o}=a,p=(0,s.useRef)(null),q=az(p,b),r=bh(),t=null!=(e=null==(d=(0,s.useContext)(bc))?void 0:d.value)?e:void 0,u=av({value:l,disabled:m});au(()=>g.registerOption({id:k,element:p,propsRef:u}),[k,g,p,u]);let v=aw(a=>{var b;if(a0(a.currentTarget))return a.preventDefault();g.change(l)&&(null==(b=p.current)||b.focus())}),{isFocusVisible:w,focusProps:x}=(0,ao.useFocusRing)({autoFocus:n}),{isHovered:y,hoverProps:z}=(0,ap.useHover)({isDisabled:m}),A=(null==(c=f.firstOption)?void 0:c.id)===k,B=f.compare(f.value,l),C=aL({ref:q,id:k,role:"radio","aria-checked":B?"true":"false","aria-labelledby":r,"aria-describedby":t,"aria-disabled":!!m||void 0,tabIndex:m?-1:B||!f.containsCheckedOption&&A?f.tabIndex:-1,autoFocus:n,onClick:m?void 0:v},x,z),D=ax({checked:B,disabled:m,hover:y,focus:w,autofocus:n});return aH()({ourProps:C,theirProps:o,slot:D,defaultTag:"span",name:"Radio"})}),Label:bj,Description:be});var bs=a.i(927759);function bt({isOpen:a,onClose:b,approvedQuotes:c}){let d=(0,o.useRouter)(),e=(0,q.useToast)(),[f,g]=(0,s.useState)(c.length>0?c[0]._id:null),[h,i]=(0,s.useState)(!1),j=(0,m.useMutation)(n.api.invoices.createFromQuote),k=async()=>{if(!f)return void e.error("No Quote Selected","Please select a quote to generate an invoice from.");i(!0);try{let a=e.loading("Creating Invoice","Converting quote to invoice..."),c=await j({quoteId:f,issuedDate:Date.now(),dueDate:Date.now()+2592e6});e.removeToast(a),e.success("Invoice Created","Quote converted to invoice successfully"),b(),d.push(`/invoices/${c}`)}catch(b){let a=b instanceof Error?b.message:"Failed to create invoice";e.error("Invoice Creation Failed",a)}finally{i(!1)}};return(0,l.jsx)(am.default,{isOpen:a,onClose:b,size:"2xl",animation:"scale",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(ac.Receipt,{className:"h-6 w-6 text-primary"}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Generate Invoice from Quote"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select an approved quote to convert into an invoice. All line items and totals will be copied to the new invoice."})]}),(0,l.jsx)("div",{className:"py-4",children:0===c.length?(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(ac.Receipt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No approved quotes available for this project."}),(0,l.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Please approve a quote first before generating an invoice."})]}):(0,l.jsx)(br,{value:f,onChange:g,children:(0,l.jsx)("div",{className:"space-y-3",children:c.map(a=>(0,l.jsx)(br.Option,{value:a._id,className:({checked:a})=>`relative flex cursor-pointer rounded-lg border-2 px-5 py-4 transition-all ${a?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:({checked:b})=>{let c;return(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border-2 transition-all ${b?"border-primary bg-primary":"border-gray-300 dark:border-gray-600"}`,children:b&&(0,l.jsx)(bs.CheckCircleIcon,{className:"h-5 w-5 text-white"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Quote #",a.quoteNumber||a._id.slice(-6)]}),(0,l.jsx)(w.Badge,{variant:"default",className:"text-xs",children:"Approved"})]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Created on ",new Date(a._creationTime||Date.now()).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}),(0,l.jsx)("div",{className:"text-right",children:(0,l.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a.total?(c=a.total,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c)):"$0"})})]})}},a._id))})})}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,l.jsx)(an.StyledButton,{onClick:b,intent:"outline",disabled:h,showArrow:!1,children:"Cancel"}),(0,l.jsx)(an.StyledButton,{onClick:k,intent:"primary",disabled:!f||h||0===c.length,isLoading:h,showArrow:!1,children:"Create Invoice"})]})]})})}let bu=(0,K.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var bv=a.i(28310),bw=a.i(763544),bx=a.i(352110);let by=["planned","in-progress","completed","cancelled"];function bz(a){return"in-progress"===a?"In Progress":a.charAt(0).toUpperCase()+a.slice(1)}function bA(a){return a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set"}function bB(a){switch(a){case"planned":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":case"sent":case"pending":case"approved":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"completed":case"paid":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}}function bC({project:a,projectId:b,isEditing:c,onEditClick:d,statusValue:e,onStatusChange:f,tasks:g,quotes:h,onTaskSheetOpen:i,onStatusUpdate:j}){let k=(0,o.useRouter)();return(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-lg bg-linear-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 shrink-0 shadow-md",children:(0,l.jsx)(M.FolderOpen,{className:"h-8 w-8 text-white"})}),(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-wrap mb-3",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.title}),c?(0,l.jsxs)(bx.StyledSelect,{value:e,onValueChange:f,children:[(0,l.jsx)(bx.StyledSelectTrigger,{className:"w-auto",children:(0,l.jsx)(bx.SelectValue,{})}),(0,l.jsx)(bx.StyledSelectContent,{children:by.map(a=>(0,l.jsx)(bx.SelectItem,{value:a,children:bz(a)},a))})]}):(0,l.jsx)(bv.ProminentStatusBadge,{status:a.status,size:"large",showIcon:!0,entityType:"project"})]}),!c&&(0,l.jsxs)("button",{onClick:d,className:"inline-flex items-center gap-2 text-sm text-primary hover:text-primary/80 font-medium transition-colors",children:[(0,l.jsx)(bu,{className:"h-4 w-4"}),"Edit Details"]})]}),(0,l.jsx)("div",{className:"flex-1 min-w-0",children:(0,l.jsx)(bw.StatusProgressBar,{status:a.status,steps:[{id:"planned",name:"Planned",order:1},{id:"in-progress",name:"In Progress",order:2},{id:"completed",name:"Completed",order:3}],events:[...a._creationTime?[{type:"planned",timestamp:a._creationTime}]:[],...a.startDate?[{type:"in-progress",timestamp:a.startDate}]:[],...a.completedAt?[{type:"completed",timestamp:a.completedAt}]:[]],failureStatuses:["cancelled"],successStatuses:["completed"],showStatusButton:!0,statusOptions:by.map(a=>({value:a,label:bz(a)})),onStatusChange:a=>j(a),statusButtonLabel:"Change Status"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3",children:[(0,l.jsxs)(B.Popover,{children:[(0,l.jsx)(B.PopoverTrigger,{asChild:!0,children:(0,l.jsxs)("button",{className:"flex flex-col items-center justify-center p-4 rounded-lg border border-gray-300 dark:border-white/20 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),(0,l.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g?.length||0})]}),(0,l.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Tasks"})]})}),(0,l.jsxs)(B.PopoverContent,{className:"w-96 p-0 bg-white dark:bg-gray-900",align:"start",side:"bottom",children:[(0,l.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Tasks"}),(0,l.jsxs)(p.Button,{intent:"outline",size:"sm",onPress:i,children:[(0,l.jsx)(aa.Plus,{className:"h-4 w-4 mr-2"}),"New"]})]})}),(0,l.jsx)("div",{className:"max-h-96 overflow-y-auto",children:g&&g.length>0?(0,l.jsx)("div",{className:"p-2",children:g.map(a=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,l.jsx)("div",{className:`w-2 h-2 rounded-full shrink-0 ${"completed"===a.status?"bg-green-500":"cancelled"===a.status?"bg-red-500":"bg-yellow-500"}`}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:a.title}),a.date&&(0,l.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:bA(a.date)})]})]}),(0,l.jsx)(w.Badge,{className:bB(a.status),variant:"outline",children:a.status})]},a._id))}):(0,l.jsxs)("div",{className:"p-8 text-center",children:[(0,l.jsx)(ab.ClipboardList,{className:"h-12 w-12 text-gray-400 dark:text-gray-600 mx-auto mb-3"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tasks yet"})]})})]})]}),(0,l.jsxs)(B.Popover,{children:[(0,l.jsx)(B.PopoverTrigger,{asChild:!0,children:(0,l.jsxs)("button",{className:"flex flex-col items-center justify-center p-4 rounded-lg border border-gray-300 dark:border-white/20 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z"})}),(0,l.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?.length||0})]}),(0,l.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Quotes"})]})}),(0,l.jsxs)(B.PopoverContent,{className:"w-96 p-0 bg-white dark:bg-gray-900",align:"start",side:"bottom",children:[(0,l.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Quotes"}),(0,l.jsxs)(p.Button,{intent:"outline",size:"sm",onPress:()=>k.push(`/quotes/new?projectId=${b}`),children:[(0,l.jsx)(aa.Plus,{className:"h-4 w-4 mr-2"}),"New"]})]})}),(0,l.jsx)("div",{className:"max-h-96 overflow-y-auto",children:h&&h.length>0?(0,l.jsx)("div",{className:"p-2",children:h.map(a=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg transition-colors cursor-pointer",onClick:()=>k.push(`/quotes/${a._id}`),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 shrink-0"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:["Quote #",a.quoteNumber||a._id.slice(-6)]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:bA(a._creationTime)})]})]}),(0,l.jsxs)("div",{className:"text-right shrink-0",children:[a.total&&(0,l.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:["$",a.total.toLocaleString()]}),(0,l.jsx)(w.Badge,{className:bB(a.status||"draft"),variant:"outline",children:a.status||"draft"})]})]},a._id))}):(0,l.jsxs)("div",{className:"p-8 text-center",children:[(0,l.jsx)(ac.Receipt,{className:"h-12 w-12 text-gray-400 dark:text-gray-600 mx-auto mb-3"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No quotes yet"})]})})]})]})]})]})}function bD(){let a=(0,o.useParams)(),b=(0,o.useRouter)(),c=(0,q.useToast)(),[d,e]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[h,i]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[t,u]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),x=a.projectId,y=(0,m.useQuery)(n.api.projects.get,{id:x}),z=(0,m.useQuery)(n.api.tasks.list,null===y||j?"skip":{projectId:x}),A=(0,m.useQuery)(n.api.quotes.list,null===y||j?"skip":{projectId:x}),B=(0,m.useMutation)(n.api.projects.update),C=(0,m.useMutation)(n.api.projects.remove),D=async a=>{e(!0);try{await B({id:x,...a}),c.success("Project Updated","Your changes have been saved.")}catch(b){let a=b instanceof Error?b.message:"Failed to save changes";c.error("Error",a)}finally{e(!1)}};if(void 0===y)return(0,l.jsx)("div",{className:"w-full px-6",children:(0,l.jsx)("div",{className:"w-full pt-8 pb-24",children:(0,l.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-3"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,l.jsx)("div",{className:"lg:col-span-2 h-64 bg-gray-200 dark:bg-gray-700 rounded"}),(0,l.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]})]})})});if(null===y)return(0,l.jsx)("div",{className:"w-full px-6",children:(0,l.jsxs)("div",{className:"w-full pt-8 pb-24 flex flex-col items-center justify-center h-96 space-y-4",children:[(0,l.jsx)("div",{className:"text-6xl",children:"📋"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Project Not Found"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"The project you're looking for doesn't exist or you don't have permission to view it."}),(0,l.jsx)(p.Button,{onClick:()=>b.push("/projects"),children:"Back to Projects"})]})});let E=async a=>{e(!0);try{await B({id:x,status:a}),c.success("Project Updated",`Project status changed to ${a}`)}catch{c.error("Error","Failed to update project status")}finally{e(!1)}},F=async()=>{i(!0)},G=async()=>{k(!0);try{await C({id:x}),c.success("Project Deleted","Project has been successfully deleted"),i(!1),b.push("/projects")}catch(b){let a=b instanceof Error?b.message:"Failed to delete project";c.error("Error",a),i(!1),k(!1)}},H=A?.filter(a=>"approved"===a.status)||[];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.TaskSheet,{mode:"create",isOpen:f,onOpenChange:g,initialValues:{clientId:y?.clientId,projectId:x}}),(0,l.jsx)(al.default,{isOpen:h,onClose:()=>i(!1),onConfirm:G,title:"Delete Project",itemName:y.title,itemType:"Project",isArchive:!1}),(0,l.jsx)(bt,{isOpen:t,onClose:()=>u(!1),approvedQuotes:H}),(0,l.jsx)("div",{className:"w-full px-6",children:(0,l.jsxs)("div",{className:"w-full pt-8 pb-24",children:[(0,l.jsx)(bC,{project:y,projectId:x,isEditing:v,onEditClick:()=>w(!0),statusValue:y.status,onStatusChange:a=>{E(a)},tasks:z,quotes:A,onTaskSheetOpen:()=>g(!0),onStatusUpdate:E}),(0,l.jsx)(aj,{projectId:x,project:y,onUpdate:D,onDelete:F,onStatusUpdate:E,isUpdating:d,projectTasks:z,projectQuotes:A,approvedQuotesCount:H.length,onTaskSheetOpen:()=>g(!0),onNavigate:a=>b.push(a),onGenerateInvoice:()=>u(!0),isEditing:v,onEditingChange:w}),(0,l.jsx)("div",{className:"mt-8",children:(0,l.jsx)(ak.MentionSection,{entityType:"project",entityId:x,entityName:y.title})})]})})]})}a.s(["default",()=>bD],886716)}];

//# sourceMappingURL=apps_web_src_app_%28workspace%29_projects_%5BprojectId%5D_page_tsx_0fe5f43f._.js.map