module.exports=[988153,a=>{"use strict";var b=a.i(187924),c=a.i(572131);a.i(511241);var d=a.i(296373),e=a.i(130487),f=a.i(700760),g=a.i(928503),h=a.i(968177),i=a.i(452309),j=a.i(770137),k=a.i(757215),l=a.i(994845),m=a.i(547885),n=a.i(346271),o=a.i(262036),p=a.i(941675),q=a.i(641710),r=a.i(546842),s=a.i(394183),t=a.i(915618),u=a.i(167453),v=a.i(65151),w=a.i(587532),x=a.i(170106);let y=(0,x.default)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),z=(0,x.default)("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);var A=a.i(73570),B=a.i(267900),C=a.i(296101),D=a.i(824569),E=a.i(781560);let F={low:{color:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",icon:s.Flag},medium:{color:"bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-300",icon:s.Flag},high:{color:"bg-amber-100 text-amber-700 dark:bg-amber-800 dark:text-amber-300",icon:s.Flag},urgent:{color:"bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-300",icon:A.AlertTriangle}},G={pending:{color:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",label:"Pending"},"in-progress":{color:"bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-300",label:"In Progress"},completed:{color:"bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-300",label:"Completed"},cancelled:{color:"bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-300",label:"Cancelled"}};function H({task:a,onStatusChange:g,onEdit:i,onDelete:j,isUpdating:k}){let[l,m]=(0,c.useState)(!1),s=(0,d.useQuery)(e.api.clients.list,{}),t=(0,d.useQuery)(e.api.projects.list,{}),w=(0,d.useQuery)(e.api.users.listByOrg,{}),x=s?.find(b=>b._id===a.clientId),y=t?.find(b=>b._id===a.projectId),z=w?.find(b=>b._id===a.assigneeUserId),H=new Date(a.date),I=new Date(H.getUTCFullYear(),H.getUTCMonth(),H.getUTCDate()),J=new Date;J.setHours(0,0,0,0);let K=new Date(Date.UTC(J.getFullYear(),J.getMonth(),J.getDate())),L=a.date<K.getTime()&&"completed"!==a.status,M=a.date===K.getTime(),N=F[a.priority||"medium"].icon,O=a=>{if(!a)return null;let[b,c]=a.split(":"),d=parseInt(b);return`${d%12||12}:${c} ${d>=12?"PM":"AM"}`};return(0,b.jsxs)(n.motion.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:(0,f.cn)("group hover:bg-muted/50 transition-colors",L&&"bg-red-50/30 dark:bg-red-900/10","completed"===a.status&&"opacity-60"),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,b.jsx)("td",{className:"w-12 px-4 py-3",children:(0,b.jsx)("button",{onClick:()=>{if(k)return;let b="completed"===a.status?"pending":"completed";g(a._id,b)},disabled:k,className:(0,f.cn)("p-0.5 rounded-full transition-colors","hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",k&&"opacity-50 cursor-not-allowed"),children:"completed"===a.status?(0,b.jsx)(u.CheckCircle2,{className:"h-5 w-5 text-green-600"}):(0,b.jsx)(v.Circle,{className:"h-5 w-5 text-muted-foreground hover:text-foreground"})})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h3",{className:(0,f.cn)("font-medium text-foreground truncate","completed"===a.status&&"line-through text-muted-foreground"),children:a.title}),L&&(0,b.jsx)(A.AlertTriangle,{className:"h-4 w-4 text-red-500 shrink-0"})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:a.description})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(B.Building2,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:x?.companyName||"Unknown"})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:y?(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(C.FolderOpen,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:y.title})]}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center gap-1 text-sm",L?"text-red-600":"text-muted-foreground"),children:[(0,b.jsx)(p.Calendar,{className:"h-3 w-3 shrink-0"}),(0,b.jsx)("span",{children:(a=>{if(M)return"Today";let b=new Date(K);return(b.setUTCDate(b.getUTCDate()+1),a.getTime()===b.getTime())?"Tomorrow":a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:a.getFullYear()!==new Date().getFullYear()?"numeric":void 0})})(I)})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.startTime||a.endTime?(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(q.Clock,{className:"h-3 w-3 shrink-0"}),(0,b.jsxs)("span",{children:[a.startTime&&O(a.startTime),a.startTime&&a.endTime&&" - ",a.endTime&&O(a.endTime)]})]}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:z?(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(r.User,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:z.name||z.email})]}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unassigned"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(h.Badge,{variant:"secondary",className:G[a.status].color,children:G[a.status].label})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)(h.Badge,{variant:"secondary",className:(0,f.cn)("text-xs",F[a.priority||"medium"].color),children:[(0,b.jsx)(N,{className:"h-3 w-3 mr-1"}),a.priority||"medium"]})}),(0,b.jsx)("td",{className:"w-16 px-4 py-3",children:(0,b.jsx)(o.AnimatePresence,{children:(l||k)&&(0,b.jsxs)(n.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>i(a),disabled:k,className:"p-1.5 rounded-md hover:bg-muted text-muted-foreground hover:text-foreground transition-colors",title:"Edit task",children:(0,b.jsx)(D.Edit,{className:"h-3 w-3"})}),(0,b.jsx)("button",{onClick:()=>j(a._id),disabled:k,className:"p-1.5 rounded-md hover:bg-red-100 dark:hover:bg-red-900/20 text-muted-foreground hover:text-red-600 transition-colors",title:"Delete task",children:(0,b.jsx)(E.Trash2,{className:"h-3 w-3"})})]})})})]})}function I(){let[a,f]=(0,c.useState)(""),[h,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)("all"),[u,v]=(0,c.useState)("date"),[x,A]=(0,c.useState)("asc"),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(new Set),F=(0,d.useQuery)(e.api.tasks.list,{}),G=(0,d.useMutation)(e.api.tasks.update),I=(0,d.useMutation)(e.api.tasks.complete),J=(0,d.useMutation)(e.api.tasks.remove),K=void 0===F,L=(0,c.useMemo)(()=>{if(!F)return[];let b=F;if(a.trim()){let c=a.toLowerCase();b=b.filter(a=>a.title.toLowerCase().includes(c)||a.description?.toLowerCase().includes(c))}return"all"!==h&&(b=b.filter(a=>a.status===h)),"all"!==r&&(b=b.filter(a=>(a.priority||"medium")===r)),b.sort((a,b)=>{let c=0;switch(u){case"date":c=a.date-b.date;break;case"priority":let d={urgent:4,high:3,medium:2,low:1},e=d[a.priority||"medium"];c=d[b.priority||"medium"]-e;break;case"status":c=a.status.localeCompare(b.status)}return"desc"===x?-c:c}),b},[F,a,h,r,u,x]),M=async(a,b)=>{E(b=>new Set(b).add(a));try{"completed"===b?(await I({id:a}),console.log("Task marked as completed!")):(await G({id:a,status:b}),console.log("Task status updated!"))}catch(a){console.error("Error updating task:",a)}finally{E(b=>{let c=new Set(b);return c.delete(a),c})}},N=a=>{C(a)},O=async a=>{if(window.confirm("Are you sure you want to delete this task?")){E(b=>new Set(b).add(a));try{await J({id:a}),console.log("Task deleted successfully!")}catch(a){console.error("Error deleting task:",a)}finally{E(b=>{let c=new Set(b);return c.delete(a),c})}}},P=a=>{u===a?A("asc"===x?"desc":"asc"):(v(a),A("asc"))},Q=new Date;Q.setHours(0,0,0,0);let R=Date.UTC(Q.getFullYear(),Q.getMonth(),Q.getDate()),S=F?.length||0,T=F?.filter(a=>"completed"===a.status).length||0,U=F?.filter(a=>a.date<R&&"completed"!==a.status).length||0;return(0,b.jsxs)(n.motion.div,{className:"p-4 sm:p-6 lg:p-8 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"Tasks"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:K?"Loading tasks...":`${S} total • ${T} completed • ${U} overdue`})]}),(0,b.jsx)(j.TaskSheet,{mode:"create",trigger:(0,b.jsx)(k.StyledButton,{label:"New Task",icon:(0,b.jsx)(t.Plus,{className:"h-4 w-4"}),intent:"primary"})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(w.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search tasks...",value:a,onChange:a=>f(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(l.StyledSelect,{value:h,onValueChange:a=>q(a),children:[(0,b.jsx)(l.StyledSelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(m.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(l.StyledSelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(m.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(m.SelectItem,{value:"in-progress",children:"In Progress"}),(0,b.jsx)(m.SelectItem,{value:"completed",children:"Completed"}),(0,b.jsx)(m.SelectItem,{value:"cancelled",children:"Cancelled"})]})]}),(0,b.jsxs)(l.StyledSelect,{value:r,onValueChange:a=>s(a),children:[(0,b.jsx)(l.StyledSelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(m.SelectValue,{placeholder:"All Priority"})}),(0,b.jsxs)(l.StyledSelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"all",children:"All Priority"}),(0,b.jsx)(m.SelectItem,{value:"urgent",children:"Urgent"}),(0,b.jsx)(m.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(m.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(m.SelectItem,{value:"low",children:"Low"})]})]})]})]}),(0,b.jsx)("div",{className:"bg-card rounded-lg border overflow-hidden",children:K?(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i.Skeleton,{className:"h-5 w-5 rounded-full"}),(0,b.jsx)(i.Skeleton,{className:"h-5 flex-1"}),(0,b.jsx)(i.Skeleton,{className:"h-5 w-20"}),(0,b.jsx)(i.Skeleton,{className:"h-5 w-16"}),(0,b.jsx)(i.Skeleton,{className:"h-5 w-24"})]},a))})}):L.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/30",children:(0,b.jsxs)("tr",{className:"text-left",children:[(0,b.jsx)("th",{className:"w-12 px-4 py-3"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Task"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Client"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Project"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:(0,b.jsxs)("button",{onClick:()=>P("date"),className:"flex items-center gap-1 hover:text-foreground",children:["Date","date"===u&&("asc"===x?(0,b.jsx)(y,{className:"h-3 w-3"}):(0,b.jsx)(z,{className:"h-3 w-3"}))]})}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Time"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Assignee"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:(0,b.jsxs)("button",{onClick:()=>P("status"),className:"flex items-center gap-1 hover:text-foreground",children:["Status","status"===u&&("asc"===x?(0,b.jsx)(y,{className:"h-3 w-3"}):(0,b.jsx)(z,{className:"h-3 w-3"}))]})}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:(0,b.jsxs)("button",{onClick:()=>P("priority"),className:"flex items-center gap-1 hover:text-foreground",children:["Priority","priority"===u&&("asc"===x?(0,b.jsx)(y,{className:"h-3 w-3"}):(0,b.jsx)(z,{className:"h-3 w-3"}))]})}),(0,b.jsx)("th",{className:"w-16 px-4 py-3"})]})}),(0,b.jsx)("tbody",{children:(0,b.jsx)(o.AnimatePresence,{children:L.map(a=>(0,b.jsx)(H,{task:a,onStatusChange:M,onEdit:N,onDelete:O,isUpdating:D.has(a._id)},a._id))})})]})}):(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-muted rounded-full",children:(0,b.jsx)(p.Calendar,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"No tasks found"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto",children:a||"all"!==h||"all"!==r?"No tasks match your current filters. Try adjusting your search or filters.":"You haven't created any tasks yet. Create your first task to get started."})]}),!a&&"all"===h&&"all"===r&&(0,b.jsx)(j.TaskSheet,{mode:"create",trigger:(0,b.jsx)(k.StyledButton,{label:"Create Your First Task",icon:(0,b.jsx)(t.Plus,{className:"h-4 w-4"}),intent:"primary"})})]})})}),B&&(0,b.jsx)(j.TaskSheet,{task:B,mode:"edit",onOpenChange:a=>!a&&C(null)})]})}a.s(["default",()=>I],988153)}];

//# sourceMappingURL=apps_web_src_app_%28workspace%29_tasks_page_tsx_1d228f9c._.js.map