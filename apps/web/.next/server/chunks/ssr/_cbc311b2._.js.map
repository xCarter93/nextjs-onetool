{"version":3,"sources":["../../../../../../node_modules/lucide-react/src/icons/file.ts","../../../../../../node_modules/lucide-react/src/icons/paperclip.ts","../../../../../../node_modules/lucide-react/src/icons/send.ts","../../../../../../apps/web/src/components/shared/mention-section.tsx","../../../../../../apps/web/src/components/shared/mention-input.tsx","../../../../../../apps/web/src/components/shared/mention-feed.tsx","../../../../../../node_modules/lucide-react/src/icons/message-square.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z', key: '1rqfz7' }],\n  ['path', { d: 'M14 2v4a2 2 0 0 0 2 2h4', key: 'tnqrlb' }],\n];\n\n/**\n * @component @name File\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMkg2YTIgMiAwIDAgMC0yIDJ2MTZhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjdaIiAvPgogIDxwYXRoIGQ9Ik0xNCAydjRhMiAyIDAgMCAwIDIgMmg0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst File = createLucideIcon('file', __iconNode);\n\nexport default File;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551',\n      key: '1miecu',\n    },\n  ],\n];\n\n/**\n * @component @name Paperclip\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgNi04LjQxNCA4LjU4NmEyIDIgMCAwIDAgMi44MjkgMi44MjlsOC40MTQtOC41ODZhNCA0IDAgMSAwLTUuNjU3LTUuNjU3bC04LjM3OSA4LjU1MWE2IDYgMCAxIDAgOC40ODUgOC40ODVsOC4zNzktOC41NTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/paperclip\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Paperclip = createLucideIcon('paperclip', __iconNode);\n\nexport default Paperclip;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z',\n      key: '1ffxy3',\n    },\n  ],\n  ['path', { d: 'm21.854 2.147-10.94 10.939', key: '12cjpa' }],\n];\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNTM2IDIxLjY4NmEuNS41IDAgMCAwIC45MzctLjAyNGw2LjUtMTlhLjQ5Ni40OTYgMCAwIDAtLjYzNS0uNjM1bC0xOSA2LjVhLjUuNSAwIDAgMC0uMDI0LjkzN2w3LjkzIDMuMThhMiAyIDAgMCAxIDEuMTEyIDEuMTF6IiAvPgogIDxwYXRoIGQ9Im0yMS44NTQgMi4xNDctMTAuOTQgMTAuOTM5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('send', __iconNode);\n\nexport default Send;\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { MentionInput } from \"./mention-input\";\nimport { MentionFeed } from \"./mention-feed\";\nimport {\n\tStyledCard,\n\tStyledCardHeader,\n\tStyledCardTitle,\n\tStyledCardContent,\n} from \"@/components/ui/styled\";\nimport { MessageSquare } from \"lucide-react\";\n\ninterface MentionSectionProps {\n\tentityType: \"client\" | \"project\" | \"quote\";\n\tentityId: string;\n\tentityName: string;\n}\n\nexport function MentionSection({\n\tentityType,\n\tentityId,\n\tentityName,\n}: MentionSectionProps) {\n\tconst [refreshKey, setRefreshKey] = useState(0);\n\n\tconst handleMentionCreated = () => {\n\t\t// Trigger a refresh by updating the key\n\t\tsetRefreshKey((prev) => prev + 1);\n\t};\n\n\treturn (\n\t\t<StyledCard>\n\t\t\t<StyledCardHeader>\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<MessageSquare className=\"h-5 w-5 text-primary\" />\n\t\t\t\t\t<StyledCardTitle className=\"text-lg\">\n\t\t\t\t\t\tTeam Communication\n\t\t\t\t\t</StyledCardTitle>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n\t\t\t\t\tMention team members to notify them about this {entityType}\n\t\t\t\t</p>\n\t\t\t</StyledCardHeader>\n\t\t\t<StyledCardContent className=\"space-y-6\">\n\t\t\t\t{/* Message Input */}\n\t\t\t\t<div className=\"pb-6 border-b border-gray-200 dark:border-gray-700\">\n\t\t\t\t\t<MentionInput\n\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\tentityId={entityId}\n\t\t\t\t\t\tentityName={entityName}\n\t\t\t\t\t\tonMentionCreated={handleMentionCreated}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Message Feed */}\n\t\t\t\t<div key={refreshKey}>\n\t\t\t\t\t<MentionFeed entityType={entityType} entityId={entityId} />\n\t\t\t\t</div>\n\t\t\t</StyledCardContent>\n\t\t</StyledCard>\n\t);\n}\n\n","\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"convex/react\";\nimport { useOrganization } from \"@clerk/nextjs\";\nimport { api } from \"@onetool/backend/convex/_generated/api\";\nimport { StyledButton } from \"@/components/ui/styled/styled-button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Send, Paperclip, X, FileIcon, Loader2 } from \"lucide-react\";\nimport type { Id } from \"@onetool/backend/convex/_generated/dataModel\";\n\ninterface MentionInputProps {\n\tentityType: \"client\" | \"project\" | \"quote\";\n\tentityId: string;\n\tentityName: string;\n\tonMentionCreated?: () => void;\n}\n\ninterface AttachmentFile {\n\ttempId: string;\n\tfile: File;\n\tstorageId?: Id<\"_storage\">;\n\tuploading: boolean;\n\terror?: string;\n}\n\nexport function MentionInput({\n\tentityType,\n\tentityId,\n\tentityName,\n\tonMentionCreated,\n}: MentionInputProps) {\n\tconst [message, setMessage] = useState(\"\");\n\tconst [showUserList, setShowUserList] = useState(false);\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\tconst [mentionedUsers, setMentionedUsers] = useState<\n\t\tArray<{ id: Id<\"users\">; name: string }>\n\t>([]);\n\tconst [attachments, setAttachments] = useState<AttachmentFile[]>([]);\n\tconst [previewUrls, setPreviewUrls] = useState<Map<string, string>>(\n\t\tnew Map()\n\t);\n\tconst contentEditableRef = useRef<HTMLDivElement>(null);\n\tconst fileInputRef = useRef<HTMLInputElement>(null);\n\tconst toast = useToast();\n\n\t// Fetch organization members from Clerk\n\tconst { memberships } = useOrganization({\n\t\tmemberships: {\n\t\t\tinfinite: true,\n\t\t},\n\t});\n\n\t// Also fetch Convex users to map Clerk users to Convex user IDs\n\tconst convexUsers = useQuery(api.users.listByOrg);\n\tconst createMention = useMutation(api.notifications.createMention);\n\tconst syncUserFromClerk = useMutation(api.users.syncUserFromClerk);\n\tconst generateUploadUrl = useMutation(\n\t\tapi.messageAttachments.generateUploadUrl\n\t);\n\n\t// Build a map of organization users with both Clerk and Convex data\n\tconst organizationUsers =\n\t\tmemberships?.data\n\t\t\t?.map((membership) => {\n\t\t\t\tconst clerkUser = membership.publicUserData;\n\t\t\t\tif (!clerkUser || !clerkUser.userId) return null;\n\n\t\t\t\t// Find the corresponding Convex user by email or external ID\n\t\t\t\tconst convexUser = convexUsers?.find(\n\t\t\t\t\t(u) =>\n\t\t\t\t\t\tu.email === clerkUser.identifier ||\n\t\t\t\t\t\tu.externalId === clerkUser.userId\n\t\t\t\t);\n\n\t\t\t\treturn {\n\t\t\t\t\tid: convexUser?._id || clerkUser.userId,\n\t\t\t\t\tname:\n\t\t\t\t\t\tclerkUser.firstName && clerkUser.lastName\n\t\t\t\t\t\t\t? `${clerkUser.firstName} ${clerkUser.lastName}`.trim()\n\t\t\t\t\t\t\t: clerkUser.identifier || \"Unknown User\",\n\t\t\t\t\temail: clerkUser.identifier || \"\",\n\t\t\t\t\timage: clerkUser.imageUrl || \"\",\n\t\t\t\t\tconvexUserId: convexUser?._id,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter((user): user is NonNullable<typeof user> => user !== null) || [];\n\n\t// Manage blob URLs for image previews to prevent memory leaks\n\tuseEffect(() => {\n\t\t// Create preview URLs for new image attachments\n\t\tconst newPreviewUrls = new Map(previewUrls);\n\t\tlet hasChanges = false;\n\n\t\t// Add URLs for new attachments (by tempId)\n\t\tattachments.forEach((attachment) => {\n\t\t\tconst isImage = attachment.file.type.startsWith(\"image/\");\n\t\t\tif (isImage && !newPreviewUrls.has(attachment.tempId)) {\n\t\t\t\tconst url = URL.createObjectURL(attachment.file);\n\t\t\t\tnewPreviewUrls.set(attachment.tempId, url);\n\t\t\t\thasChanges = true;\n\t\t\t}\n\t\t});\n\n\t\t// Remove URLs for deleted attachments and revoke them\n\t\tconst currentTempIds = new Set(attachments.map((a) => a.tempId));\n\t\tArray.from(newPreviewUrls.keys()).forEach((tempId) => {\n\t\t\tif (!currentTempIds.has(tempId)) {\n\t\t\t\tconst url = newPreviewUrls.get(tempId);\n\t\t\t\tif (url) {\n\t\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t\t\tnewPreviewUrls.delete(tempId);\n\t\t\t\t\thasChanges = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (hasChanges) {\n\t\t\tsetPreviewUrls(newPreviewUrls);\n\t\t}\n\n\t\t// Cleanup: revoke all URLs on unmount\n\t\treturn () => {\n\t\t\tnewPreviewUrls.forEach((url) => {\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t});\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [attachments]);\n\n\t// Filter users based on search query\n\tconst filteredUsers = organizationUsers.filter((user) =>\n\t\tuser.name.toLowerCase().includes(searchQuery.toLowerCase())\n\t);\n\n\t// Get text content from contenteditable div\n\tconst getTextContent = (): string => {\n\t\tif (!contentEditableRef.current) return \"\";\n\t\treturn contentEditableRef.current.textContent || \"\";\n\t};\n\n\t// Get cursor position in contenteditable\n\tconst getCursorPosition = (): number => {\n\t\tconst selection = window.getSelection();\n\t\tif (!selection || selection.rangeCount === 0) return 0;\n\n\t\tconst range = selection.getRangeAt(0);\n\t\tconst preCaretRange = range.cloneRange();\n\t\tpreCaretRange.selectNodeContents(contentEditableRef.current!);\n\t\tpreCaretRange.setEnd(range.endContainer, range.endOffset);\n\n\t\treturn preCaretRange.toString().length;\n\t};\n\n\t// Handle input change\n\tconst handleInput = () => {\n\t\tconst text = getTextContent();\n\t\tsetMessage(text);\n\n\t\tconst cursorPos = getCursorPosition();\n\t\tconst textBeforeCursor = text.slice(0, cursorPos);\n\t\tconst lastAtIndex = textBeforeCursor.lastIndexOf(\"@\");\n\n\t\t// Check if we should show user list\n\t\tif (lastAtIndex !== -1) {\n\t\t\tconst searchText = textBeforeCursor.slice(lastAtIndex + 1);\n\t\t\t// Check if this @ is not part of an existing mention (not inside @[...])\n\t\t\tconst lastMentionStart = textBeforeCursor.lastIndexOf(\"@[\");\n\t\t\tconst lastMentionEnd = textBeforeCursor.lastIndexOf(\"]\");\n\n\t\t\t// Only show if @ is not inside a completed mention and search text has no spaces/brackets\n\t\t\tif (\n\t\t\t\t(lastMentionStart === -1 || lastMentionEnd > lastMentionStart) &&\n\t\t\t\t!searchText.includes(\" \") &&\n\t\t\t\t!searchText.includes(\"[\") &&\n\t\t\t\t!searchText.includes(\"]\")\n\t\t\t) {\n\t\t\t\tsetSearchQuery(searchText);\n\t\t\t\tsetShowUserList(true);\n\t\t\t} else {\n\t\t\t\tsetShowUserList(false);\n\t\t\t}\n\t\t} else {\n\t\t\tsetShowUserList(false);\n\t\t}\n\t};\n\n\t// Handle user selection from dropdown\n\tconst handleUserSelect = (\n\t\tuserId: string,\n\t\tuserName: string,\n\t\tconvexUserId?: Id<\"users\">\n\t) => {\n\t\tconst text = getTextContent();\n\t\tconst cursorPos = getCursorPosition();\n\t\tconst textBeforeCursor = text.slice(0, cursorPos);\n\t\tconst lastAtIndex = textBeforeCursor.lastIndexOf(\"@\");\n\n\t\tif (lastAtIndex !== -1 && contentEditableRef.current) {\n\t\t\t// Replace @search with @[userName] (special format to track mentions)\n\t\t\tconst beforeAt = text.slice(0, lastAtIndex);\n\t\t\tconst afterCursor = text.slice(cursorPos);\n\t\t\tconst newMessage = `${beforeAt}@[${userName}]${afterCursor}`;\n\n\t\t\t// Store the mentioned user\n\t\t\tconst finalUserId = convexUserId || (userId as Id<\"users\">);\n\t\t\tsetMentionedUsers((prev) => [\n\t\t\t\t...prev,\n\t\t\t\t{ id: finalUserId, name: userName },\n\t\t\t]);\n\n\t\t\t// Update the contenteditable\n\t\t\tcontentEditableRef.current.textContent = newMessage;\n\t\t\tsetMessage(newMessage);\n\t\t\tsetShowUserList(false);\n\n\t\t\t// Set cursor after the mention\n\t\t\tconst newCursorPos = lastAtIndex + userName.length + 3; // +3 for @[]\n\t\t\tconst selection = window.getSelection();\n\t\t\tconst range = document.createRange();\n\n\t\t\t// Find text node and set cursor position\n\t\t\tconst textNode = contentEditableRef.current.firstChild;\n\t\t\tif (textNode && textNode.nodeType === Node.TEXT_NODE) {\n\t\t\t\trange.setStart(\n\t\t\t\t\ttextNode,\n\t\t\t\t\tMath.min(newCursorPos, textNode.textContent?.length || 0)\n\t\t\t\t);\n\t\t\t\trange.collapse(true);\n\t\t\t\tselection?.removeAllRanges();\n\t\t\t\tselection?.addRange(range);\n\t\t\t}\n\n\t\t\t// Focus back\n\t\t\tcontentEditableRef.current.focus();\n\t\t}\n\t};\n\n\t// Handle file selection\n\tconst handleFileSelect = async (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tconst files = event.target.files;\n\t\tif (!files || files.length === 0) return;\n\n\t\t// Validate files first and create attachment objects with stable tempIds\n\t\tconst validatedAttachments: AttachmentFile[] = Array.from(files)\n\t\t\t.map((file) => {\n\t\t\t\t// Generate a unique stable identifier\n\t\t\t\tconst tempId = crypto.randomUUID();\n\n\t\t\t\t// Validate file size (10MB limit)\n\t\t\t\tif (file.size > 10 * 1024 * 1024) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttempId,\n\t\t\t\t\t\tfile,\n\t\t\t\t\t\tuploading: false,\n\t\t\t\t\t\terror: \"File size exceeds 10MB limit\",\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttempId,\n\t\t\t\t\tfile,\n\t\t\t\t\tuploading: false,\n\t\t\t\t\terror: undefined,\n\t\t\t\t};\n\t\t\t})\n\t\t\t// Filter out files with errors before adding to state\n\t\t\t.filter((attachment) => !attachment.error);\n\n\t\t// Add validated attachments to state using functional setter\n\t\tsetAttachments((prev) => [...prev, ...validatedAttachments]);\n\n\t\t// Start uploading files - capture tempId for each attachment\n\t\tfor (const attachment of validatedAttachments) {\n\t\t\tconst { tempId } = attachment;\n\n\t\t\t// Mark as uploading using tempId\n\t\t\tsetAttachments((prev) =>\n\t\t\t\tprev.map((a) => (a.tempId === tempId ? { ...a, uploading: true } : a))\n\t\t\t);\n\n\t\t\ttry {\n\t\t\t\t// Get upload URL\n\t\t\t\tconst uploadUrl = await generateUploadUrl();\n\n\t\t\t\t// Upload file\n\t\t\t\tconst result = await fetch(uploadUrl, {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: { \"Content-Type\": attachment.file.type },\n\t\t\t\t\tbody: attachment.file,\n\t\t\t\t});\n\n\t\t\t\tif (!result.ok) {\n\t\t\t\t\tthrow new Error(\"Upload failed\");\n\t\t\t\t}\n\n\t\t\t\tconst { storageId } = await result.json();\n\n\t\t\t\t// Update attachment with storage ID using tempId\n\t\t\t\tsetAttachments((prev) =>\n\t\t\t\t\tprev.map((a) =>\n\t\t\t\t\t\ta.tempId === tempId\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...a,\n\t\t\t\t\t\t\t\t\tuploading: false,\n\t\t\t\t\t\t\t\t\tstorageId: storageId as Id<\"_storage\">,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: a\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"File upload error:\", error);\n\t\t\t\t// Update error state using tempId\n\t\t\t\tsetAttachments((prev) =>\n\t\t\t\t\tprev.map((a) =>\n\t\t\t\t\t\ta.tempId === tempId\n\t\t\t\t\t\t\t? { ...a, uploading: false, error: \"Upload failed\" }\n\t\t\t\t\t\t\t: a\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Clear input\n\t\tif (fileInputRef.current) {\n\t\t\tfileInputRef.current.value = \"\";\n\t\t}\n\t};\n\n\t// Remove attachment\n\tconst handleRemoveAttachment = (tempId: string) => {\n\t\tsetAttachments((prev) => prev.filter((a) => a.tempId !== tempId));\n\t};\n\n\t// Format file size\n\tconst formatFileSize = (bytes: number): string => {\n\t\tif (bytes === 0) return \"0 Bytes\";\n\t\tconst k = 1024;\n\t\tconst sizes = [\"Bytes\", \"KB\", \"MB\"];\n\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\t\treturn Math.round((bytes / Math.pow(k, i)) * 100) / 100 + \" \" + sizes[i];\n\t};\n\n\t// Handle form submission\n\tconst handleSubmit = async () => {\n\t\tif (!message.trim()) {\n\t\t\ttoast.error(\"Error\", \"Please enter a message\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if any attachments are still uploading\n\t\tif (attachments.some((a) => a.uploading)) {\n\t\t\ttoast.error(\"Error\", \"Please wait for files to finish uploading\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if any attachments have errors\n\t\tif (attachments.some((a) => a.error)) {\n\t\t\ttoast.error(\"Error\", \"Please remove files with errors\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// Prepare attachment data\n\t\t\tconst attachmentData = attachments\n\t\t\t\t.filter((a) => a.storageId)\n\t\t\t\t.map((a) => ({\n\t\t\t\t\tstorageId: a.storageId!,\n\t\t\t\t\tfileName: a.file.name,\n\t\t\t\t\tfileSize: a.file.size,\n\t\t\t\t\tmimeType: a.file.type,\n\t\t\t\t}));\n\n\t\t\t// Process mentioned users if there are any\n\t\t\tif (mentionedUsers.length === 0) {\n\t\t\t\t// No mentions - show helpful message\n\t\t\t\ttoast.error(\n\t\t\t\t\t\"No recipients\",\n\t\t\t\t\t\"Please @mention a team member to notify them about this message\"\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Process each mentioned user\n\t\t\tfor (const mentionedUser of mentionedUsers) {\n\t\t\t\t// Find the user in our organization list\n\t\t\t\tconst user = organizationUsers.find(\n\t\t\t\t\t(u) =>\n\t\t\t\t\t\tu.convexUserId === mentionedUser.id || u.id === mentionedUser.id\n\t\t\t\t);\n\n\t\t\t\tif (!user) {\n\t\t\t\t\tcontinue; // Skip if user not found\n\t\t\t\t}\n\n\t\t\t\t// If user doesn't have a Convex ID yet, sync them from Clerk first\n\t\t\t\tlet convexUserId = user.convexUserId;\n\n\t\t\t\tif (!convexUserId) {\n\t\t\t\t\t// Sync the user from Clerk to Convex\n\t\t\t\t\tconvexUserId = await syncUserFromClerk({\n\t\t\t\t\t\tclerkUserId: user.id,\n\t\t\t\t\t\tname: user.name,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timageUrl: user.image,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Create the mention with the Convex user ID and attachments\n\t\t\t\tawait createMention({\n\t\t\t\t\ttaggedUserId: convexUserId,\n\t\t\t\t\tmessage: message, // Message is stored with @[username] format\n\t\t\t\t\tentityType,\n\t\t\t\t\tentityId,\n\t\t\t\t\tentityName,\n\t\t\t\t\tattachments: attachmentData.length > 0 ? attachmentData : undefined,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Clear form\n\t\t\tif (contentEditableRef.current) {\n\t\t\t\tcontentEditableRef.current.textContent = \"\";\n\t\t\t}\n\t\t\tsetMessage(\"\");\n\t\t\tsetMentionedUsers([]);\n\n\t\t\t// Revoke all preview URLs before clearing attachments\n\t\t\tpreviewUrls.forEach((url) => {\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t});\n\t\t\tsetPreviewUrls(new Map());\n\t\t\tsetAttachments([]);\n\n\t\t\ttoast.success(\"Success\", \"Message sent!\");\n\n\t\t\t// Notify parent\n\t\t\tonMentionCreated?.();\n\t\t} catch (error) {\n\t\t\tconst errorMessage =\n\t\t\t\terror instanceof Error ? error.message : \"Failed to send message\";\n\t\t\ttoast.error(\"Error\", errorMessage);\n\t\t}\n\t};\n\n\t// Get initials for avatar fallback\n\tconst getInitials = (name: string) => {\n\t\tconst names = name.split(\" \");\n\t\tif (names.length >= 2) {\n\t\t\treturn `${names[0][0]}${names[1][0]}`.toUpperCase();\n\t\t}\n\t\treturn name.slice(0, 2).toUpperCase();\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-3\">\n\t\t\t<Popover\n\t\t\t\topen={showUserList && filteredUsers.length > 0}\n\t\t\t\tonOpenChange={(open) => {\n\t\t\t\t\tif (!open) setShowUserList(false);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t{/* Plain contenteditable - shows @[username] format */}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={contentEditableRef}\n\t\t\t\t\t\t\tcontentEditable\n\t\t\t\t\t\t\tonInput={handleInput}\n\t\t\t\t\t\t\tclassName=\"min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 overflow-auto whitespace-pre-wrap break-words empty:before:content-[attr(data-placeholder)] empty:before:text-muted-foreground\"\n\t\t\t\t\t\t\tstyle={{ minHeight: \"100px\" }}\n\t\t\t\t\t\t\tsuppressContentEditableWarning\n\t\t\t\t\t\t\tdata-placeholder=\"Type @ to mention a team member...\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</PopoverTrigger>\n\t\t\t\t<PopoverContent\n\t\t\t\t\talign=\"start\"\n\t\t\t\t\tside=\"bottom\"\n\t\t\t\t\tclassName=\"w-80 p-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700\"\n\t\t\t\t\tonOpenAutoFocus={(e) => e.preventDefault()}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"max-h-64 overflow-y-auto\">\n\t\t\t\t\t\t{filteredUsers.map((user) => (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={user.id}\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\thandleUserSelect(user.id, user.name, user.convexUserId)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName=\"w-full flex items-center gap-3 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md transition-colors text-left\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Avatar className=\"h-8 w-8\">\n\t\t\t\t\t\t\t\t\t<AvatarImage src={user.image} alt={user.name} />\n\t\t\t\t\t\t\t\t\t<AvatarFallback className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t{getInitials(user.name)}\n\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n\t\t\t\t\t\t\t\t\t\t{user.name}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">\n\t\t\t\t\t\t\t\t\t\t{user.email}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</PopoverContent>\n\t\t\t</Popover>\n\n\t\t\t{/* File Attachments Preview */}\n\t\t\t{attachments.length > 0 && (\n\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t{attachments.map((attachment) => {\n\t\t\t\t\t\tconst isImage = attachment.file.type.startsWith(\"image/\");\n\t\t\t\t\t\tconst isPdf = attachment.file.type === \"application/pdf\";\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={attachment.tempId}\n\t\t\t\t\t\t\t\tclassName=\"relative inline-block group\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{isImage ? (\n\t\t\t\t\t\t\t\t\t// Image preview thumbnail\n\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"h-20 w-20 bg-gray-100 dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700 overflow-hidden flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t{attachment.uploading ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-6 w-6 text-gray-400 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line @next/next/no-img-element\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={previewUrls.get(attachment.tempId) || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={attachment.file.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-full w-full object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{!attachment.uploading && !attachment.error && (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleRemoveAttachment(attachment.tempId)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute -top-2 -right-2 p-1 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Remove\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{attachment.error && (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-red-500/90 rounded-lg flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-white font-medium px-2 text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tError\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t// Document badge\n\t\t\t\t\t\t\t\t\t<div className=\"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-gray-100 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 transition-colors max-w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t<FileIcon\n\t\t\t\t\t\t\t\t\t\t\tclassName={`h-3.5 w-3.5 shrink-0 ${\n\t\t\t\t\t\t\t\t\t\t\t\tisPdf ? \"text-red-500\" : \"text-gray-500\"\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-gray-700 dark:text-gray-300 truncate block\">\n\t\t\t\t\t\t\t\t\t\t\t\t{attachment.file.name}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatFileSize(attachment.file.size)}\n\t\t\t\t\t\t\t\t\t\t\t\t{attachment.uploading && \" • Uploading...\"}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{attachment.uploading ? (\n\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-3 w-3 text-gray-400 animate-spin shrink-0\" />\n\t\t\t\t\t\t\t\t\t\t) : attachment.error ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-red-500 shrink-0\">✕</span>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleRemoveAttachment(attachment.tempId)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"p-0.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors shrink-0\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Remove\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3 text-gray-500\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<div className=\"text-xs text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t{mentionedUsers.length > 0 ? (\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tMentioning:{\" \"}\n\t\t\t\t\t\t\t<strong>{mentionedUsers.map((u) => u.name).join(\", \")}</strong>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span>Type @ to mention someone</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t{/* Hidden file input */}\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={fileInputRef}\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tmultiple\n\t\t\t\t\t\tclassName=\"hidden\"\n\t\t\t\t\t\tonChange={handleFileSelect}\n\t\t\t\t\t\taccept=\"image/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,.zip\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* Attach file button */}\n\t\t\t\t\t<StyledButton\n\t\t\t\t\t\tonClick={() => fileInputRef.current?.click()}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tintent=\"outline\"\n\t\t\t\t\t\ticon={<Paperclip className=\"h-4 w-4\" />}\n\t\t\t\t\t\tshowArrow={false}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<StyledButton\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t!message.trim() || attachments.some((a) => a.uploading || a.error)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tintent=\"primary\"\n\t\t\t\t\t\ticon={<Send className=\"h-4 w-4\" />}\n\t\t\t\t\t\tlabel=\"Send\"\n\t\t\t\t\t\tshowArrow={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport { useQuery } from \"convex/react\";\nimport { api } from \"@onetool/backend/convex/_generated/api\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n\tformatRelativeTime,\n\tparseMessageParts,\n} from \"@/lib/notification-utils\";\nimport { MessageSquare, Download, FileIcon } from \"lucide-react\";\nimport type { Id, Doc } from \"@onetool/backend/convex/_generated/dataModel\";\nimport Image from \"next/image\";\n\ninterface MentionFeedProps {\n\tentityType: \"client\" | \"project\" | \"quote\";\n\tentityId: string;\n}\n\n// Component to display attachments\nfunction AttachmentItem({\n\tnotificationId,\n}: {\n\tnotificationId: Id<\"notifications\">;\n}) {\n\t// Fetch attachments with download URLs in bulk to avoid N+1 query problem\n\tconst attachments = useQuery(\n\t\tapi.messageAttachments.listByNotificationWithUrls,\n\t\t{\n\t\t\tnotificationId,\n\t\t}\n\t);\n\n\tif (!attachments || attachments.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst formatFileSize = (bytes: number): string => {\n\t\tif (bytes === 0) return \"0 Bytes\";\n\t\tconst k = 1024;\n\t\tconst sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n\t\tconst i = Math.min(\n\t\t\tMath.floor(Math.log(bytes) / Math.log(k)),\n\t\t\tsizes.length - 1\n\t\t);\n\t\treturn Math.round((bytes / Math.pow(k, i)) * 100) / 100 + \" \" + sizes[i];\n\t};\n\n\tconst isImage = (mimeType: string) => mimeType.startsWith(\"image/\");\n\n\treturn (\n\t\t<div className=\"mt-2 flex flex-wrap gap-2\">\n\t\t\t{attachments.map((attachment) => {\n\t\t\t\t// Pass download URL as prop to avoid per-attachment query\n\t\t\t\treturn (\n\t\t\t\t\t<AttachmentDownloadLink\n\t\t\t\t\t\tkey={attachment._id}\n\t\t\t\t\t\tattachment={attachment}\n\t\t\t\t\t\tdownloadUrl={attachment.downloadUrl}\n\t\t\t\t\t\tformatFileSize={formatFileSize}\n\t\t\t\t\t\tisImage={isImage}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n}\n\n// Component to handle individual attachment download\nfunction AttachmentDownloadLink({\n\tattachment,\n\tdownloadUrl,\n\tformatFileSize,\n\tisImage,\n}: {\n\tattachment: Doc<\"messageAttachments\"> & { downloadUrl: string | null };\n\tdownloadUrl: string | null;\n\tformatFileSize: (bytes: number) => string;\n\tisImage: (mimeType: string) => boolean;\n}) {\n\tif (!downloadUrl) {\n\t\treturn null;\n\t}\n\n\tconst isPdf = attachment.mimeType === \"application/pdf\";\n\n\t// For images, show a thumbnail preview\n\tif (isImage(attachment.mimeType)) {\n\t\treturn (\n\t\t\t<a\n\t\t\t\thref={downloadUrl}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\tclassName=\"group relative inline-block\"\n\t\t\t\ttitle={`${attachment.fileName} (${formatFileSize(attachment.fileSize)})`}\n\t\t\t>\n\t\t\t\t<Image\n\t\t\t\t\tsrc={downloadUrl}\n\t\t\t\t\talt={attachment.fileName}\n\t\t\t\t\twidth={80}\n\t\t\t\t\theight={80}\n\t\t\t\t\tclassName=\"h-20 w-20 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500 transition-colors\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 rounded-lg transition-colors flex items-center justify-center\">\n\t\t\t\t\t<Download className=\"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-lg\" />\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t);\n\t}\n\n\t// For other files, show compact inline badge\n\treturn (\n\t\t<a\n\t\t\thref={downloadUrl}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noopener noreferrer\"\n\t\t\tdownload={attachment.fileName}\n\t\t\tclassName=\"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md border border-gray-200 dark:border-gray-700 transition-colors group max-w-[200px]\"\n\t\t\ttitle={`${attachment.fileName} (${formatFileSize(attachment.fileSize)})`}\n\t\t>\n\t\t\t{isPdf ? (\n\t\t\t\t<FileIcon className=\"h-3.5 w-3.5 text-red-500 shrink-0\" />\n\t\t\t) : (\n\t\t\t\t<FileIcon className=\"h-3.5 w-3.5 text-gray-500 shrink-0\" />\n\t\t\t)}\n\t\t\t<span className=\"text-xs font-medium text-gray-700 dark:text-gray-300 truncate\">\n\t\t\t\t{attachment.fileName}\n\t\t\t</span>\n\t\t\t<Download className=\"h-3 w-3 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 shrink-0 ml-auto\" />\n\t\t</a>\n\t);\n}\n\nexport function MentionFeed({ entityType, entityId }: MentionFeedProps) {\n\tconst mentions = useQuery(api.notifications.listByEntity, {\n\t\tentityType,\n\t\tentityId,\n\t});\n\n\t// Get initials for avatar fallback\n\tconst getInitials = (name: string) => {\n\t\tconst names = name.split(\" \");\n\t\tif (names.length >= 2) {\n\t\t\treturn `${names[0][0]}${names[1][0]}`.toUpperCase();\n\t\t}\n\t\treturn name.slice(0, 2).toUpperCase();\n\t};\n\n\t// Loading state\n\tif (mentions === undefined) {\n\t\treturn (\n\t\t\t<div className=\"space-y-4 animate-pulse\">\n\t\t\t\t{[1, 2, 3].map((i) => (\n\t\t\t\t\t<div key={i} className=\"flex gap-3\">\n\t\t\t\t\t\t<div className=\"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700\" />\n\t\t\t\t\t\t<div className=\"flex-1 space-y-2\">\n\t\t\t\t\t\t\t<div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4\" />\n\t\t\t\t\t\t\t<div className=\"h-16 bg-gray-200 dark:bg-gray-700 rounded\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Empty state\n\tif (mentions.length === 0) {\n\t\treturn (\n\t\t\t<div className=\"flex flex-col items-center justify-center py-12 text-center\">\n\t\t\t\t<div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4\">\n\t\t\t\t\t<MessageSquare className=\"h-8 w-8 text-gray-400 dark:text-gray-600\" />\n\t\t\t\t</div>\n\t\t\t\t<h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n\t\t\t\t\tNo messages yet\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"text-sm text-gray-600 dark:text-gray-400 max-w-sm\">\n\t\t\t\t\tStart a conversation by mentioning a team member with @ in the input\n\t\t\t\t\tabove.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{mentions.map((mention) => (\n\t\t\t\t<div key={mention._id} className=\"flex gap-3\">\n\t\t\t\t\t{/* Avatar - showing the author (person who sent the message) */}\n\t\t\t\t\t<Avatar className=\"h-10 w-10 shrink-0\">\n\t\t\t\t\t\t<AvatarImage\n\t\t\t\t\t\t\tsrc={mention.author?.image}\n\t\t\t\t\t\t\talt={mention.author?.name || mention.author?.email || \"User\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<AvatarFallback className=\"text-sm\">\n\t\t\t\t\t\t\t{mention.author?.name\n\t\t\t\t\t\t\t\t? getInitials(mention.author.name)\n\t\t\t\t\t\t\t\t: mention.author?.email\n\t\t\t\t\t\t\t\t\t? mention.author.email.substring(0, 2).toUpperCase()\n\t\t\t\t\t\t\t\t\t: \"??\"}\n\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t</Avatar>\n\n\t\t\t\t\t{/* Message content */}\n\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 mb-1\">\n\t\t\t\t\t\t\t<span className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n\t\t\t\t\t\t\t\t{mention.author?.name ||\n\t\t\t\t\t\t\t\t\tmention.author?.email ||\n\t\t\t\t\t\t\t\t\t\"Unknown User\"}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"text-xs text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t{formatRelativeTime(mention._creationTime)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Message text with styled mentions */}\n\t\t\t\t\t\t<div className=\"bg-gray-50 dark:bg-gray-800/50 rounded-lg px-4 py-3 border border-gray-200 dark:border-gray-700\">\n\t\t\t\t\t\t\t<div className=\"text-sm text-gray-900 dark:text-white whitespace-pre-wrap break-words\">\n\t\t\t\t\t\t\t\t{parseMessageParts(mention.message).map((part, index) =>\n\t\t\t\t\t\t\t\t\tpart.isMention ? (\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex mx-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/50 font-medium\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{part.text}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<span key={index}>{part.text}</span>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Attachments - rendered outside the message bubble */}\n\t\t\t\t\t\t{mention.hasAttachments && (\n\t\t\t\t\t\t\t<AttachmentItem notificationId={mention._id} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z',\n      key: '18887p',\n    },\n  ],\n];\n\n/**\n * @component @name MessageSquare\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTdhMiAyIDAgMCAxLTIgMkg2LjgyOGEyIDIgMCAwIDAtMS40MTQuNTg2bC0yLjIwMiAyLjIwMkEuNzEuNzEgMCAwIDEgMiAyMS4yODZWNWEyIDIgMCAwIDEgMi0yaDE2YTIgMiAwIDAgMSAyIDJ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/message-square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageSquare = createLucideIcon('message-square', __iconNode);\n\nexport default MessageSquare;\n"],"names":[],"mappings":"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A,CDAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADCH,CCDG,CAAA,CAAA,ADCH,ACAA,CDAK,ACAL,ADAA,ACDG,CDCE,ACAA,AADF,CACE,ADAA,ACDF,CACE,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,wFCNX,EAAA,EAAA,CAAA,CAAA,QCCA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAKA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EA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","ignoreList":[0,1,2,6]}