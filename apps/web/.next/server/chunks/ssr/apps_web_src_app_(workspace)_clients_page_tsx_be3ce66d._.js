module.exports=[607573,a=>{"use strict";var b=a.i(187924),c=a.i(572131);a.i(511241);var d=a.i(296373),e=a.i(130487),f=a.i(928503),g=a.i(539524),h=a.i(592552),i=a.i(948217),j=a.i(968177),k=a.i(183104),l=a.i(478788),m=a.i(452308),n=a.i(613749),o=a.i(50522),p=a.i(660246),q=a.i(452495),r=a.i(915618),s=a.i(781560),t=a.i(170106);let u=(0,t.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),v=(0,t.default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var w=a.i(773320),x=a.i(741616),y=a.i(957064),z=a.i(50944),A=a.i(629353),B=a.i(564361),C=a.i(757215);a.i(501786);var D=a.i(58812),E=a.i(145432),F=a.i(224);function G({isOpen:f,onOpenChange:g,onComplete:h}){let i=(0,A.useToast)(),j=(0,d.useMutation)(e.api.clients.bulkCreate),k=(0,d.useMutation)(e.api.projects.bulkCreate),[l,m]=(0,c.useState)({file:null,fileContent:null,entityType:"clients",isAnalyzing:!1,analysisResult:null,mappings:[],isImporting:!1,importResult:null}),[n,o]=(0,c.useState)(null),p=async(a,b)=>{m(c=>({...c,file:a,fileContent:b,isAnalyzing:!0,analysisResult:null,mappings:[]}));try{let a=await fetch("/api/analyze-csv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csvContent:b,entityType:l.entityType})});if(!a.ok)throw Error("Failed to analyze CSV");let c=await a.json();m(a=>({...a,isAnalyzing:!1,analysisResult:c,mappings:c.detectedFields}))}catch(a){console.error("Error analyzing CSV:",a),i.error("Analysis Failed",a instanceof Error?a.message:"Failed to analyze CSV file"),m(a=>({...a,isAnalyzing:!1}))}},q=async()=>{if(l.fileContent&&l.analysisResult){m(a=>({...a,isImporting:!0})),o(null);try{let b=(await a.A(286674)).default.parse(l.fileContent,{header:!0,skipEmptyLines:!0,dynamicTyping:!0}).data.map(a=>{let b={};return(l.mappings||[]).forEach(c=>{let d=a[c.csvColumn],e=((a,b)=>{if(null!=a&&""!==a)switch(b){case"number":let c=parseFloat(String(a));return isNaN(c)?void 0:c;case"boolean":if("boolean"==typeof a)return a;let d=String(a).toLowerCase().trim();return"true"===d||"yes"===d||"1"===d;case"date":let e=new Date(String(a));return isNaN(e.getTime())?void 0:e.toISOString();case"array":if(Array.isArray(a))return a;let f=String(a).trim();if(!f)return;let g=f.includes(";")?";":f.includes(",")?",":f.includes("|")?"|":",";return f.split(g).map(a=>a.trim()).filter(a=>a.length>0);default:return a}})(d,c.dataType);void 0!==e&&(b[c.schemaField]=e)}),b}),c=0,d=0;if("clients"===l.entityType)try{await j({clients:b}),c=b.length}catch(a){throw d=b.length,a}else if("projects"===l.entityType)try{await k({projects:b}),c=b.length}catch(a){throw d=b.length,a}m(a=>({...a,isImporting:!1,importResult:{successCount:c,failureCount:d,items:b.map((a,b)=>({success:b<c,rowIndex:b}))}})),0===d?i.success("Import Complete",`Successfully imported ${c} ${l.entityType}`):c>0&&i.warning("Import Partially Complete",`Imported ${c} ${l.entityType}, ${d} failed`)}catch(a){console.error("Error importing data:",a),i.error("Import Failed",a instanceof Error?a.message:"Failed to import data"),m(a=>({...a,isImporting:!1}))}}},r=()=>{m({file:null,fileContent:null,entityType:"clients",isAnalyzing:!1,analysisResult:null,mappings:[],isImporting:!1,importResult:null}),o(null),g(!1)};return(0,b.jsx)(E.Sheet,{open:f,onOpenChange:g,children:(0,b.jsx)(E.SheetContent,{side:"right",className:"w-full sm:max-w-5xl bg-background!",children:(0,b.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,b.jsxs)(E.SheetHeader,{className:"border-b border-border pb-4 shrink-0",children:[(0,b.jsx)(E.SheetTitle,{className:"flex items-center gap-2 text-2xl font-semibold",children:"Import Data"}),(0,b.jsx)(E.SheetDescription,{className:"text-muted-foreground",children:"Import your existing clients or projects from a CSV file. Our AI will help map your data to the correct fields."})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto pt-6 px-6",children:(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(F.CsvImportStep,{entityType:l.entityType,onEntityTypeChange:a=>m(b=>({...b,entityType:a,analysisResult:null,mappings:[]})),isAnalyzing:l.isAnalyzing,onFileSelect:p,analysisResult:l.analysisResult,mappings:l.mappings||[],onMappingChange:(a,b)=>{m(c=>({...c,mappings:(c.mappings||[]).map(c=>c.csvColumn===a?{...c,schemaField:b}:c)}))},importResult:l.importResult??null,error:n,showTitle:!1,disabledEntityTypes:["projects"]})})}),(0,b.jsxs)(E.SheetFooter,{className:"flex flex-row justify-end gap-3 border-t border-border shrink-0",children:[(0,b.jsx)(C.StyledButton,{type:"button",intent:"outline",onClick:r,label:"Close",showArrow:!1}),l.analysisResult&&!l.importResult&&(0,b.jsx)(C.StyledButton,{type:"button",intent:"primary",onClick:q,isLoading:l.isImporting,disabled:!l.analysisResult?.validation.isValid,label:l.isImporting?"Importing...":"Import Data",icon:!l.isImporting&&(0,b.jsx)(w.Upload,{className:"w-4 h-4"}),showArrow:!1}),(l.importResult||!l.file)&&(0,b.jsx)(C.StyledButton,{type:"button",intent:"primary",onClick:()=>{r(),h?.()},label:"Done",showArrow:!1})]})]})})})}var H=a.i(200994),I=a.i(477430),J=a.i(272266),K=a.i(892984),L=a.i(700760);let M=[{id:"lead",name:"Leads",description:"Potential new clients"},{id:"prospect",name:"Prospects",description:"Actively evaluating"},{id:"active",name:"Active",description:"Current clients"},{id:"inactive",name:"Inactive",description:"Paused or dormant"}];function N(){let a,t,E=(0,z.useRouter)(),F=(0,A.useToast)(),[N,O]=(0,c.useState)("table"),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)("active"),[X,Y]=(0,c.useState)([]),{canPerform:Z,reason:$,currentUsage:_,limit:aa}=(0,H.useCanPerformAction)("create_client"),{hasPremiumAccess:ab}=(0,H.useFeatureAccess)(),ac=()=>{Z?E.push("/clients/new"):F.error("Upgrade Required",$||"You've reached your client limit")},ad=(0,d.useMutation)(e.api.clients.archive),ae=(0,d.useMutation)(e.api.clients.restore),af=(0,d.useMutation)(e.api.clients.update),ag=(0,d.useQuery)(e.api.clients.listWithProjectCounts,{}),ah=(0,d.useQuery)(e.api.clients.listWithProjectCounts,{status:"archived",includeArchived:!0}),ai=(0,d.useQuery)(e.api.clients.getStats,{}),aj=c.default.useMemo(()=>ag||[],[ag]),ak=c.default.useMemo(()=>ah||[],[ah]),al=0===aj.length,am=0===ak.length,an="active"===V?aj:ak,[ao,ap]=c.default.useState([]),[aq,ar]=c.default.useState([]),[as,at]=c.default.useState(""),[au,av]=c.default.useState({pageIndex:0,pageSize:10}),aw=c.default.useMemo(()=>{let a=new Map;return aj.forEach(b=>{let c;c="Active"===b.status?"active":"Prospect"===b.status?"prospect":"inactive",a.set(b.id,c)}),a},[aj]);c.default.useEffect(()=>{aj&&0!==aj.length?Y(aj.filter(a=>"Archived"!==a.status).map(a=>{let b;return b="Active"===a.status?"active":"Prospect"===a.status?"prospect":"inactive",{id:a.id,name:a.name,column:b,status:b,industry:a.industry,activeProjects:a.activeProjects,primaryContact:a.primaryContact?{name:a.primaryContact.name,email:a.primaryContact.email}:null}})):Y([])},[aj]);let ax=async(a,b)=>{try{await ae({id:a}),F.success("Client Restored",`${b} has been restored and is now active.`)}catch(a){console.error("Failed to restore client:",a),F.error("Restore Failed","Failed to restore the client. Please try again.")}},ay=async()=>{if(T)try{await ad({id:T.id}),Q(!1),U(null),F.success("Client Archived",`${T.name} has been archived. It will be permanently deleted in 7 days.`)}catch(a){console.error("Failed to archive client:",a),F.error("Archive Failed","Failed to archive the client. Please try again.")}},az=c.default.useCallback(a=>{Y(a);let b=a.find(a=>{let b=aw.get(a.id);return b&&b!==a.column});if(b){let a;a="active"===b.column?"active":"prospect"===b.column?"prospect":"lead"===b.column?"lead":"inactive",af({id:b.id,status:a}).catch(a=>{console.error("Failed to update client status:",a),F.error("Update Failed","Failed to update client status. Please try again.")})}},[aw,af,F]),aA=(a=(a,b)=>{U({id:a,name:b}),Q(!0)},t="archived"===V,[{accessorKey:"name",header:()=>(0,b.jsx)("div",{className:"flex items-center gap-1",children:"Name"}),cell:({row:a})=>(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.original.name}),(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:a.original.location})]})},{accessorKey:"industry",header:"Industry",cell:({row:a})=>(0,b.jsx)("span",{className:"text-foreground",children:a.original.industry})},{accessorKey:"primaryContact",header:"Primary Contact",cell:({row:a})=>(0,b.jsx)("div",{className:"flex flex-col",children:a.original.primaryContact?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.original.primaryContact.name}),(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:a.original.primaryContact.email})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"No contact"})})},{accessorKey:"activeProjects",header:"Active Projects",cell:({row:a})=>(0,b.jsx)("span",{className:"text-foreground",children:a.original.activeProjects})},{accessorKey:"lastActivity",header:"Last Activity",cell:({row:a})=>{let c=new Date(a.original.lastActivity);return(0,b.jsx)("span",{className:"text-foreground",children:isNaN(c.getTime())?a.original.lastActivity:c.toLocaleDateString()})}},{accessorKey:"status",header:"Status",cell:({row:a})=>(0,b.jsx)(j.Badge,{variant:(a=>{switch(a){case"Active":return"default";case"Prospect":return"secondary";default:return"outline"}})(a.original.status),children:a.original.status})},{id:"actions",header:"",cell:({row:c})=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>{E.push(`/clients/${c.original.id}`)},"aria-label":`View client ${c.original.name}`,children:(0,b.jsx)(q.ExternalLink,{className:"size-4"})}),t&&ax?(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>ax(c.original.id,c.original.name),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-950","aria-label":`Restore client ${c.original.name}`,children:(0,b.jsx)(u,{className:"size-4"})}):(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>a(c.original.id,c.original.name),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950","aria-label":`Archive client ${c.original.name}`,children:(0,b.jsx)(s.Trash2,{className:"size-4"})})]})}]),aB=(0,l.useReactTable)({data:an,columns:aA,state:{sorting:ao,columnFilters:aq,globalFilter:as,pagination:au},onSortingChange:ap,onColumnFiltersChange:ar,onGlobalFilterChange:at,onPaginationChange:av,globalFilterFn:(a,b,c)=>{if(!c||""===c.trim())return!0;let d=c.toLowerCase().trim(),e=a.original;return!!(e.name&&e.name.toLowerCase().includes(d)||e.industry&&e.industry.toLowerCase().includes(d)||e.primaryContact&&(e.primaryContact.name&&e.primaryContact.name.toLowerCase().includes(d)||e.primaryContact.email&&e.primaryContact.email.toLowerCase().includes(d)))||!1},getCoreRowModel:(0,m.getCoreRowModel)(),getSortedRowModel:(0,m.getSortedRowModel)(),getFilteredRowModel:(0,m.getFilteredRowModel)(),getPaginationRowModel:(0,m.getPaginationRowModel)()});return(c.default.useEffect(()=>{av(a=>({...a,pageIndex:0}))},[V,as]),void 0===ag||void 0===ah||void 0===ai)?(0,b.jsxs)("div",{className:"relative p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Clients"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Loading clients..."})]})]})}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[1,2,3].map(a=>(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)("div",{className:"h-4 bg-muted rounded animate-pulse"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"h-8 bg-muted rounded animate-pulse"})})]},a))})]}):(0,b.jsxs)("div",{className:"relative p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Clients"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Overview of your clients"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(I.Tooltip,{children:[(0,b.jsx)(I.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:"inline-block",children:(0,b.jsxs)(C.StyledButton,{intent:"outline",size:"md",onClick:()=>S(!0),disabled:!ab,children:[(0,b.jsx)(w.Upload,{className:"h-4 w-4"}),"Import Clients"]})})}),!ab&&(0,b.jsx)(I.TooltipContent,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Premium Feature"}),(0,b.jsx)("p",{children:"Upgrade to access client import functionality"})]})})]}),(0,b.jsxs)(I.Tooltip,{children:[(0,b.jsx)(I.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:"inline-block",children:(0,b.jsxs)(C.StyledButton,{intent:"primary",size:"md",onClick:ac,disabled:!Z,icon:(0,b.jsx)(r.Plus,{className:"h-4 w-4"}),children:["Add Client",!Z&&aa&&"unlimited"!==aa&&void 0!==_&&(0,b.jsxs)(j.Badge,{variant:"secondary",className:"ml-1 text-xs",children:[_,"/",aa]})]})})}),!Z&&(0,b.jsx)(I.TooltipContent,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Upgrade Required"}),(0,b.jsx)("p",{children:$||"You've reached your client limit"}),aa&&"unlimited"!==aa&&void 0!==_&&(0,b.jsxs)("p",{className:"text-muted-foreground",children:[_,"/",aa," clients"]})]})})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10",children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(p.Users,{className:"size-4"})," Prospective Clients"]}),(0,b.jsx)(h.CardDescription,{children:"Clients currently marked as prospects"})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10",children:(0,b.jsx)("div",{className:"text-3xl font-semibold",children:ai?.groupedByStatus?.prospective??0})})]}),(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10",children:[(0,b.jsx)(h.CardTitle,{className:"text-base",children:"Active Clients"}),(0,b.jsx)(h.CardDescription,{children:"Clients engaged in work right now"})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10",children:(0,b.jsx)("div",{className:"text-3xl font-semibold",children:ai?.groupedByStatus?.active??0})})]}),(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10",children:[(0,b.jsx)(h.CardTitle,{className:"text-base",children:"Inactive Clients"}),(0,b.jsx)(h.CardDescription,{children:"Clients marked inactive or archived"})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10",children:(0,b.jsx)("div",{className:"text-3xl font-semibold",children:ai?.groupedByStatus?.inactive??0})})]})]}),(0,b.jsxs)(h.Card,{className:"group relative backdrop-blur-md overflow-hidden ring-1 ring-border/20 dark:ring-border/40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 via-white/5 to-transparent dark:from-white/5 dark:via-white/2 dark:to-transparent rounded-2xl"}),(0,b.jsxs)(h.CardHeader,{className:"relative z-10 flex flex-col gap-2 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{children:"Clients"}),(0,b.jsx)(h.CardDescription,{children:"Search, sort, and browse your client list"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsx)(f.Input,{placeholder:"Search clients, contacts, or industry...",value:as,onChange:a=>at(a.target.value),className:"w-full md:w-96"}),(0,b.jsxs)(K.ButtonGroup,{children:[(0,b.jsxs)("button",{onClick:()=>O("table"),"aria-pressed":"table"===N,"aria-label":"Table view",className:(0,L.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","table"===N?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:[(0,b.jsx)(x.TableProperties,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Table"})]}),(0,b.jsxs)("button",{onClick:()=>O("kanban"),"aria-pressed":"kanban"===N,"aria-label":"Kanban view",className:(0,L.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","kanban"===N?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:[(0,b.jsx)(y.LayoutGrid,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Kanban"})]})]})]})]}),(0,b.jsx)(h.CardContent,{className:"relative z-10 px-0",children:"kanban"===N?(0,b.jsx)("div",{className:"px-2 py-6 h-[calc(100vh-28rem)]",children:(0,b.jsx)(J.KanbanProvider,{columns:M,data:X,onDataChange:az,children:a=>{let c=X.filter(b=>b.column===a.id);return(0,b.jsxs)(J.KanbanBoard,{id:a.id,className:"bg-card/60 flex flex-col",children:[(0,b.jsxs)(J.KanbanHeader,{className:"flex items-center justify-between border-b bg-muted/30 shrink-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description})]}),(0,b.jsx)(D.StyledBadge,{variant:"outline",children:c.length})]}),(0,b.jsx)(J.KanbanCards,{id:a.id,children:a=>(0,b.jsx)(J.KanbanCard,{id:a.id,name:a.name,column:a.column,children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground",children:a.name}),(0,b.jsx)(D.StyledBadge,{variant:(a=>{switch(a){case"active":return"default";case"prospect":case"lead":return"secondary";default:return"outline"}})(a.status),children:(a=>{switch(a){case"lead":return"Lead";case"prospect":return"Prospect";case"active":return"Active";case"inactive":return"Inactive";default:return a}})(a.status)})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.industry}),(0,b.jsx)("div",{className:"flex items-center justify-between text-xs",children:(0,b.jsx)("span",{className:"text-muted-foreground",children:0===a.activeProjects?"No active projects":`${a.activeProjects} active ${1===a.activeProjects?"project":"projects"}`})}),a.primaryContact&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground border-t border-border/50 pt-2",children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.primaryContact.name}),(0,b.jsx)("p",{children:a.primaryContact.email})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-border/50",children:(0,b.jsx)(C.StyledButton,{intent:"outline",size:"sm",icon:(0,b.jsx)(q.ExternalLink,{className:"h-3.5 w-3.5"}),label:"View Client",showArrow:!1,onClick:b=>{b?.stopPropagation(),E.push(`/clients/${a.id}`)},className:"w-full justify-center"})})]})},a.id)})]},a.id)}})}):(0,b.jsxs)(k.Tabs,{value:V,onValueChange:W,className:"w-full",children:[(0,b.jsx)("div",{className:"px-6 pt-4",children:(0,b.jsxs)(k.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(k.TabsTrigger,{value:"active",children:"Active Clients"}),(0,b.jsx)(k.TabsTrigger,{value:"archived",children:"Archived Clients"})]})}),(0,b.jsx)(k.TabsContent,{value:"active",className:"mt-0",children:al?(0,b.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-muted",children:(0,b.jsx)(p.Users,{className:"h-12 w-12 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"mb-2 text-lg font-semibold text-foreground",children:"No clients yet"}),(0,b.jsx)("p",{className:"mx-auto mb-6 max-w-sm text-muted-foreground",children:"Create your first client to start organizing relationships and tracking activity."}),(0,b.jsxs)(I.Tooltip,{children:[(0,b.jsx)(I.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:"inline-block",children:(0,b.jsx)(C.StyledButton,{intent:"primary",size:"md",onClick:ac,disabled:!Z,icon:(0,b.jsx)(r.Plus,{className:"h-4 w-4"}),children:"Add Your First Client"})})}),!Z&&(0,b.jsx)(I.TooltipContent,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Upgrade Required"}),(0,b.jsx)("p",{children:$||"You've reached your client limit"}),aa&&"unlimited"!==aa&&void 0!==_&&(0,b.jsxs)("p",{className:"text-muted-foreground",children:[_,"/",aa," clients"]})]})})]})]}):(0,b.jsxs)("div",{className:"px-6",children:[(0,b.jsx)("div",{className:"overflow-hidden rounded-lg border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{className:"bg-muted sticky top-0 z-10",children:aB.getHeaderGroups().map(a=>(0,b.jsx)(i.TableRow,{children:a.headers.map(a=>(0,b.jsx)(i.TableHead,{children:a.isPlaceholder?null:(0,l.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(i.TableBody,{children:aB.getRowModel().rows?.length?aB.getRowModel().rows.map(a=>(0,b.jsx)(i.TableRow,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(a=>(0,b.jsx)(i.TableCell,{children:(0,l.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:aA.length,className:"h-24 text-center",children:"No clients match your search."})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[aB.getFilteredRowModel().rows.length," of"," ",aj.length," active clients"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>aB.previousPage(),isDisabled:!aB.getCanPreviousPage(),"aria-label":"Previous page",children:(0,b.jsx)(n.ChevronLeft,{className:"size-4"})}),(0,b.jsxs)("div",{className:"text-sm font-medium",children:["Page ",aB.getState().pagination?.pageIndex+1," of"," ",aB.getPageCount()]}),(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>aB.nextPage(),isDisabled:!aB.getCanNextPage(),"aria-label":"Next page",children:(0,b.jsx)(o.ChevronRight,{className:"size-4"})})]})]})]})}),(0,b.jsx)(k.TabsContent,{value:"archived",className:"mt-0",children:am?(0,b.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-muted",children:(0,b.jsx)(v,{className:"h-12 w-12 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"mb-2 text-lg font-semibold text-foreground",children:"No archived clients"}),(0,b.jsx)("p",{className:"mx-auto max-w-sm text-muted-foreground",children:"Clients you archive will appear here for seven days before being permanently deleted."})]}):(0,b.jsxs)("div",{className:"px-6",children:[(0,b.jsx)("div",{className:"overflow-hidden rounded-lg border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{className:"bg-muted sticky top-0 z-10",children:aB.getHeaderGroups().map(a=>(0,b.jsx)(i.TableRow,{children:a.headers.map(a=>(0,b.jsx)(i.TableHead,{children:a.isPlaceholder?null:(0,l.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(i.TableBody,{children:aB.getRowModel().rows?.length?aB.getRowModel().rows.map(a=>(0,b.jsx)(i.TableRow,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(a=>(0,b.jsx)(i.TableCell,{children:(0,l.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:aA.length,className:"h-24 text-center",children:"No archived clients match your search."})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[aB.getFilteredRowModel().rows.length," of"," ",ak.length," archived clients"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>aB.previousPage(),isDisabled:!aB.getCanPreviousPage(),"aria-label":"Previous page",children:(0,b.jsx)(n.ChevronLeft,{className:"size-4"})}),(0,b.jsxs)("div",{className:"text-sm font-medium",children:["Page ",aB.getState().pagination?.pageIndex+1," of"," ",aB.getPageCount()]}),(0,b.jsx)(g.Button,{intent:"outline",size:"sq-sm",onPress:()=>aB.nextPage(),isDisabled:!aB.getCanNextPage(),"aria-label":"Next page",children:(0,b.jsx)(o.ChevronRight,{className:"size-4"})})]})]})]})})]})})]}),T&&(0,b.jsx)(B.default,{isOpen:P,onClose:()=>Q(!1),onConfirm:ay,title:"Archive Client",itemName:T.name,itemType:"Client",isArchive:!0}),(0,b.jsx)(G,{isOpen:R,onOpenChange:S,onComplete:()=>{S(!1),F.success("Clients Imported","Your clients have been successfully imported.")}})]})}a.s(["default",()=>N],607573)}];

//# sourceMappingURL=apps_web_src_app_%28workspace%29_clients_page_tsx_be3ce66d._.js.map