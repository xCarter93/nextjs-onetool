module.exports=[298819,a=>a.a(async(b,c)=>{try{var d=a.i(187924),e=a.i(120267),f=b([e]);[e]=f.then?(await f)():f;let g=e.StyleSheet.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:28,fontSize:11,fontFamily:"Helvetica"},logoSection:{marginBottom:16,alignItems:"flex-start"},logoContainer:{width:160,height:60},logo:{width:"100%",height:"100%",objectFit:"contain",objectPosition:"left center"},header:{flexDirection:"row",justifyContent:"space-between",marginBottom:24,paddingBottom:12,borderBottomWidth:2,borderBottomColor:"#000000"},headerLeft:{flexDirection:"column",maxWidth:280},headerRight:{flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},title:{fontSize:32,fontWeight:"bold",color:"#000000",marginBottom:8,letterSpacing:1},subtitle:{fontSize:10,color:"#374151",marginBottom:2,lineHeight:1.5},invoiceNumber:{fontSize:20,fontWeight:"bold",color:"#000000",marginBottom:8},invoiceMeta:{backgroundColor:"#F9FAFB",borderWidth:1,borderColor:"#E5E7EB",borderRadius:4,padding:10,minWidth:200},metaRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:4},metaLabel:{fontSize:10,color:"#6B7280",fontWeight:"bold"},metaValue:{fontSize:10,color:"#1F2937",marginLeft:16},statusBadge:{backgroundColor:"#10B981",paddingVertical:4,paddingHorizontal:8,borderRadius:4,marginTop:6},statusText:{fontSize:9,color:"#FFFFFF",fontWeight:"bold",textTransform:"uppercase"},billToSection:{marginTop:8,marginBottom:16,padding:12,backgroundColor:"#F9FAFB",borderRadius:4},sectionTitle:{fontSize:11,fontWeight:"bold",color:"#1F2937",marginBottom:8,textTransform:"uppercase",letterSpacing:.5},billToContent:{fontSize:11,color:"#374151",lineHeight:1.6},itemsTable:{marginTop:12,marginBottom:16,borderWidth:1,borderColor:"#E5E7EB",borderRadius:4},tableHeader:{flexDirection:"row",backgroundColor:"#1F2937",paddingVertical:10,paddingHorizontal:12},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#E5E7EB",paddingVertical:10,paddingHorizontal:12,backgroundColor:"#FFFFFF"},tableCell:{fontSize:10,color:"#374151",lineHeight:1.4},tableCellDescription:{flex:3},tableCellQuantity:{flex:1,textAlign:"center"},tableCellPrice:{flex:1.5,textAlign:"right"},tableCellTotal:{flex:1.5,textAlign:"right",fontWeight:"bold",color:"#1F2937"},tableHeaderCell:{fontSize:10,fontWeight:"bold",color:"#FFFFFF",textTransform:"uppercase",letterSpacing:.8},totalsSection:{flexDirection:"row",justifyContent:"flex-end",marginTop:12,marginBottom:16},totalsContainer:{width:260,borderWidth:1,borderColor:"#E5E7EB",borderRadius:4,padding:12,backgroundColor:"#F9FAFB"},totalRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:4},totalLabel:{fontSize:11,color:"#6B7280"},totalValue:{fontSize:11,color:"#374151",fontWeight:"bold"},grandTotalRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:8,paddingTop:10,borderTopWidth:2,borderTopColor:"#1F2937",marginTop:6},grandTotalLabel:{fontSize:14,fontWeight:"bold",color:"#000000"},grandTotalValue:{fontSize:16,fontWeight:"bold",color:"#000000"},amountDueSection:{marginTop:12,padding:12,backgroundColor:"#FEF3C7",borderRadius:4,borderLeftWidth:4,borderLeftColor:"#F59E0B"},amountDueText:{fontSize:12,fontWeight:"bold",color:"#92400E",marginBottom:4},amountDueValue:{fontSize:18,fontWeight:"bold",color:"#92400E"},paymentNotice:{marginTop:12,padding:12,backgroundColor:"#D1FAE5",borderRadius:4,borderLeftWidth:4,borderLeftColor:"#10B981"},paymentNoticeText:{fontSize:11,color:"#065F46",fontWeight:"bold"},footer:{marginTop:24,paddingTop:12,borderTopWidth:1,borderTopColor:"#E5E7EB"},footerText:{fontSize:9,color:"#6B7280",textAlign:"center",lineHeight:1.4}}),h=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),i=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});a.s(["default",0,({invoice:a,client:b,items:c,organization:f})=>{let j="paid"===a.status,k=!j&&"sent"===a.status&&a.dueDate<Date.now();return(0,d.jsx)(e.Document,{children:(0,d.jsxs)(e.Page,{size:"A4",style:g.page,children:[f?.logoUrl?(0,d.jsx)(e.View,{style:g.logoSection,children:(0,d.jsx)(e.View,{style:g.logoContainer,children:(0,d.jsx)(e.Image,{style:g.logo,src:f.logoUrl})})}):null,(0,d.jsxs)(e.View,{style:g.header,children:[(0,d.jsxs)(e.View,{style:g.headerLeft,children:[(0,d.jsx)(e.Text,{style:g.title,children:"INVOICE"}),f?.name?(0,d.jsx)(e.Text,{style:g.subtitle,children:f.name}):null,f?.address?(0,d.jsx)(e.Text,{style:g.subtitle,children:f.address}):null,f?.phone?(0,d.jsxs)(e.Text,{style:g.subtitle,children:["Phone: ",f.phone]}):null,f?.email?(0,d.jsxs)(e.Text,{style:g.subtitle,children:["Email: ",f.email]}):null]}),(0,d.jsxs)(e.View,{style:g.headerRight,children:[(0,d.jsx)(e.Text,{style:g.invoiceNumber,children:a.invoiceNumber}),(0,d.jsxs)(e.View,{style:g.invoiceMeta,children:[(0,d.jsxs)(e.View,{style:g.metaRow,children:[(0,d.jsx)(e.Text,{style:g.metaLabel,children:"Issued:"}),(0,d.jsx)(e.Text,{style:g.metaValue,children:i(a.issuedDate)})]}),(0,d.jsxs)(e.View,{style:g.metaRow,children:[(0,d.jsx)(e.Text,{style:g.metaLabel,children:"Due Date:"}),(0,d.jsx)(e.Text,{style:g.metaValue,children:i(a.dueDate)})]}),j&&a.paidAt&&(0,d.jsxs)(e.View,{style:g.metaRow,children:[(0,d.jsx)(e.Text,{style:g.metaLabel,children:"Paid:"}),(0,d.jsx)(e.Text,{style:g.metaValue,children:i(a.paidAt)})]})]}),j&&(0,d.jsx)(e.View,{style:g.statusBadge,children:(0,d.jsx)(e.Text,{style:g.statusText,children:"PAID"})})]})]}),(0,d.jsxs)(e.View,{style:g.billToSection,wrap:!1,children:[(0,d.jsx)(e.Text,{style:g.sectionTitle,children:"Bill To:"}),(0,d.jsx)(e.View,{style:g.billToContent,children:b?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.Text,{children:b.companyName}),b.industry?(0,d.jsx)(e.Text,{children:b.industry}):null]}):(0,d.jsx)(e.Text,{children:"Client details unavailable"})})]}),(0,d.jsxs)(e.View,{style:g.itemsTable,wrap:!1,children:[(0,d.jsxs)(e.View,{style:g.tableHeader,children:[(0,d.jsx)(e.Text,{style:[g.tableHeaderCell,g.tableCellDescription],children:"Description"}),(0,d.jsx)(e.Text,{style:[g.tableHeaderCell,g.tableCellQuantity],children:"Qty"}),(0,d.jsx)(e.Text,{style:[g.tableHeaderCell,g.tableCellPrice],children:"Unit Price"}),(0,d.jsx)(e.Text,{style:[g.tableHeaderCell,g.tableCellTotal],children:"Total"})]}),c.map(a=>(0,d.jsxs)(e.View,{style:g.tableRow,children:[(0,d.jsx)(e.Text,{style:[g.tableCell,g.tableCellDescription],children:a.description}),(0,d.jsx)(e.Text,{style:[g.tableCell,g.tableCellQuantity],children:a.quantity}),(0,d.jsx)(e.Text,{style:[g.tableCell,g.tableCellPrice],children:h(a.unitPrice)}),(0,d.jsx)(e.Text,{style:[g.tableCell,g.tableCellTotal],children:h(a.total)})]},String(a._id)))]}),(0,d.jsx)(e.View,{style:g.totalsSection,wrap:!1,children:(0,d.jsxs)(e.View,{style:g.totalsContainer,children:[(0,d.jsxs)(e.View,{style:g.totalRow,children:[(0,d.jsx)(e.Text,{style:g.totalLabel,children:"Subtotal:"}),(0,d.jsx)(e.Text,{style:g.totalValue,children:h(a.subtotal)})]}),a.discountAmount?(0,d.jsxs)(e.View,{style:g.totalRow,children:[(0,d.jsx)(e.Text,{style:g.totalLabel,children:"Discount:"}),(0,d.jsxs)(e.Text,{style:g.totalValue,children:["- ",h(a.discountAmount)]})]}):null,a.taxAmount?(0,d.jsxs)(e.View,{style:g.totalRow,children:[(0,d.jsx)(e.Text,{style:g.totalLabel,children:"Tax:"}),(0,d.jsx)(e.Text,{style:g.totalValue,children:h(a.taxAmount)})]}):null,(0,d.jsxs)(e.View,{style:g.grandTotalRow,children:[(0,d.jsx)(e.Text,{style:g.grandTotalLabel,children:"Total:"}),(0,d.jsx)(e.Text,{style:g.grandTotalValue,children:h(a.total)})]})]})}),!j&&(0,d.jsxs)(e.View,{style:g.amountDueSection,wrap:!1,children:[(0,d.jsx)(e.Text,{style:g.amountDueText,children:k?"AMOUNT OVERDUE":"AMOUNT DUE"}),(0,d.jsx)(e.Text,{style:g.amountDueValue,children:h(a.total)}),(0,d.jsxs)(e.Text,{style:{fontSize:10,color:"#92400E",marginTop:4},children:["Payment due by ",i(a.dueDate)]})]}),j&&(0,d.jsxs)(e.View,{style:g.paymentNotice,wrap:!1,children:[(0,d.jsxs)(e.Text,{style:g.paymentNoticeText,children:["âœ“ Payment received on"," ",a.paidAt&&i(a.paidAt)]}),(0,d.jsx)(e.Text,{style:{fontSize:10,color:"#065F46",marginTop:4},children:"Thank you for your business!"})]}),(0,d.jsxs)(e.View,{style:g.footer,children:[(0,d.jsx)(e.Text,{style:g.footerText,children:"This invoice was generated electronically and is valid without a signature."}),f?.name&&(0,d.jsxs)(e.Text,{style:g.footerText,children:[f.name," â€¢ Invoice ",a.invoiceNumber]})]})]})})}]),c()}catch(a){c(a)}},!1),940354,a=>a.a(async(b,c)=>{try{var d=a.i(187924),e=a.i(50944),f=a.i(572131);a.i(511241);var g=a.i(296373),h=a.i(130487),i=a.i(968177),j=a.i(592552),k=a.i(763544),l=a.i(948217),m=a.i(539524),n=a.i(629353),o=a.i(104720),p=a.i(284505),q=a.i(177156),r=a.i(790166),s=a.i(267900),t=a.i(824569),u=a.i(296101),v=a.i(992258),w=a.i(816201),x=a.i(862722),y=a.i(360031),z=a.i(120267),A=a.i(298819),B=a.i(757215),C=b([z,A]);[z,A]=C.then?(await C)():C;let E=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),F=(a,b)=>"sent"===a&&b&&b<Date.now()?"overdue":a,G=a=>{switch(a){case"draft":return"Draft";case"sent":return"Sent";case"paid":return"Paid";case"overdue":return"Overdue";case"cancelled":return"Cancelled";default:return a}};function D(){let a=(0,e.useRouter)(),b=(0,e.useParams)(),c=(0,n.useToast)(),C=b.invoiceId,D=(0,g.useQuery)(h.api.invoices.get,{id:C}),H=(0,g.useQuery)(h.api.clients.get,D?.clientId?{id:D.clientId}:"skip"),I=(0,g.useQuery)(h.api.projects.get,D?.projectId?{id:D.projectId}:"skip"),J=(0,g.useQuery)(h.api.invoiceLineItems.listByInvoice,{invoiceId:C}),K=(0,g.useQuery)(h.api.organizations.get,{}),L=(0,g.useQuery)(h.api.documents.getLatest,D?{documentType:"invoice",documentId:D._id}:"skip"),M=(0,g.useQuery)(h.api.clientContacts.getPrimaryContact,D?.clientId?{clientId:D.clientId}:"skip"),N=(0,g.useQuery)(h.api.clientProperties.getPrimaryProperty,D?.clientId?{clientId:D.clientId}:"skip"),O=(0,g.useMutation)(h.api.invoices.update),P=(0,g.useMutation)(h.api.documents.generateUploadUrl),Q=(0,g.useMutation)(h.api.documents.create),R=(0,g.useQuery)(h.api.documents.getDocumentUrl,L?{id:L._id}:"skip"),S=(0,f.useMemo)(()=>D?.publicToken?`http://localhost:3000/pay/${D.publicToken}`:"",[D?.publicToken]),T=async a=>{try{await O({id:C,status:a}),c.success("Invoice Updated",`Status changed to ${G(a)}`)}catch(b){let a=b instanceof Error?b.message:"Failed to update status";c.error("Error",a)}},U=async()=>{try{await O({id:C,status:"paid"}),c.success("Invoice Paid","Invoice marked as paid successfully")}catch(b){let a=b instanceof Error?b.message:"Failed to mark as paid";c.error("Error",a)}};if(void 0===D)return(0,d.jsx)("div",{className:"min-h-screen flex-1 md:min-h-min",children:(0,d.jsxs)("div",{className:"relative bg-linear-to-br from-background via-muted/30 to-muted/60 dark:from-background dark:via-muted/20 dark:to-muted/40 min-h-screen rounded-xl",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_20%,rgba(120,119,198,0.08),transparent_50%)] rounded-xl"}),(0,d.jsx)("div",{className:"relative px-6 pt-8 pb-20",children:(0,d.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,d.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[(0,d.jsxs)("div",{className:"xl:col-span-3 space-y-8",children:[(0,d.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"}),(0,d.jsx)("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded"})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"}),(0,d.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]})]})})]})});if(null===D)return(0,d.jsx)("div",{className:"min-h-screen flex-1 md:min-h-min",children:(0,d.jsxs)("div",{className:"relative bg-linear-to-br from-background via-muted/30 to-muted/60 dark:from-background dark:via-muted/20 dark:to-muted/40 min-h-screen rounded-xl",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_20%,rgba(120,119,198,0.08),transparent_50%)] rounded-xl"}),(0,d.jsxs)("div",{className:"relative px-6 pt-8 pb-20 flex flex-col items-center justify-center h-96 space-y-4",children:[(0,d.jsx)("div",{className:"text-6xl",children:"ðŸ“„"}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Invoice Not Found"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"The invoice you're looking for doesn't exist or you don't have permission to view it."}),(0,d.jsx)(m.Button,{onClick:()=>a.push("/invoices"),children:"Back to Invoices"})]})]})});let V=F(D.status,D.dueDate),W=async()=>{let a;try{if(!D||!J)return;a=c.loading("Generating PDF","Rendering and uploadingâ€¦");let b=(0,d.jsx)(A.default,{invoice:D,client:H?{companyName:H.companyName,industry:H.industry}:void 0,items:J,organization:K?{name:K.name,logoUrl:K.logoUrl||void 0,address:K.address||void 0,phone:K.phone||void 0,email:K.email||void 0}:void 0}),e=await (0,z.pdf)(b).toBlob(),f=await P({}),g=await fetch(f,{method:"POST",headers:{"Content-Type":"application/pdf"},body:e});if(!g.ok)throw Error("Failed to upload PDF");let{storageId:h}=await g.json();await Q({documentType:"invoice",documentId:D._id,storageId:h}),c.removeToast(a),c.success("PDF generated","Your invoice PDF is ready.")}catch(d){a&&c.removeToast(a),console.error(d);let b=d instanceof Error?d.message:"Unknown error";c.error("PDF generation failed",b)}},X=async()=>{if(R)try{let a=await fetch(R);if(!a.ok)throw Error("Failed to fetch PDF");let b=await a.blob(),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`Invoice-${D?.invoiceNumber||D?._id.slice(-6)||"document"}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)}catch(b){console.error(b);let a=b instanceof Error?b.message:"Unknown error";c.error("Download failed",a)}};return(0,d.jsxs)("div",{className:"min-h-screen flex-1 md:min-h-min",children:[(0,d.jsxs)("div",{className:"relative min-h-screen rounded-xl",children:[(0,d.jsx)("div",{className:"rounded-xl"}),(0,d.jsx)("div",{className:"relative px-6 pt-8 pb-20",children:(0,d.jsxs)("div",{className:"mx-auto",children:[(0,d.jsx)("div",{className:"mb-8",children:(0,d.jsxs)("div",{className:"flex items-center gap-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 shrink-0",children:(0,d.jsx)(o.FileText,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:D.invoiceNumber}),(0,d.jsx)("p",{className:"text-muted-foreground text-sm",children:I?.title||"Invoice"})]})]}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsx)(k.StatusProgressBar,{status:V,steps:[{id:"draft",name:"Draft",order:1},{id:"sent",name:"Sent",order:2},{id:"paid",name:"Paid",order:3}],events:[...D._creationTime?[{type:"draft",timestamp:D._creationTime}]:[],...D.issuedDate?[{type:"sent",timestamp:D.issuedDate}]:[],...D.paidAt?[{type:"paid",timestamp:D.paidAt}]:[]],failureStatuses:["overdue","cancelled"],successStatuses:["paid"]})})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[(0,d.jsxs)("div",{className:"xl:col-span-3 space-y-8",children:[(0,d.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,d.jsxs)(j.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsxs)(j.CardTitle,{className:"flex items-center justify-between text-xl",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(s.Building2,{className:"h-5 w-5"}),"Client and Project Details"]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[I&&(0,d.jsxs)(m.Button,{intent:"outline",size:"sm",onClick:()=>a.push(`/projects/${I._id}`),children:[(0,d.jsx)(u.FolderOpen,{className:"h-4 w-4 mr-1"}),"View Project"]}),H&&(0,d.jsxs)(m.Button,{intent:"outline",size:"sm",onClick:()=>a.push(`/clients/${H._id}`),children:[(0,d.jsx)(t.Edit,{className:"h-4 w-4 mr-1"}),"View Client"]})]})]})}),(0,d.jsx)(j.CardContent,{children:(0,d.jsxs)("div",{className:"space-y-8",children:[H?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:H.companyName}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:H.industry||"No industry specified"}),H.companyDescription&&(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:H.companyDescription})]}),H.status&&(0,d.jsx)(i.Badge,{variant:"active"===H.status?"default":"outline",children:H.status})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,d.jsx)(v.Mail,{className:"h-4 w-4"}),"Primary Contact"]}),M?(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[M.firstName," ",M.lastName]}),M.jobTitle&&(0,d.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:M.jobTitle}),M.email&&(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,d.jsx)("a",{href:`mailto:${M.email}`,className:"hover:text-blue-600 dark:hover:text-blue-400",children:M.email})}),M.phone&&(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,d.jsx)("a",{href:`tel:${M.phone}`,className:"hover:text-blue-600 dark:hover:text-blue-400",children:M.phone})})]}):(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No primary contact set"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,d.jsx)(s.Building2,{className:"h-4 w-4"}),"Primary Location"]}),N?(0,d.jsxs)("div",{className:"space-y-2",children:[N.propertyName&&(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.propertyName}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,d.jsx)("p",{children:N.streetAddress}),(0,d.jsxs)("p",{children:[N.city,","," ",N.state," ",N.zipCode]})]})]}):(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No property address set"})]})]})]}):(0,d.jsxs)("div",{className:"p-6 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,d.jsx)(s.Building2,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client information not available"})]}),I&&(0,d.jsxs)("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,d.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,d.jsx)(u.FolderOpen,{className:"h-4 w-4"}),"Associated Project"]}),I.status&&(0,d.jsx)(i.Badge,{variant:"in-progress"===I.status?"default":"completed"===I.status?"secondary":"outline",children:I.status})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:I.title}),I.projectNumber&&(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Project #",I.projectNumber]})]}),I.description&&(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.description})]})]})]})})]})}),(0,d.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,d.jsxs)(j.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,d.jsx)(j.CardHeader,{className:"flex flex-row items-center justify-between",children:(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2 text-xl",children:[(0,d.jsx)(r.DollarSign,{className:"h-5 w-5"}),"Line Items"]})}),(0,d.jsx)(j.CardContent,{children:J&&J.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"overflow-hidden rounded-lg border",children:(0,d.jsxs)(l.Table,{children:[(0,d.jsx)(l.TableHeader,{className:"bg-muted",children:(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableHead,{children:"Description"}),(0,d.jsx)(l.TableHead,{className:"text-center",children:"Qty"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Unit Price"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Total"})]})}),(0,d.jsx)(l.TableBody,{children:J.map(a=>(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableCell,{className:"font-medium",children:a.description}),(0,d.jsx)(l.TableCell,{className:"text-center",children:a.quantity}),(0,d.jsx)(l.TableCell,{className:"text-right",children:E(a.unitPrice)}),(0,d.jsx)(l.TableCell,{className:"text-right font-medium",children:E(a.total)})]},a._id))})]})}),(0,d.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),(0,d.jsx)("span",{className:"font-medium",children:E(D.subtotal)})]}),D.discountAmount&&(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Discount:"}),(0,d.jsxs)("span",{className:"font-medium text-red-600 dark:text-red-400",children:["-",E(D.discountAmount)]})]}),D.taxAmount&&(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax:"}),(0,d.jsx)("span",{className:"font-medium",children:E(D.taxAmount)})]}),(0,d.jsx)("div",{className:"border-t pt-2",children:(0,d.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,d.jsx)("span",{children:"Total:"}),(0,d.jsx)("span",{children:E(D.total)})]})})]})]}):(0,d.jsxs)("div",{className:"p-8 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,d.jsx)("div",{className:"text-4xl mb-3",children:"ðŸ“‹"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"No line items found"})]})})]})})]}),(0,d.jsx)("div",{className:"xl:col-span-1",children:(0,d.jsxs)("div",{className:"sticky top-24 space-y-6",children:[(0,d.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,d.jsxs)(j.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsx)(j.CardTitle,{className:"text-lg",children:"Invoice Details"})}),(0,d.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status:"}),(0,d.jsx)(i.Badge,{variant:(a=>{switch(a){case"paid":return"default";case"sent":return"secondary";case"overdue":case"cancelled":return"destructive";default:return"outline"}})(V),children:G(V)})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Issued:"}),(0,d.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(D.issuedDate).toLocaleDateString()})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Due Date:"}),(0,d.jsx)("span",{className:`text-sm font-medium ${"overdue"===V?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:new Date(D.dueDate).toLocaleDateString()})]}),D.paidAt&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Paid:"}),(0,d.jsx)("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:new Date(D.paidAt).toLocaleDateString()})]}),(0,d.jsxs)("div",{className:"flex justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Amount Due:"}),(0,d.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"paid"===V?E(0):E(D.total)})]})]})]})}),(0,d.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,d.jsxs)(j.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsx)(j.CardTitle,{className:"text-lg",children:"Payment Link"})}),(0,d.jsx)(j.CardContent,{className:"space-y-3",children:K?.stripeConnectAccountId?S?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"text-sm text-muted-foreground break-all",children:S}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)(B.StyledButton,{intent:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(S).then(()=>c.success("Link copied","Public payment link copied.")).catch(()=>c.error("Copy failed","Unable to copy the link."))},children:"Copy link"}),(0,d.jsx)(B.StyledButton,{size:"sm",intent:"primary",showArrow:!1,onClick:()=>{window.open(S,"_blank","noopener,noreferrer")},children:"Open test link"})]}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"This public link uses the invoice token; share it with your client to pay via Stripe."})]}):(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"No payment link available for this invoice."}):(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Connect Stripe payments to enable the public checkout link for this invoice."})})]})}),(0,d.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,d.jsxs)(j.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,d.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center gap-2",children:(0,d.jsx)(j.CardTitle,{className:"text-lg",children:"Generated PDF"})}),(0,d.jsx)(o.FileText,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})]}),(0,d.jsx)(j.CardContent,{children:(0,d.jsx)("div",{className:"text-center py-6",children:R?(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("div",{className:"h-48 bg-gray-50 dark:bg-gray-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,d.jsx)("iframe",{src:R,className:"w-full h-full",title:"PDF Preview",style:{border:"none"}})}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:(0,d.jsxs)(m.Button,{intent:"outline",size:"sm",className:"w-full",children:[(0,d.jsx)(q.Eye,{className:"h-4 w-4 mr-2"}),"View"]})}),(0,d.jsxs)(m.Button,{intent:"outline",size:"sm",className:"w-full flex-1",onClick:X,children:[(0,d.jsx)(p.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}):(0,d.jsxs)("div",{children:[(0,d.jsx)(o.FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"No PDF generated yet"}),(0,d.jsxs)(m.Button,{intent:"outline",size:"sm",onClick:W,children:[(0,d.jsx)(o.FileText,{className:"h-4 w-4 mr-2"}),"Generate PDF"]})]})})})]})})]})})]})]})})]}),(0,d.jsx)(y.StickyFormFooter,{buttons:[...(()=>{if(!D)return null;switch(F(D.status,D.dueDate)){case"draft":return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(m.Button,{size:"sm",onClick:()=>T("sent"),children:[(0,d.jsx)(v.Mail,{className:"h-4 w-4 mr-1"})," Send Invoice"]}),(0,d.jsxs)(m.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:U,children:[(0,d.jsx)(w.CheckCircle,{className:"h-4 w-4 mr-1"})," Mark as Paid"]})]});case"sent":case"overdue":return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(m.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:U,children:[(0,d.jsx)(w.CheckCircle,{className:"h-4 w-4 mr-1"})," Mark as Paid"]}),(0,d.jsx)(m.Button,{size:"sm",intent:"outline",onClick:()=>T("draft"),children:"Revert to Draft"})]});case"paid":return(0,d.jsx)(m.Button,{size:"sm",intent:"outline",onClick:()=>T("sent"),children:"Reopen"});case"cancelled":return(0,d.jsx)(m.Button,{size:"sm",intent:"outline",onClick:()=>T("draft"),children:"Reopen (Draft)"});default:return null}})()?[{label:"draft"===V?"Mark as Sent":"sent"===V||"overdue"===V?"Mark as Paid":"paid"===V?"Reopen":"Update Status",intent:"draft"===V?"primary":"sent"===V||"overdue"===V?"success":"outline",icon:"draft"===V?(0,d.jsx)(v.Mail,{className:"h-4 w-4"}):"sent"===V||"overdue"===V?(0,d.jsx)(w.CheckCircle,{className:"h-4 w-4"}):(0,d.jsx)(t.Edit,{className:"h-4 w-4"}),onClick:()=>{"draft"===V?T("sent"):"sent"===V||"overdue"===V?U():"paid"===V&&T("sent")},position:"left"}]:[],{label:"Generate PDF",intent:"outline",icon:(0,d.jsx)(o.FileText,{className:"h-4 w-4"}),onClick:W,position:"right"},..."cancelled"!==V?[{label:"Cancel Invoice",intent:"destructive",icon:(0,d.jsx)(x.XCircle,{className:"h-4 w-4"}),onClick:()=>T("cancelled"),position:"right"}]:[]],fullWidth:!0})]})}a.s(["default",()=>D]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=apps_web_src_app_%28workspace%29_invoices_5152b8b6._.js.map