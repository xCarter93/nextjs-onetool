module.exports=[996236,e=>{"use strict";let t,r,n,a;var s,o=e.i(747909),i=e.i(174017),l=e.i(996250),u=e.i(759756),d=e.i(561916),p=e.i(114444),c=e.i(837092),h=e.i(869741),f=e.i(316795),E=e.i(487718),m=e.i(995169),_=e.i(47587),R=e.i(666012),g=e.i(570101),v=e.i(626937),x=e.i(10372),S=e.i(193695);e.i(52474);var w=e.i(600220);function C(e,t){if(e instanceof Promise)throw Error(t)}var A=e.i(469719);let b=(t="object"==typeof(s={server:{CLERK_SECRET_KEY:A.z.string().min(1),CLERK_USER_WEBHOOK_SECRET:A.z.string().min(1),CLERK_BILLING_WEBHOOK_SECRET:A.z.string().min(1),BOLDSIGN_API_KEY:A.z.string().min(1),BOLDSIGN_WEBHOOK_SECRET:A.z.string().optional(),OPENAI_API_KEY:A.z.string().min(1),UNSPLASH_ACCESS_KEY:A.z.string().min(1),UNSPLASH_SECRET_KEY:A.z.string().min(1),UNSPLASH_APP_ID:A.z.string().min(1),CLERK_ISSUER_DOMAIN:A.z.string().min(1),RESEND_API_KEY:A.z.string().min(1),RESEND_WEBHOOK_SECRET:A.z.string().min(1),STRIPE_APPLICATION_FEE_CENTS:A.z.string().optional().default("100")},client:{NEXT_PUBLIC_CONVEX_URL:A.z.string().min(1),NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:A.z.string().min(1),NEXT_PUBLIC_CLERK_FRONTEND_API_URL:A.z.string().min(1),NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:A.z.string().min(1)},experimental__runtimeEnv:{NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:"pk_test_Z3JhdGVmdWwtbW9sZS03NC5jbGVyay5hY2NvdW50cy5kZXYk",NEXT_PUBLIC_CONVEX_URL:"https://qualified-nightingale-857.convex.cloud",NEXT_PUBLIC_CLERK_FRONTEND_API_URL:"https://grateful-mole-74.clerk.accounts.dev",NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:"pk_test_51SbubR2dAZWhmODOFHx8PxoYF8JbxbXVoxVidXf37ebmD8cA3fzHSZ52eWG1yQjrvOWE03Yk5gNNFPLOAc2VGdJw00X97XlYIH"}}).client?s.client:{},r="object"==typeof s.server?s.server:{},n=s.shared,a=s.runtimeEnv?s.runtimeEnv:{...process.env,...s.experimental__runtimeEnv},function(e){let t=e.runtimeEnvStrict??e.runtimeEnv??process.env;if(e.emptyStringAsUndefined)for(let[e,r]of Object.entries(t))""===r&&delete t[e];if(e.skipValidation){if(e.extends)for(let t of e.extends)t.skipValidation=!0;return t}let r="object"==typeof e.client?e.client:{},n="object"==typeof e.server?e.server:{},a="object"==typeof e.shared?e.shared:{},s=e.isServer??!0,o=s?{...n,...a,...r}:{...r,...a},i=e.createFinalSchema?.(o,s)?.["~standard"].validate(t)??function(e,t){let r={},n=[];for(let a in e){let s=e[a]["~standard"].validate(t[a]);if(C(s,`Validation must be synchronous, but ${a} returned a Promise.`),s.issues){n.push(...s.issues.map(e=>({...e,message:e.message,path:[a,...e.path??[]]})));continue}r[a]=s.value}return n.length?{issues:n}:{value:r}}(o,t);C(i,"Validation must be synchronous");let l=e.onValidationError??(e=>{throw console.error("❌ Invalid environment variables:",e),Error("Invalid environment variables")}),u=e.onInvalidAccess??(()=>{throw Error("❌ Attempted to access a server-side environment variable on the client")});return i.issues?l(i.issues):new Proxy(Object.assign((e.extends??[]).reduce((e,t)=>Object.assign(e,t),{}),i.value),{get(t,r){if("string"==typeof r&&"__esModule"!==r&&"$$typeof"!==r)return s||e.clientPrefix&&(r.startsWith(e.clientPrefix)||r in a)?Reflect.get(t,r):u(r)}})}({...s,shared:n,client:t,server:r,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:a}));var P=e.i(89171);async function N(e){let{searchParams:t}=new URL(e.url),r=t.get("download");if(r)try{let e;if(!b.UNSPLASH_ACCESS_KEY)return console.error("UNSPLASH_ACCESS_KEY is not defined"),P.NextResponse.json({error:"Missing Unsplash API key"},{status:500});try{e=new URL(r)}catch{return P.NextResponse.json({error:"Invalid download URL"},{status:400})}if("https:"!==e.protocol)return P.NextResponse.json({error:"Only HTTPS URLs are allowed"},{status:400});let t=e.hostname.toLowerCase();if(!("api.unsplash.com"===t||t.endsWith(".unsplash.com")))return P.NextResponse.json({error:"Only Unsplash URLs are allowed"},{status:400});let n=await fetch(e.toString(),{headers:{Authorization:`Client-ID ${b.UNSPLASH_ACCESS_KEY}`}});return n.ok||console.error(`Unsplash download tracking error: ${n.status}`),P.NextResponse.json({success:!0})}catch(e){return console.error("Error tracking download:",e),P.NextResponse.json({success:!1})}try{if(console.log("Fetching from Unsplash API..."),!b.UNSPLASH_ACCESS_KEY)throw console.error("UNSPLASH_ACCESS_KEY is not defined"),Error("Missing Unsplash API key");let e=await fetch("https://api.unsplash.com/search/photos?query=small+business&per_page=30&orientation=portrait&order_by=relevant",{headers:{Authorization:`Client-ID ${b.UNSPLASH_ACCESS_KEY}`},next:{revalidate:3600}});if(!e.ok){let t=await e.text();throw console.error(`Unsplash API error: ${e.status} - ${t}`),Error(`Unsplash API error: ${e.statusText}`)}let t=(await e.json()).results.map(e=>({id:e.id,alt:e.alt_description||"Small business professional",url:`${e.urls.raw}&w=396&h=528&fit=crop&q=80`,downloadLocation:e.links.download_location,photographer:{name:e.user.name,username:e.user.username,profileUrl:e.user.links.html},photoUrl:e.links.html}));return P.NextResponse.json({photos:t,fetchedAt:new Date().toISOString()},{headers:{"Cache-Control":"public, s-maxage=3600, stale-while-revalidate=7200"}})}catch(e){return console.error("Error fetching Unsplash images:",e),P.NextResponse.json({photos:[{id:"fallback-1",alt:"Field service team collaboration",url:"https://images.unsplash.com/photo-1557804506-669a67965ba0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&h=528&q=80",photographer:{name:"Unsplash",username:"unsplash"}},{id:"fallback-2",alt:"Professional working on tablet",url:"https://images.unsplash.com/photo-1485217988980-11786ced9454?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&h=528&q=80",photographer:{name:"Unsplash",username:"unsplash"}},{id:"fallback-3",alt:"Team meeting and planning",url:"https://images.unsplash.com/photo-1559136555-9303baea8ebd?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&crop=focalpoint&fp-x=.4&w=396&h=528&q=80",photographer:{name:"Unsplash",username:"unsplash"}},{id:"fallback-4",alt:"Modern office workspace",url:"https://images.unsplash.com/photo-1670272504528-790c24957dda?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&crop=left&w=400&h=528&q=80",photographer:{name:"Unsplash",username:"unsplash"}},{id:"fallback-5",alt:"Technology and innovation",url:"https://images.unsplash.com/photo-1670272505284-8faba1c31f7d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&h=528&q=80",photographer:{name:"Unsplash",username:"unsplash"}}],fetchedAt:new Date().toISOString(),isFallback:!0},{status:200})}}e.s(["GET",()=>N,"revalidate",0,3600],717177);var U=e.i(717177);let I=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/unsplash/route",pathname:"/api/unsplash",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/apps/web/src/app/api/unsplash/route.ts",nextConfigOutput:"",userland:U}),{workAsyncStorage:y,workUnitAsyncStorage:L,serverHooks:H}=I;function T(){return(0,l.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:L})}async function O(e,t,r){I.isDev&&(0,u.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/unsplash/route";n=n.replace(/\/index$/,"")||"/";let a=await I.prepare(e,t,{srcPage:n,multiZoneDraftMode:!1});if(!a)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:s,params:o,nextConfig:l,parsedUrl:C,isDraftMode:A,prerenderManifest:b,routerServerContext:P,isOnDemandRevalidate:N,revalidateOnlyGenerated:U,resolvedPathname:y,clientReferenceManifest:L,serverActionsManifest:H}=a,T=(0,h.normalizeAppPath)(n),O=!!(b.dynamicRoutes[T]||b.routes[y]),k=async()=>((null==P?void 0:P.render404)?await P.render404(e,t,C,!1):t.end("This page could not be found"),null);if(O&&!A){let e=!!b.routes[y],t=b.dynamicRoutes[T];if(t&&!1===t.fallback&&!e){if(l.experimental.adapterPath)return await k();throw new S.NoFallbackError}}let B=null;!O||I.isDev||A||(B="/index"===(B=y)?"/":B);let D=!0===I.isDev||!O,K=O&&!D;H&&L&&(0,p.setReferenceManifestsSingleton)({page:n,clientReferenceManifest:L,serverActionsManifest:H,serverModuleMap:(0,c.createServerModuleMap)({serverActionsManifest:H})});let M=e.method||"GET",j=(0,d.getTracer)(),Y=j.getActiveScopeSpan(),q={params:o,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!l.experimental.authInterrupts},cacheComponents:!!l.cacheComponents,supportsDynamicResponse:D,incrementalCache:(0,u.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:l.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>I.onRequestError(e,t,n,P)},sharedContext:{buildId:s}},z=new f.NodeNextRequest(e),G=new f.NodeNextResponse(t),F=E.NextRequestAdapter.fromNodeNextRequest(z,(0,E.signalFromNodeResponse)(t));try{let a=async e=>I.handle(F,q).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=j.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${M} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${M} ${n}`)}),s=!!(0,u.getRequestMeta)(e,"minimalMode"),o=async o=>{var u,d;let p=async({previousCacheEntry:i})=>{try{if(!s&&N&&U&&!i)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await a(o);e.fetchMetrics=q.renderOpts.fetchMetrics;let l=q.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let u=q.renderOpts.collectedTags;if(!O)return await (0,R.sendResponse)(z,G,n,q.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,g.toNodeOutgoingHttpHeaders)(n.headers);u&&(t[x.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==q.renderOpts.collectedRevalidate&&!(q.renderOpts.collectedRevalidate>=x.INFINITE_CACHE)&&q.renderOpts.collectedRevalidate,a=void 0===q.renderOpts.collectedExpire||q.renderOpts.collectedExpire>=x.INFINITE_CACHE?void 0:q.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==i?void 0:i.isStale)&&await I.onRequestError(e,t,{routerKind:"App Router",routePath:n,routeType:"route",revalidateReason:(0,_.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:N})},P),t}},c=await I.handleResponse({req:e,nextConfig:l,cacheKey:B,routeKind:i.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:N,revalidateOnlyGenerated:U,responseGenerator:p,waitUntil:r.waitUntil,isMinimalMode:s});if(!O)return null;if((null==c||null==(u=c.value)?void 0:u.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(d=c.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",N?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let h=(0,g.fromNodeOutgoingHttpHeaders)(c.value.headers);return s&&O||h.delete(x.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||h.get("Cache-Control")||h.set("Cache-Control",(0,v.getCacheControlHeader)(c.cacheControl)),await (0,R.sendResponse)(z,G,new Response(c.value.body,{headers:h,status:c.value.status||200})),null};Y?await o(Y):await j.withPropagatedContext(e.headers,()=>j.trace(m.BaseServerSpan.handleRequest,{spanName:`${M} ${n}`,kind:d.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},o))}catch(t){if(t instanceof S.NoFallbackError||await I.onRequestError(e,t,{routerKind:"App Router",routePath:T,routeType:"route",revalidateReason:(0,_.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:N})}),O)throw t;return await (0,R.sendResponse)(z,G,new Response(null,{status:500})),null}}e.s(["handler",()=>O,"patchFetch",()=>T,"routeModule",()=>I,"serverHooks",()=>H,"workAsyncStorage",()=>y,"workUnitAsyncStorage",()=>L],996236)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_ec0473cb.js.map