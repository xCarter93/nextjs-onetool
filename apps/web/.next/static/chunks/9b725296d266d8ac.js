(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,264036,e=>{"use strict";var s=e.i(843476),t=e.i(152088);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function n({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-action",className:(0,t.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...a})}function c({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}function o({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}e.s(["Card",()=>a,"CardAction",()=>l,"CardContent",()=>c,"CardDescription",()=>i,"CardFooter",()=>o,"CardHeader",()=>n,"CardTitle",()=>r])},373884,e=>{"use strict";let s=(0,e.i(475254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],373884)},595468,e=>{"use strict";let s=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],595468)},590369,e=>{"use strict";var s=e.i(488077),t=e.i(35300);e.i(910507);var a=e.i(271645),n=e.i(827085),r=(0,t.withClerk)(({clerk:e,children:n,...r})=>{let{planId:i,planPeriod:l,for:c,onSubscriptionComplete:o,newSubscriptionRedirectUrl:d,checkoutProps:u,...h}=r,{userId:m,orgId:x}=(0,t.useAuth)();if(null===m)throw Error("Clerk: Ensure that `<CheckoutButton />` is rendered inside a `<SignedIn />` component.");if(null===x&&"organization"===c)throw Error('Clerk: Wrap `<CheckoutButton for="organization" />` with a check for an active organization. Retrieve `orgId` from `useAuth()` and confirm it is defined. For SSR, see: https://clerk.com/docs/reference/backend/types/auth-object#how-to-access-the-auth-object');n=(0,s.normalizeWithDefaultValue)(n,"Checkout");let p=(0,s.assertSingleChild)(n)("CheckoutButton"),f=async t=>(p&&"object"==typeof p&&"props"in p&&await (0,s.safeExecute)(p.props.onClick)(t),e)?e.__internal_openCheckout({planId:i,planPeriod:l,for:c,onSubscriptionComplete:o,newSubscriptionRedirectUrl:d,...u}):void 0,g={...h,onClick:f};return a.default.cloneElement(p,g)},{component:"CheckoutButton",renderWhileLoading:!0}),i=(0,t.withClerk)(({clerk:e,children:t,...n})=>{let{plan:r,planId:i,initialPlanPeriod:l,planDetailsProps:c,...o}=n;t=(0,s.normalizeWithDefaultValue)(t,"Plan details");let d=(0,s.assertSingleChild)(t)("PlanDetailsButton"),u=async t=>(d&&"object"==typeof d&&"props"in d&&await (0,s.safeExecute)(d.props.onClick)(t),e)?e.__internal_openPlanDetails({plan:r,planId:i,initialPlanPeriod:l,...c}):void 0,h={...o,onClick:u};return a.default.cloneElement(d,h)},{component:"PlanDetailsButton",renderWhileLoading:!0}),l=(0,t.withClerk)(({clerk:e,children:n,...r})=>{let{for:i,subscriptionDetailsProps:l,onSubscriptionCancel:c,...o}=r;n=(0,s.normalizeWithDefaultValue)(n,"Subscription details");let d=(0,s.assertSingleChild)(n)("SubscriptionDetailsButton"),{userId:u,orgId:h}=(0,t.useAuth)();if(null===u)throw Error("Clerk: Ensure that `<SubscriptionDetailsButton />` is rendered inside a `<SignedIn />` component.");if(null===h&&"organization"===i)throw Error('Clerk: Wrap `<SubscriptionDetailsButton for="organization" />` with a check for an active organization. Retrieve `orgId` from `useAuth()` and confirm it is defined. For SSR, see: https://clerk.com/docs/reference/backend/types/auth-object#how-to-access-the-auth-object');let m=async t=>(d&&"object"==typeof d&&"props"in d&&await (0,s.safeExecute)(d.props.onClick)(t),e)?e.__internal_openSubscriptionDetails({for:i,onSubscriptionCancel:c,...l}):void 0,x={...o,onClick:m};return a.default.cloneElement(d,x)},{component:"SubscriptionDetailsButton",renderWhileLoading:!0});function c(e){(0,t.useAssertWrappedByClerkProvider)("useClerkSignal");let s=(0,t.useIsomorphicClerkContext)(),n=(0,a.useCallback)(t=>s.loaded?s.__internal_state.__internal_effect(()=>{switch(e){case"signIn":s.__internal_state.signInSignal();break;case"signUp":s.__internal_state.signUpSignal();break;default:throw Error(`Unknown signal: ${e}`)}t()}):()=>{},[s,s.loaded,s.__internal_state]),r=(0,a.useCallback)(()=>{switch(e){case"signIn":return s.__internal_state.signInSignal();case"signUp":return s.__internal_state.signUpSignal();default:throw Error(`Unknown signal: ${e}`)}},[s.__internal_state]);return(0,a.useSyncExternalStore)(n,r,r)}function o(){return c("signIn")}function d(){return c("signUp")}e.s(["CheckoutButton",()=>r,"PlanDetailsButton",()=>i,"SubscriptionDetailsButton",()=>l,"useSignInSignal",()=>o,"useSignUpSignal",()=>d],465669),e.i(465669),e.s(["CheckoutButton",()=>r,"SubscriptionDetailsButton",()=>l,"usePlans",()=>n.__experimental_usePlans],590369)},353931,e=>{"use strict";var s=e.i(843476);e.i(250711);var t=e.i(982045),a=e.i(283164),n=e.i(283953),r=e.i(338703),i=e.i(590369),l=e.i(264036),c=e.i(907347),o=e.i(595468),d=e.i(373884);function u(){let e=(0,t.useQuery)(a.api.lib.permissions.debugAuthToken),u=(0,n.useFeatureAccess)(),{has:h,isLoaded:m}=(0,r.useAuth)(),{data:x}=(0,i.usePlans)({for:"user",pageSize:10});console.log(x);let p=[{label:"has({ feature: 'premium_feature_access' })",result:h&&h({feature:"premium_feature_access"})},{label:"has({ plan: 'onetool_business_plan_org' })",result:h&&h({plan:"onetool_business_plan_org"})},{label:"has({ plan: 'free_user' })",result:h&&h({plan:"free_user"})},{label:"has({ plan: 'free_org' })",result:h&&h({plan:"free_org"})}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Card,{className:"border-blue-500/50 bg-blue-500/5",children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{children:"Direct Frontend Plan Check (useAuth)"}),(0,s.jsxs)(l.CardDescription,{children:["Directly testing has(","{ plan: 'onetool_business_plan_org' }",")"]})]}),(0,s.jsx)(l.CardContent,{className:"space-y-4",children:m?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Plan Tests:"}),p.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.result?(0,s.jsx)(o.CheckCircle2,{className:"h-4 w-4 text-green-500"}):(0,s.jsx)(d.XCircle,{className:"h-4 w-4 text-red-500"}),(0,s.jsxs)("span",{className:"text-sm font-mono",children:[e.label,":"]}),(0,s.jsx)(c.Badge,{variant:e.result?"default":"secondary",children:e.result?"TRUE":"FALSE"})]},t))]})}):(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{children:"Frontend Check (use-feature-access hook)"}),(0,s.jsx)(l.CardDescription,{children:"Combined check using Clerk's has() method and publicMetadata"})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[u.hasPremiumAccess?(0,s.jsx)(o.CheckCircle2,{className:"h-5 w-5 text-green-500"}):(0,s.jsx)(d.XCircle,{className:"h-5 w-5 text-red-500"}),(0,s.jsx)("span",{className:"font-semibold",children:"Premium Access:"}),(0,s.jsx)(c.Badge,{variant:u.hasPremiumAccess?"default":"secondary",children:u.hasPremiumAccess?"TRUE":"FALSE"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[u.hasOrganization?(0,s.jsx)(o.CheckCircle2,{className:"h-5 w-5 text-green-500"}):(0,s.jsx)(d.XCircle,{className:"h-5 w-5 text-red-500"}),(0,s.jsx)("span",{className:"font-semibold",children:"Has Organization:"}),(0,s.jsx)(c.Badge,{variant:u.hasOrganization?"default":"secondary",children:u.hasOrganization?"TRUE":"FALSE"})]}),(0,s.jsx)("div",{className:"mt-4 p-4 bg-muted rounded-md",children:(0,s.jsxs)("p",{className:"text-sm font-mono",children:["Loading: ",u.isLoading?"true":"false"]})})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{children:"Backend Token Check (Convex)"}),(0,s.jsx)(l.CardDescription,{children:"Shows what's in the JWT token on the backend"})]}),(0,s.jsx)(l.CardContent,{children:e?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"User Info"}),(0,s.jsxs)("div",{className:"p-4 bg-muted rounded-md space-y-1 font-mono text-sm",children:[(0,s.jsxs)("p",{children:["Subject: ",e.subject]}),(0,s.jsxs)("p",{children:["Email: ",e.email||"Not set"]}),(0,s.jsxs)("p",{children:["Issuer: ",e.issuer]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Public Metadata"}),(0,s.jsx)("div",{className:"p-4 bg-muted rounded-md",children:(0,s.jsx)("pre",{className:"text-xs overflow-auto",children:JSON.stringify(e.publicMetadata,null,2)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Premium Access Checks"}),(0,s.jsx)("div",{className:"p-4 bg-muted rounded-md space-y-2",children:e.publicMetadataChecks?Object.entries(e.publicMetadataChecks).map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t?(0,s.jsx)(o.CheckCircle2,{className:"h-4 w-4 text-green-500"}):(0,s.jsx)(d.XCircle,{className:"h-4 w-4 text-red-500"}),(0,s.jsxs)("span",{className:"text-sm font-mono",children:[e,":"]}),(0,s.jsx)(c.Badge,{variant:t?"default":"secondary",children:t?"TRUE":"FALSE"})]},e)):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No metadata checks"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Plan Checks"}),(0,s.jsx)("div",{className:"p-4 bg-muted rounded-md space-y-2",children:e.planChecks?Object.entries(e.planChecks).map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t?(0,s.jsx)(o.CheckCircle2,{className:"h-4 w-4 text-green-500"}):(0,s.jsx)(d.XCircle,{className:"h-4 w-4 text-red-500"}),(0,s.jsxs)("span",{className:"text-sm font-mono",children:[e,":"]}),(0,s.jsx)(c.Badge,{variant:t?"default":"secondary",children:t?String(t):"NOT SET"})]},e)):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No plan data"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Available Token Keys"}),(0,s.jsx)("div",{className:"p-4 bg-muted rounded-md",children:(0,s.jsx)("pre",{className:"text-xs overflow-auto",children:JSON.stringify(e.availableKeys,null,2)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Full Token Data"}),(0,s.jsx)("div",{className:"p-4 bg-muted rounded-md",children:(0,s.jsx)("pre",{className:"text-xs overflow-auto max-h-96",children:JSON.stringify(e.fullTokenData,null,2)})})]})]}):(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading token data..."})})]})]})}e.s(["ClientChecks",()=>u])}]);