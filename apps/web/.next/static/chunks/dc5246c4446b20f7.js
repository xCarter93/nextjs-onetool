(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,503116,e=>{"use strict";let t=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],503116)},555436,e=>{"use strict";let t=(0,e.i(475254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],555436)},727612,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],727612)},87316,e=>{"use strict";var t=e.i(361277);e.s(["Calendar",()=>t.default])},688511,e=>{"use strict";let t=(0,e.i(475254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],688511)},595468,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],595468)},797188,e=>{"use strict";var t=e.i(843476),s=e.i(271645);e.i(250711);var a=e.i(982045),l=e.i(283164),r=e.i(152088),i=e.i(610012),d=e.i(907347),n=e.i(890042),c=e.i(499398),o=e.i(407107),m=e.i(51738),u=e.i(680707),x=e.i(846932),h=e.i(88653),p=e.i(87316),g=e.i(503116),j=e.i(284614),y=e.i(805899),f=e.i(107233),N=e.i(595468),k=e.i(114683),w=e.i(555436),v=e.i(475254);let b=(0,v.default)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),S=(0,v.default)("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);var C=e.i(878894),T=e.i(607486),M=e.i(75505),D=e.i(688511),I=e.i(727612);let U={low:{color:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",icon:y.Flag},medium:{color:"bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-300",icon:y.Flag},high:{color:"bg-amber-100 text-amber-700 dark:bg-amber-800 dark:text-amber-300",icon:y.Flag},urgent:{color:"bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-300",icon:C.AlertTriangle}},P={pending:{color:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",label:"Pending"},"in-progress":{color:"bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-300",label:"In Progress"},completed:{color:"bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-300",label:"Completed"},cancelled:{color:"bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-300",label:"Cancelled"}};function A({task:e,onStatusChange:i,onEdit:n,onDelete:c,isUpdating:o}){let[m,u]=(0,s.useState)(!1),y=(0,a.useQuery)(l.api.clients.list,{}),f=(0,a.useQuery)(l.api.projects.list,{}),w=(0,a.useQuery)(l.api.users.listByOrg,{}),v=y?.find(t=>t._id===e.clientId),b=f?.find(t=>t._id===e.projectId),S=w?.find(t=>t._id===e.assigneeUserId),A=new Date(e.date),F=new Date(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate()),B=new Date;B.setHours(0,0,0,0);let E=new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate())),L=e.date<E.getTime()&&"completed"!==e.status,V=e.date===E.getTime(),Y=U[e.priority||"medium"].icon,_=e=>{if(!e)return null;let[t,s]=e.split(":"),a=parseInt(t);return`${a%12||12}:${s} ${a>=12?"PM":"AM"}`};return(0,t.jsxs)(x.motion.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:(0,r.cn)("group hover:bg-muted/50 transition-colors",L&&"bg-red-50/30 dark:bg-red-900/10","completed"===e.status&&"opacity-60"),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[(0,t.jsx)("td",{className:"w-12 px-4 py-3",children:(0,t.jsx)("button",{onClick:()=>{if(o)return;let t="completed"===e.status?"pending":"completed";i(e._id,t)},disabled:o,className:(0,r.cn)("p-0.5 rounded-full transition-colors","hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",o&&"opacity-50 cursor-not-allowed"),children:"completed"===e.status?(0,t.jsx)(N.CheckCircle2,{className:"h-5 w-5 text-green-600"}):(0,t.jsx)(k.Circle,{className:"h-5 w-5 text-muted-foreground hover:text-foreground"})})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:(0,r.cn)("font-medium text-foreground truncate","completed"===e.status&&"line-through text-muted-foreground"),children:e.title}),L&&(0,t.jsx)(C.AlertTriangle,{className:"h-4 w-4 text-red-500 shrink-0"})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.description})]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(T.Building2,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:v?.companyName||"Unknown"})]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:b?(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(M.FolderOpen,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:b.title})]}):(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:(0,r.cn)("flex items-center gap-1 text-sm",L?"text-red-600":"text-muted-foreground"),children:[(0,t.jsx)(p.Calendar,{className:"h-3 w-3 shrink-0"}),(0,t.jsx)("span",{children:(e=>{if(V)return"Today";let t=new Date(E);return(t.setUTCDate(t.getUTCDate()+1),e.getTime()===t.getTime())?"Tomorrow":e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:e.getFullYear()!==new Date().getFullYear()?"numeric":void 0})})(F)})]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.startTime||e.endTime?(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,t.jsx)(g.Clock,{className:"h-3 w-3 shrink-0"}),(0,t.jsxs)("span",{children:[e.startTime&&_(e.startTime),e.startTime&&e.endTime&&" - ",e.endTime&&_(e.endTime)]})]}):(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:S?(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(j.User,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:S.name||S.email})]}):(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unassigned"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)(d.Badge,{variant:"secondary",className:P[e.status].color,children:P[e.status].label})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)(d.Badge,{variant:"secondary",className:(0,r.cn)("text-xs",U[e.priority||"medium"].color),children:[(0,t.jsx)(Y,{className:"h-3 w-3 mr-1"}),e.priority||"medium"]})}),(0,t.jsx)("td",{className:"w-16 px-4 py-3",children:(0,t.jsx)(h.AnimatePresence,{children:(m||o)&&(0,t.jsxs)(x.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>n(e),disabled:o,className:"p-1.5 rounded-md hover:bg-muted text-muted-foreground hover:text-foreground transition-colors",title:"Edit task",children:(0,t.jsx)(D.Edit,{className:"h-3 w-3"})}),(0,t.jsx)("button",{onClick:()=>c(e._id),disabled:o,className:"p-1.5 rounded-md hover:bg-red-100 dark:hover:bg-red-900/20 text-muted-foreground hover:text-red-600 transition-colors",title:"Delete task",children:(0,t.jsx)(I.Trash2,{className:"h-3 w-3"})})]})})})]})}function F(){let[e,r]=(0,s.useState)(""),[d,g]=(0,s.useState)("all"),[j,y]=(0,s.useState)("all"),[N,k]=(0,s.useState)("date"),[v,C]=(0,s.useState)("asc"),[T,M]=(0,s.useState)(null),[D,I]=(0,s.useState)(new Set),U=(0,a.useQuery)(l.api.tasks.list,{}),P=(0,a.useMutation)(l.api.tasks.update),F=(0,a.useMutation)(l.api.tasks.complete),B=(0,a.useMutation)(l.api.tasks.remove),E=void 0===U,L=(0,s.useMemo)(()=>{if(!U)return[];let t=U;if(e.trim()){let s=e.toLowerCase();t=t.filter(e=>e.title.toLowerCase().includes(s)||e.description?.toLowerCase().includes(s))}return"all"!==d&&(t=t.filter(e=>e.status===d)),"all"!==j&&(t=t.filter(e=>(e.priority||"medium")===j)),t.sort((e,t)=>{let s=0;switch(N){case"date":s=e.date-t.date;break;case"priority":let a={urgent:4,high:3,medium:2,low:1},l=a[e.priority||"medium"];s=a[t.priority||"medium"]-l;break;case"status":s=e.status.localeCompare(t.status)}return"desc"===v?-s:s}),t},[U,e,d,j,N,v]),V=async(e,t)=>{I(t=>new Set(t).add(e));try{"completed"===t?(await F({id:e}),console.log("Task marked as completed!")):(await P({id:e,status:t}),console.log("Task status updated!"))}catch(e){console.error("Error updating task:",e)}finally{I(t=>{let s=new Set(t);return s.delete(e),s})}},Y=e=>{M(e)},_=async e=>{if(window.confirm("Are you sure you want to delete this task?")){I(t=>new Set(t).add(e));try{await B({id:e}),console.log("Task deleted successfully!")}catch(e){console.error("Error deleting task:",e)}finally{I(t=>{let s=new Set(t);return s.delete(e),s})}}},$=e=>{N===e?C("asc"===v?"desc":"asc"):(k(e),C("asc"))},H=new Date;H.setHours(0,0,0,0);let O=Date.UTC(H.getFullYear(),H.getMonth(),H.getDate()),Q=U?.length||0,q=U?.filter(e=>"completed"===e.status).length||0,z=U?.filter(e=>e.date<O&&"completed"!==e.status).length||0;return(0,t.jsxs)(x.motion.div,{className:"p-4 sm:p-6 lg:p-8 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"Tasks"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:E?"Loading tasks...":`${Q} total • ${q} completed • ${z} overdue`})]}),(0,t.jsx)(c.TaskSheet,{mode:"create",trigger:(0,t.jsx)(o.StyledButton,{label:"New Task",icon:(0,t.jsx)(f.Plus,{className:"h-4 w-4"}),intent:"primary"})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(w.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{placeholder:"Search tasks...",value:e,onChange:e=>r(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(m.StyledSelect,{value:d,onValueChange:e=>g(e),children:[(0,t.jsx)(m.StyledSelectTrigger,{className:"w-[140px]",children:(0,t.jsx)(u.SelectValue,{placeholder:"All Status"})}),(0,t.jsxs)(m.StyledSelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"all",children:"All Status"}),(0,t.jsx)(u.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(u.SelectItem,{value:"in-progress",children:"In Progress"}),(0,t.jsx)(u.SelectItem,{value:"completed",children:"Completed"}),(0,t.jsx)(u.SelectItem,{value:"cancelled",children:"Cancelled"})]})]}),(0,t.jsxs)(m.StyledSelect,{value:j,onValueChange:e=>y(e),children:[(0,t.jsx)(m.StyledSelectTrigger,{className:"w-[140px]",children:(0,t.jsx)(u.SelectValue,{placeholder:"All Priority"})}),(0,t.jsxs)(m.StyledSelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"all",children:"All Priority"}),(0,t.jsx)(u.SelectItem,{value:"urgent",children:"Urgent"}),(0,t.jsx)(u.SelectItem,{value:"high",children:"High"}),(0,t.jsx)(u.SelectItem,{value:"medium",children:"Medium"}),(0,t.jsx)(u.SelectItem,{value:"low",children:"Low"})]})]})]})]}),(0,t.jsx)("div",{className:"bg-card rounded-lg border overflow-hidden",children:E?(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(n.Skeleton,{className:"h-5 w-5 rounded-full"}),(0,t.jsx)(n.Skeleton,{className:"h-5 flex-1"}),(0,t.jsx)(n.Skeleton,{className:"h-5 w-20"}),(0,t.jsx)(n.Skeleton,{className:"h-5 w-16"}),(0,t.jsx)(n.Skeleton,{className:"h-5 w-24"})]},e))})}):L.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/30",children:(0,t.jsxs)("tr",{className:"text-left",children:[(0,t.jsx)("th",{className:"w-12 px-4 py-3"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Task"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Client"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Project"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:(0,t.jsxs)("button",{onClick:()=>$("date"),className:"flex items-center gap-1 hover:text-foreground",children:["Date","date"===N&&("asc"===v?(0,t.jsx)(b,{className:"h-3 w-3"}):(0,t.jsx)(S,{className:"h-3 w-3"}))]})}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Time"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:"Assignee"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:(0,t.jsxs)("button",{onClick:()=>$("status"),className:"flex items-center gap-1 hover:text-foreground",children:["Status","status"===N&&("asc"===v?(0,t.jsx)(b,{className:"h-3 w-3"}):(0,t.jsx)(S,{className:"h-3 w-3"}))]})}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-muted-foreground",children:(0,t.jsxs)("button",{onClick:()=>$("priority"),className:"flex items-center gap-1 hover:text-foreground",children:["Priority","priority"===N&&("asc"===v?(0,t.jsx)(b,{className:"h-3 w-3"}):(0,t.jsx)(S,{className:"h-3 w-3"}))]})}),(0,t.jsx)("th",{className:"w-16 px-4 py-3"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsx)(h.AnimatePresence,{children:L.map(e=>(0,t.jsx)(A,{task:e,onStatusChange:V,onEdit:Y,onDelete:_,isUpdating:D.has(e._id)},e._id))})})]})}):(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-muted rounded-full",children:(0,t.jsx)(p.Calendar,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"No tasks found"}),(0,t.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto",children:e||"all"!==d||"all"!==j?"No tasks match your current filters. Try adjusting your search or filters.":"You haven't created any tasks yet. Create your first task to get started."})]}),!e&&"all"===d&&"all"===j&&(0,t.jsx)(c.TaskSheet,{mode:"create",trigger:(0,t.jsx)(o.StyledButton,{label:"Create Your First Task",icon:(0,t.jsx)(f.Plus,{className:"h-4 w-4"}),intent:"primary"})})]})})}),T&&(0,t.jsx)(c.TaskSheet,{task:T,mode:"edit",onOpenChange:e=>!e&&M(null)})]})}e.s(["default",()=>F],797188)}]);