(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,741452,412762,e=>{"use strict";let t;var i=e.i(843476);class s{constructor(e,t){this.listeners=new Set,this.subscribe=e=>{var t,i;this.listeners.add(e);let s=null==(i=null==(t=this.options)?void 0:t.onSubscribe)?void 0:i.call(t,e,this);return()=>{this.listeners.delete(e),null==s||s()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,i,s;(this.prevState=this.state,null==(t=this.options)?void 0:t.updateFn)?this.state=this.options.updateFn(this.prevState)(e):"function"==typeof e?this.state=e(this.prevState):this.state=e,null==(s=null==(i=this.options)?void 0:i.onUpdate)||s.call(i),c(this)}}class a{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{let e=this.options.deps.length,t=Array(e),i=Array(e);for(let s=0;s<e;s++){let e=this.options.deps[s];t[s]=e.prevState,i[s]=e.state}return this.lastSeenDepValues=i,{prevDepVals:t,currDepVals:i,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,t;this.prevState=this.state;let i=this.getDepVals();this.state=this.options.fn(i),null==(t=(e=this.options).onUpdate)||t.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(let e of this.options.deps)e instanceof a&&e.checkIfRecalculationNeededDeeply();let e=!1,t=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==t[s]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{for(let e of(this.unregisterFromGraph(),this._subscriptions))e()}),this.subscribe=e=>{var t,i;this.listeners.add(e);let s=null==(i=(t=this.options).onSubscribe)?void 0:i.call(t,e,this);return()=>{this.listeners.delete(e),null==s||s()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(let t of e)if(t instanceof a)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof s){let e=r.get(t);e||(e=new Set,r.set(t,e)),e.add(this);let i=n.get(this);i||(i=new Set,n.set(this,i)),i.add(t)}}unregisterFromGraph(e=this.options.deps){for(let t of e)if(t instanceof a)this.unregisterFromGraph(t.options.deps);else if(t instanceof s){let e=r.get(t);e&&e.delete(this);let i=n.get(this);i&&i.delete(t)}}}let r=new WeakMap,n=new WeakMap,o={current:[]},l=!1,u=0,d=new Set,h=new Map;function c(e){if((u>0&&!h.has(e)&&h.set(e,e.prevState),d.add(e),!(u>0))&&!l)try{for(l=!0;d.size>0;){let e=Array.from(d);for(let t of(d.clear(),e)){let e=h.get(t)??t.prevState;t.prevState=e,function(e){let t={prevVal:e.prevState,currentVal:e.state};for(let i of e.listeners)i(t)}(t)}for(let t of e){let e=r.get(t);e&&(o.current.push(t),function e(t){for(let i of Array.from(t).sort((e,t)=>e instanceof a&&e.options.deps.includes(t)?1:t instanceof a&&t.options.deps.includes(e)?-1:0)){if(o.current.includes(i))continue;o.current.push(i),i.recompute();let t=n.get(i);if(t)for(let i of t){let t=r.get(i);t&&e(t)}}}(e))}for(let t of e){let e=r.get(t);if(e)for(let t of e)!function(e){let t={prevVal:e.prevState,currentVal:e.state};for(let i of e.listeners)i(t)}(t)}}}finally{l=!1,o.current=[],h.clear()}}function f(e){u++;try{e()}finally{if(0==--u){let e=d.values().next().value;e&&c(e)}}}var m=class{constructor(e,t){this.fn=e,this.options=t,this.lastExecutionTime=0,this.isPending=!1,this.maybeExecute=(...e)=>{let t=Date.now()-this.lastExecutionTime;if(this.options.leading&&t>=this.options.wait)this.execute(...e);else if(this.lastArgs=e,!this.timeoutId&&this.options.trailing){let e=this.options.wait-t;this.isPending=!0,this.timeoutId=setTimeout(()=>{void 0!==this.lastArgs&&this.execute(...this.lastArgs)},e)}},this.execute=(...e)=>{this.fn(...e),this.options.onExecute?.(e,this),this.lastExecutionTime=Date.now(),this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.flush=()=>{this.isPending&&this.lastArgs&&this.execute(...this.lastArgs)},this.cancel=()=>{this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.clearTimeout=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},void 0===this.options.leading&&void 0===this.options.trailing&&(this.options.leading=!0,this.options.trailing=!0)}};class v{#e=!0;#t;#i;#s;#a;#r;#n;#o;#l=0;#u=5;#d=!1;#h=!1;#c=null;#f=()=>{this.debugLog("Connected to event bus"),this.#r=!0,this.#d=!1,this.debugLog("Emitting queued events",this.#a),this.#a.forEach(e=>this.emitEventToBus(e)),this.#a=[],this.stopConnectLoop(),this.#i().removeEventListener("tanstack-connect-success",this.#f)};#m=()=>{if(this.#l<this.#u){this.#l++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#i().removeEventListener("tanstack-connect",this.#m),this.#h=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#v=()=>{this.#d||(this.#d=!0,this.#i().addEventListener("tanstack-connect-success",this.#f),this.#m())};constructor({pluginId:e,debug:t=!1,enabled:i=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=i,this.#i=this.getGlobalTarget,this.#s=t,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#a=[],this.#r=!1,this.#h=!1,this.#n=null,this.#o=s}startConnectLoop(){null!==this.#n||this.#r||(this.debugLog(`Starting connect loop (every ${this.#o}ms)`),this.#n=setInterval(this.#m,this.#o))}stopConnectLoop(){this.#d=!1,null!==this.#n&&(clearInterval(this.#n),this.#n=null,this.#a=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#s&&console.log(`ðŸŒ´ [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if("undefined"!=typeof globalThis&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if("undefined"!=typeof window&&void 0!==window.addEventListener)return this.debugLog("Using window as event target"),window;let e="undefined"!=typeof EventTarget?new EventTarget:void 0;return void 0===e||void 0===e.addEventListener?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,t){try{let i=new Event(e,{detail:t});this.#i().dispatchEvent(i)}catch(e){this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,t){try{this.#i().dispatchEvent(new CustomEvent(e,{detail:t}))}catch(i){this.dispatchCustomEventShim(e,t)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,t){return{type:`${this.#t}:${e}`,payload:t,pluginId:this.#t}}emit(e,t){if(!this.#e)return void this.debugLog("Event bus client is disabled, not emitting event",e,t);if(this.#c&&(this.debugLog("Emitting event to internal event target",e,t),this.#c.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,t)}))),this.#h)return void this.debugLog("Previously failed to connect, not emitting to bus");if(!this.#r){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#a.push(this.createEventPayload(e,t)),"undefined"==typeof CustomEvent||this.#d||(this.#v(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,t))}on(e,t,i){let s=i?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#c||(this.#c=new EventTarget),this.#c.addEventListener(a,e=>{t(e.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};let r=e=>{this.debugLog("Received event from bus",e.detail),t(e.detail)};return this.#i().addEventListener(a,r),this.debugLog("Registered event to bus",a),()=>{s&&this.#c?.removeEventListener(a,r),this.#i().removeEventListener(a,r)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};let t=t=>{e(t.detail)};return this.#i().addEventListener("tanstack-devtools-global",t),()=>this.#i().removeEventListener("tanstack-devtools-global",t)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};let t=t=>{let i=t.detail;this.#t&&i.pluginId!==this.#t||e(i)};return this.#i().addEventListener("tanstack-devtools-global",t),()=>this.#i().removeEventListener("tanstack-devtools-global",t)}}let p=new class extends v{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}};function g(e,t){return"function"==typeof e?e(t):e}function b(e,t){return I(t).reduce((e,t)=>null===e?null:void 0!==e?e[t]:void 0,e)}function M(e,t,i){let s=I(t);return function e(t){if(!s.length)return g(i,t);let a=s.shift();if("string"==typeof a||"number"==typeof a&&!Array.isArray(t))return"object"==typeof t?(null===t&&(t={}),{...t,[a]:e(t[a])}):{[a]:e()};if(Array.isArray(t)&&"number"==typeof a){let i=t.slice(0,a);return[...i.length?i:Array(a),e(t[a]),...t.slice(a+1)]}return[...Array(a),e()]}(e)}let y=/^(\d+)$/gm,S=/\.(\d+)(?=\.)/gm,V=/^(\d+)\./gm,A=/\.(\d+$)/gm,E=/\.{2,}/gm,F="__int__",w=`${F}$1`;function I(e){if(Array.isArray(e))return[...e];if("string"!=typeof e)throw Error("Path must be a string.");return e.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(y,w).replace(S,`.${w}.`).replace(V,`${w}.`).replace(A,`.${w}`).replace(E,".").split(".").map(e=>{if(e.startsWith(F)){let t=e.substring(F.length),i=parseInt(t,10);return String(i)===t?i:t}return e})}function L(e,t){return t.validationLogic({form:t.form,validators:t.validators,event:{type:e,async:!1},runValidation:e=>e.validators.filter(Boolean).map(e=>({cause:e.cause,validate:e.fn}))})}function T(e,t){let{asyncDebounceMs:i}=t,{onBlurAsyncDebounceMs:s,onChangeAsyncDebounceMs:a,onDynamicAsyncDebounceMs:r}=t.validators||{},n=i??0;return t.validationLogic({form:t.form,validators:t.validators,event:{type:e,async:!0},runValidation:t=>t.validators.filter(Boolean).map(t=>{let i=t?.cause||e,o=n;switch(i){case"change":o=a??n;break;case"blur":o=s??n;break;case"dynamic":o=r??n;break;case"submit":o=0}return"submit"===e&&(o=0),{cause:i,validate:t.fn,debounceMs:o}})})}let x=e=>!!e&&"object"==typeof e&&"fields"in e;function O(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[i,s]of e)if(!t.has(i)||!Object.is(s,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0}let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(let a of i)if(!s.includes(a)||!O(e[a],t[a]))return!1;return!0}let j=({newFormValidatorError:e,isPreviousErrorFromFormValidator:t,previousErrorValue:i})=>e?{newErrorValue:e,newSource:"form"}:t?{newErrorValue:void 0,newSource:void 0}:i?{newErrorValue:i,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},C=({formLevelError:e,fieldLevelError:t})=>t?{newErrorValue:t,newSource:"field"}:e?{newErrorValue:e,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function k(e,t){return null==e?t:{...e,...t}}let B=256,D=[];for(;B--;)D[B]=(B+256).toString(16).substring(1);function _(){let e,i=0,s="";if(!t||B+16>256){for(t=Array(256),i=256;i--;)t[i]=256*Math.random()|0;i=0,B=0}for(;i<16;i++)e=t[B+i],6===i?s+=D[15&e|64]:8===i?s+=D[63&e|128]:s+=D[e],1&i&&i>1&&i<11&&(s+="-");return B++,s}let $=new m(e=>p.emit("form-state",{id:e.formId,state:e.store.state}),{wait:300}).maybeExecute,P=e=>{if(!e.validators)return e.runValidation({validators:[],form:e.form});let t=e.event.async,i=t?void 0:{fn:e.validators.onMount,cause:"mount"},s={fn:t?e.validators.onChangeAsync:e.validators.onChange,cause:"change"},a={fn:t?e.validators.onBlurAsync:e.validators.onBlur,cause:"blur"},r={fn:t?e.validators.onSubmitAsync:e.validators.onSubmit,cause:"submit"},n=t?void 0:{fn:()=>void 0,cause:"server"};switch(e.event.type){case"mount":return e.runValidation({validators:[i],form:e.form});case"submit":return e.runValidation({validators:[s,a,r,n],form:e.form});case"server":return e.runValidation({validators:[],form:e.form});case"blur":return e.runValidation({validators:[a,n],form:e.form});case"change":return e.runValidation({validators:[s,n],form:e.form});default:throw Error(`Unknown validation event type: ${e.event.type}`)}},R=(e,t)=>{let i=function(e,t){let i=new Map;for(let s of e){let e=s.path??[],a=t,r="";for(let t=0;t<e.length;t++){let i=e[t];if(void 0===i)continue;let s="object"==typeof i?i.key:i,n=Number(s);Array.isArray(a)&&!Number.isNaN(n)?r+=`[${n}]`:r+=(t>0?".":"")+String(s),a="object"==typeof a&&null!==a?a[s]:void 0}i.set(r,(i.get(r)??[]).concat(s))}return Object.fromEntries(i)}(e,t);return{form:i,fields:i}},N={validate({value:e,validationSource:t},i){let s=i["~standard"].validate(e);if(s instanceof Promise)throw Error("async function passed to sync validator");if(s.issues)return"field"===t?s.issues:R(s.issues,e)},async validateAsync({value:e,validationSource:t},i){let s=await i["~standard"].validate(e);if(s.issues)return"field"===t?s.issues:R(s.issues,e)}},W=e=>!!e&&"~standard"in e,q={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function z(e){function t(e,t){return`${e}[${t}]`}function i(i,s,a,r){let n=[t(i,s)];switch(a){case"swap":n.push(t(i,r));break;case"move":{let[e,a]=[Math.min(s,r),Math.max(s,r)];for(let s=e;s<=a;s++)n.push(t(i,s));break}default:{let a=e.getFieldValue(i),r=Array.isArray(a)?a.length:0;for(let e=s+1;e<r;e++)n.push(t(i,e))}}return Object.keys(e.fieldInfo).filter(e=>n.some(t=>e.startsWith(t)))}function s(t,i){("up"===i?t:[...t].reverse()).forEach(t=>{var s;let r=(s=t.toString(),s.replace(/\[(\d+)\]/,(e,t)=>{let s=parseInt(t,10),a="up"===i?s+1:Math.max(0,s-1);return`[${a}]`})),n=e.getFieldMeta(r);n?e.setFieldMeta(t,n):e.setFieldMeta(t,a())})}let a=()=>q;return{handleArrayMove:function(a,r,n){let o=i(a,r,"move",n),l=Math.min(r,n),u=Math.max(r,n);for(let e=l;e<=u;e++)o.push(t(a,e));let d=Object.keys(e.fieldInfo).reduce((i,s)=>(s.startsWith(t(a,r))&&i.set(s,e.getFieldMeta(s)),i),new Map);s(o,r<n?"up":"down"),Object.keys(e.fieldInfo).filter(e=>e.startsWith(t(a,n))).forEach(i=>{let s=i.replace(t(a,n),t(a,r)),o=d.get(s);o&&e.setFieldMeta(i,o)})},handleArrayRemove:function(e,t){s(i(e,t,"remove"),"up")},handleArraySwap:function(s,a,r){i(s,a,"swap",r).forEach(i=>{if(!i.toString().startsWith(t(s,a)))return;let n=i.toString().replace(t(s,a),t(s,r)),[o,l]=[e.getFieldMeta(i),e.getFieldMeta(n)];o&&e.setFieldMeta(n,o),l&&e.setFieldMeta(i,l)})},handleArrayInsert:function(r,n){let o=i(r,n,"insert");s(o,"down"),o.forEach(i=>{i.toString().startsWith(t(r,n))&&e.setFieldMeta(i,a())})}}}function G(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class U{constructor(e){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{let e=this.fieldMetaDerived.mount(),t=this.store.mount(),i=this.store.subscribe(()=>{$(this)}),s=p.on("request-form-state",e=>{e.payload.id===this._formId&&p.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),a=p.on("request-form-reset",e=>{e.payload.id===this._formId&&this.reset()}),r=p.on("request-form-force-submit",e=>{e.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}),n=()=>{r(),a(),s(),i(),e(),t(),p.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});let{onMount:o}=this.options.validators||{};return p.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),o&&this.validateSync("mount"),n},this.update=e=>{if(!e)return;let t=this.options;this.options=e;let i=!!e.transform?.deps?.some((e,t)=>e!==this.prevTransformArray[t]),s=e.defaultValues&&!O(e.defaultValues,t.defaultValues)&&!this.state.isTouched,a=!O(e.defaultState,t.defaultState)&&!this.state.isTouched;(s||a||i)&&(f(()=>{this.baseStore.setState(()=>G(Object.assign({},this.state,a?e.defaultState:{},s?{values:e.defaultValues}:{},i?{_force_re_eval:!this.state._force_re_eval}:{})))}),p.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(e,t)=>{let{fieldMeta:i}=this.state,s=this.resetFieldMeta(i);e&&!t?.keepDefaultValues&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState(()=>G({...this.options.defaultState,values:e??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:s}))},this.validateAllFields=async e=>{let t=[];return f(()=>{Object.values(this.fieldInfo).forEach(i=>{if(!i.instance)return;let s=i.instance;t.push(Promise.resolve().then(()=>s.validate(e,{skipFormValidation:!0}))),i.instance.state.meta.isTouched||i.instance.setMeta(e=>({...e,isTouched:!0}))})}),(await Promise.all(t)).flat()},this.validateArrayFieldsStartingFrom=async(e,t,i)=>{let s=this.getFieldValue(e),a=Array.isArray(s)?Math.max(s.length-1,0):null,r=[`${e}[${t}]`];for(let i=t+1;i<=(a??0);i++)r.push(`${e}[${i}]`);let n=Object.keys(this.fieldInfo).filter(e=>r.some(t=>e.startsWith(t))),o=[];return f(()=>{n.forEach(e=>{o.push(Promise.resolve().then(()=>this.validateField(e,i)))})}),(await Promise.all(o)).flat()},this.validateField=(e,t)=>{let i=this.fieldInfo[e]?.instance;return i?(i.state.meta.isTouched||i.setMeta(e=>({...e,isTouched:!0})),i.validate(t)):[]},this.validateSync=e=>{let t=L(e,{...this.options,form:this,validationLogic:this.options.validationLogic||P}),i=!1,s={};return f(()=>{for(let e of t){if(!e.validate)continue;let{formError:t,fieldErrors:a}=K(this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"})),r=H(e.cause);for(let e of new Set([...Object.keys(this.state.fieldMeta),...Object.keys(a||{})])){if(void 0===this.baseStore.state.fieldMetaBase[e]&&!a?.[e])continue;let{errorMap:t,errorSourceMap:i}=this.getFieldMeta(e)??q,n=a?.[e],{newErrorValue:o,newSource:l}=j({newFormValidatorError:n,isPreviousErrorFromFormValidator:i?.[r]==="form",previousErrorValue:t?.[r]});"form"===l&&(s[e]={...s[e],[r]:n}),t?.[r]!==o&&this.setFieldMeta(e,(e=q)=>({...e,errorMap:{...e.errorMap,[r]:o},errorSourceMap:{...e.errorSourceMap,[r]:l}}))}this.state.errorMap?.[r]!==t&&this.baseStore.setState(e=>({...e,errorMap:{...e.errorMap,[r]:t}})),(t||a)&&(i=!0)}let a=H("submit");this.state.errorMap?.[a]&&"submit"!==e&&!i&&this.baseStore.setState(e=>({...e,errorMap:{...e.errorMap,[a]:void 0}}));let r=H("server");this.state.errorMap?.[r]&&"server"!==e&&!i&&this.baseStore.setState(e=>({...e,errorMap:{...e.errorMap,[r]:void 0}}))}),{hasErrored:i,fieldsErrorMap:s}},this.validateAsync=async e=>{let t,i=T(e,{...this.options,form:this,validationLogic:this.options.validationLogic||P});this.state.isFormValidating||this.baseStore.setState(e=>({...e,isFormValidating:!0}));let s=[];for(let e of i){if(!e.validate)continue;let i=H(e.cause),a=this.state.validationMetaMap[i];a?.lastAbortController.abort();let r=new AbortController;this.state.validationMetaMap[i]={lastAbortController:r},s.push(new Promise(async i=>{let s;try{s=await new Promise((t,i)=>{setTimeout(async()=>{if(r.signal.aborted)return t(void 0);try{t(await this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:r.signal},type:"validateAsync"}))}catch(e){i(e)}},e.debounceMs)})}catch(e){s=e}let{formError:a,fieldErrors:n}=K(s);n&&(t=t?{...t,...n}:n);let o=H(e.cause);for(let e of Object.keys(this.state.fieldMeta)){if(void 0===this.baseStore.state.fieldMetaBase[e])continue;let i=this.getFieldMeta(e);if(!i)continue;let{errorMap:s,errorSourceMap:a}=i,{newErrorValue:r,newSource:n}=j({newFormValidatorError:t?.[e],isPreviousErrorFromFormValidator:a?.[o]==="form",previousErrorValue:s?.[o]});s?.[o]!==r&&this.setFieldMeta(e,e=>({...e,errorMap:{...e.errorMap,[o]:r},errorSourceMap:{...e.errorSourceMap,[o]:n}}))}this.baseStore.setState(e=>({...e,errorMap:{...e.errorMap,[o]:a}})),i(t?{fieldErrors:t,errorMapKey:o}:void 0)}))}let a={};if(s.length){for(let e of(await Promise.all(s)))if(e?.fieldErrors){let{errorMapKey:t}=e;for(let[i,s]of Object.entries(e.fieldErrors)){let e={...a[i]||{},[t]:s};a[i]=e}}}return this.baseStore.setState(e=>({...e,isFormValidating:!1})),a},this.validate=e=>{let{hasErrored:t,fieldsErrorMap:i}=this.validateSync(e);return t&&!this.options.asyncAlways?i:this.validateAsync(e)},this._handleSubmit=async e=>{this.baseStore.setState(e=>({...e,isSubmitted:!1,submissionAttempts:e.submissionAttempts+1,isSubmitSuccessful:!1})),f(()=>{Object.values(this.fieldInfo).forEach(e=>{e.instance&&(e.instance.state.meta.isTouched||e.instance.setMeta(e=>({...e,isTouched:!0})))})});let t=e??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride)return void this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t});this.baseStore.setState(e=>({...e,isSubmitting:!0}));let i=()=>{this.baseStore.setState(e=>({...e,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){i(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t}),p.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(e=>e.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){i(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t}),p.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}f(()=>{Object.values(this.fieldInfo).forEach(e=>{e.instance?.options.listeners?.onSubmit?.({value:e.instance.state.value,fieldApi:e.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:t});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:t}),f(()=>{this.baseStore.setState(e=>({...e,isSubmitted:!0,isSubmitSuccessful:!0})),p.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),i()})}catch(e){throw this.baseStore.setState(e=>({...e,isSubmitSuccessful:!1})),p.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:e}),i(),e}},this.getFieldValue=e=>b(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>this.fieldInfo[e]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(e,t)=>{this.baseStore.setState(i=>({...i,fieldMetaBase:{...i.fieldMetaBase,[e]:g(t,i.fieldMetaBase[e])}}))},this.resetFieldMeta=e=>Object.keys(e).reduce((e,t)=>(e[t]=q,e),{}),this.setFieldValue=(e,t,i)=>{let s=i?.dontUpdateMeta??!1,a=i?.dontRunListeners??!1,r=i?.dontValidate??!1;f(()=>{s||this.setFieldMeta(e,e=>({...e,isTouched:!0,isDirty:!0,errorMap:{...e?.errorMap,onMount:void 0}})),this.baseStore.setState(i=>({...i,values:M(i.values,e,t)}))}),a||this.getFieldInfo(e).instance?.triggerOnChangeListener(),r||this.validateField(e,"change")},this.deleteField=e=>{let t=[...Object.keys(this.fieldInfo).filter(t=>{let i=e.toString();return t!==i&&t.startsWith(i)}),e];this.baseStore.setState(e=>{let i={...e};return t.forEach(e=>{var t;let s;t=i.values,s=I(e),i.values=function e(t){if(!t)return;if(1===s.length){let e=s[0];if(Array.isArray(t)&&"number"==typeof e)return t.filter((t,i)=>i!==e);let{[e]:i,...a}=t;return a}let i=s.shift();if(("string"==typeof i||"number"==typeof i&&!Array.isArray(t))&&"object"==typeof t)return{...t,[i]:e(t[i])};if("number"==typeof i&&Array.isArray(t)){if(i>=t.length)return t;let s=t.slice(0,i);return[...s.length?s:Array(i),e(t[i]),...t.slice(i+1)]}throw Error("It seems we have created an infinite loop in deleteBy. ")}(t),delete this.fieldInfo[e],delete i.fieldMetaBase[e]}),i})},this.pushFieldValue=(e,t,i)=>{this.setFieldValue(e,e=>[...Array.isArray(e)?e:[],t],i)},this.insertFieldValue=async(e,t,i,s)=>{this.setFieldValue(e,e=>[...e.slice(0,t),i,...e.slice(t)],k(s,{dontValidate:!0}));let a=s?.dontValidate??!1;a||await this.validateField(e,"change"),z(this).handleArrayInsert(e,t),a||await this.validateArrayFieldsStartingFrom(e,t,"change")},this.replaceFieldValue=async(e,t,i,s)=>{this.setFieldValue(e,e=>e.map((e,s)=>s===t?i:e),k(s,{dontValidate:!0})),s?.dontValidate||(await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change"))},this.removeFieldValue=async(e,t,i)=>{let s=this.getFieldValue(e),a=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(e,e=>e.filter((e,i)=>i!==t),k(i,{dontValidate:!0})),z(this).handleArrayRemove(e,t),null!==a){let t=`${e}[${a}]`;this.deleteField(t)}i?.dontValidate||(await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change"))},this.swapFieldValues=(e,t,i,s)=>{this.setFieldValue(e,e=>{let s=e[t],a=e[i];return M(M(e,`${t}`,a),`${i}`,s)},k(s,{dontValidate:!0})),z(this).handleArraySwap(e,t,i),s?.dontValidate||(this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${i}]`,"change"))},this.moveFieldValues=(e,t,i,s)=>{this.setFieldValue(e,e=>{let s=[...e];return s.splice(i,0,s.splice(t,1)[0]),s},k(s,{dontValidate:!0})),z(this).handleArrayMove(e,t,i),s?.dontValidate||(this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${i}]`,"change"))},this.clearFieldValues=(e,t)=>{let i=this.getFieldValue(e),s=Array.isArray(i)?Math.max(i.length-1,0):null;if(this.setFieldValue(e,[],k(t,{dontValidate:!0})),null!==s)for(let t=0;t<=s;t++){let i=`${e}[${t}]`;this.deleteField(i)}t?.dontValidate||this.validateField(e,"change")},this.resetField=e=>{this.baseStore.setState(t=>({...t,fieldMetaBase:{...t.fieldMetaBase,[e]:q},values:this.options.defaultValues?M(t.values,e,b(this.options.defaultValues,e)):t.values}))},this.setErrorMap=e=>{f(()=>{Object.entries(e).forEach(([e,t])=>{if(x(t)){let{formError:i,fieldErrors:s}=K(t);for(let t of Object.keys(this.fieldInfo))this.getFieldMeta(t)&&this.setFieldMeta(t,i=>({...i,errorMap:{...i.errorMap,[e]:s?.[t]},errorSourceMap:{...i.errorSourceMap,[e]:"form"}}));this.baseStore.setState(t=>({...t,errorMap:{...t.errorMap,[e]:i}}))}else this.baseStore.setState(i=>({...i,errorMap:{...i.errorMap,[e]:t}}))})})},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((e,[t,i])=>(Object.keys(i).length&&i.errors.length&&(e[t]={errors:i.errors,errorMap:i.errorMap}),e),{})}),this.parseValuesWithSchema=e=>N.validate({value:this.state.values,validationSource:"form"},e),this.parseValuesWithSchemaAsync=e=>N.validateAsync({value:this.state.values,validationSource:"form"},e),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=e?.formId??_(),this._devtoolsSubmissionOverride=!1,this.baseStore=new s(G({...e?.defaultState,values:e?.defaultValues??e?.defaultState?.values})),this.fieldMetaDerived=new a({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:t,prevVal:i})=>{let s=e?.[0],a=t[0],r=0,n={};for(let e of Object.keys(a.fieldMetaBase)){var o;let t=a.fieldMetaBase[e],l=s?.fieldMetaBase[e],u=i?.[e],d=b(a.values,e),h=u?.errors;if(!l||t.errorMap!==l.errorMap){h=Object.values(t.errorMap??{}).filter(e=>void 0!==e);let i=this.getFieldInfo(e)?.instance;i&&!i.options.disableErrorFlat&&(h=h.flat(1))}let c=!!(Array.isArray(o=h)&&0===o.length),f=!t.isDirty,m=O(d,b(this.options.defaultValues,e))||O(d,this.getFieldInfo(e)?.instance?.options.defaultValue);if(u&&u.isPristine===f&&u.isValid===c&&u.isDefaultValue===m&&u.errors===h&&t===l){n[e]=u,r++;continue}n[e]={...t,errors:h??[],isPristine:f,isValid:c,isDefaultValue:m}}return Object.keys(a.fieldMetaBase).length&&i&&r===Object.keys(a.fieldMetaBase).length?i:n}}),this.store=new a({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:t,prevVal:i})=>{let s=e?.[0],a=t[0],r=Object.values(t[1]).filter(Boolean),n=r.some(e=>e.isValidating),o=r.every(e=>e.isValid),l=r.some(e=>e.isTouched),u=r.some(e=>e.isBlurred),d=r.every(e=>e.isDefaultValue),h=l&&a.errorMap?.onMount,c=r.some(e=>e.isDirty),f=!c,m=!!(a.errorMap?.onMount||r.some(e=>e?.errorMap?.onMount)),v=i?.errors??[];s&&a.errorMap===s.errorMap||(v=Object.values(a.errorMap).reduce((e,t)=>(void 0===t||(t&&x(t)?e.push(t.form):e.push(t)),e),[]));let p=0===v.length,g=o&&p,b=this.options.canSubmitWhenInvalid??!1,M=0===a.submissionAttempts&&!l&&!m||!n&&!a.isSubmitting&&g||b,y=a.errorMap;if(h&&(v=v.filter(e=>e!==a.errorMap.onMount),y=Object.assign(y,{onMount:void 0})),i&&s&&i.errorMap===y&&i.fieldMeta===this.fieldMetaDerived.state&&i.errors===v&&i.isFieldsValidating===n&&i.isFieldsValid===o&&i.isFormValid===p&&i.isValid===g&&i.canSubmit===M&&i.isTouched===l&&i.isBlurred===u&&i.isPristine===f&&i.isDefaultValue===d&&i.isDirty===c&&O(s,a))return i;let S={...a,errorMap:y,fieldMeta:this.fieldMetaDerived.state,errors:v,isFieldsValidating:n,isFieldsValid:o,isFormValid:p,isValid:g,canSubmit:M,isTouched:l,isBlurred:u,isPristine:f,isDefaultValue:d,isDirty:c},V=this.options.transform?.deps??[];if(V.length!==this.prevTransformArray.length||V.some((e,t)=>e!==this.prevTransformArray[t])){let e=Object.assign({},this,{state:S});this.options.transform?.fn(e),S=e.state,this.prevTransformArray=V}return S}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(e||{})}get state(){return this.store.state}get formId(){return this._formId}runValidator(e){return W(e.validate)?N[e.type](e.value,e.validate):e.validate(e.value)}handleSubmit(e){return this._handleSubmit(e)}}function K(e){if(e)return x(e)?{formError:K(e.form).formError,fieldErrors:e.fields}:{formError:e};return{formError:void 0}}function H(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}var J=e.i(430224);function Q(e,t=e=>e,i={}){let s=i.equal??X;return(0,J.useSyncExternalStoreWithSelector)(e.subscribe,()=>e.state,()=>e.state,t,s)}function X(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[i,s]of e)if(!t.has(i)||!Object.is(s,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();let i=Y(e);if(i.length!==Y(t).length)return!1;for(let s=0;s<i.length;s++)if(!Object.prototype.hasOwnProperty.call(t,i[s])||!Object.is(e[i[s]],t[i[s]]))return!1;return!0}function Y(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}var Z=e.i(271645);class ee{constructor(e){this.options={},this.mount=()=>{let e=this.store.mount();void 0===this.options.defaultValue||this.getMeta().isTouched||this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0}),this.getInfo().instance=this,this.update(this.options);let{onMount:t}=this.options.validators||{};if(t){let e=this.runValidator({validate:t,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});e&&this.setMeta(t=>({...t,errorMap:{...t?.errorMap,onMount:e},errorSourceMap:{...t?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),e},this.update=e=>{this.options=e,this.name=e.name,!this.state.meta.isTouched&&void 0!==this.options.defaultValue&&(O(this.form.getFieldValue(this.name),e.defaultValue)||this.form.setFieldValue(this.name,e.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})),this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(e,t)=>{this.form.setFieldValue(this.name,e,k(t,{dontRunListeners:!0,dontValidate:!0})),t?.dontRunListeners||this.triggerOnChangeListener(),t?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=e=>this.form.setFieldMeta(this.name,e),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(e,t)=>{this.form.pushFieldValue(this.name,e,k(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(e,t,i)=>{this.form.insertFieldValue(this.name,e,t,k(i,{dontRunListeners:!0})),i?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(e,t,i)=>{this.form.replaceFieldValue(this.name,e,t,k(i,{dontRunListeners:!0})),i?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(e,t)=>{this.form.removeFieldValue(this.name,e,k(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(e,t,i)=>{this.form.swapFieldValues(this.name,e,t,k(i,{dontRunListeners:!0})),i?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(e,t,i)=>{this.form.moveFieldValues(this.name,e,t,k(i,{dontRunListeners:!0})),i?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=e=>{this.form.clearFieldValues(this.name,k(e,{dontRunListeners:!0})),e?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=e=>{let t=Object.values(this.form.fieldInfo),i=[];for(let s of t){if(!s.instance)continue;let{onChangeListenTo:t,onBlurListenTo:a}=s.instance.options.validators||{};"change"===e&&t?.includes(this.name)&&i.push(s.instance),"blur"===e&&a?.includes(this.name)&&i.push(s.instance)}return i},this.validateSync=(e,t)=>{let i=L(e,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||P}),s=this.getLinkedFields(e).reduce((t,i)=>{let s=L(e,{...i.options,form:i.form,validationLogic:i.form.options.validationLogic||P});return s.forEach(e=>{e.field=i}),t.concat(s)},[]),a=!1;f(()=>{let e=(e,i)=>{let s=ei(i.cause),r=i.validate?et(e.runValidator({validate:i.validate,value:{value:e.store.state.value,validationSource:"field",fieldApi:e},type:"validate"})):void 0,{newErrorValue:n,newSource:o}=C({formLevelError:t[s],fieldLevelError:r});e.state.meta.errorMap?.[s]!==n&&e.setMeta(e=>({...e,errorMap:{...e.errorMap,[s]:n},errorSourceMap:{...e.errorSourceMap,[s]:o}})),n&&(a=!0)};for(let t of i)e(this,t);for(let t of s)t.validate&&e(t.field,t)});let r=ei("submit");return this.state.meta.errorMap?.[r]&&"submit"!==e&&!a&&this.setMeta(e=>({...e,errorMap:{...e.errorMap,[r]:void 0},errorSourceMap:{...e.errorSourceMap,[r]:void 0}})),{hasErrored:a}},this.validateAsync=async(e,t)=>{let i=T(e,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||P}),s=await t,a=this.getLinkedFields(e),r=a.reduce((t,i)=>{let s=T(e,{...i.options,form:i.form,validationLogic:i.form.options.validationLogic||P});return s.forEach(e=>{e.field=i}),t.concat(s)},[]),n=[],o=[],l=i.some(e=>e.validate)||r.some(e=>e.validate);if(l)for(let e of(this.state.meta.isValidating||this.setMeta(e=>({...e,isValidating:!0})),a))e.setMeta(e=>({...e,isValidating:!0}));let u=(e,t,i)=>{let a=ei(t.cause),r=e.getInfo().validationMetaMap[a];r?.lastAbortController.abort();let n=new AbortController;this.getInfo().validationMetaMap[a]={lastAbortController:n},i.push(new Promise(async i=>{let r;try{r=await new Promise((i,s)=>{this.timeoutIds.validations[t.cause]&&clearTimeout(this.timeoutIds.validations[t.cause]),this.timeoutIds.validations[t.cause]=setTimeout(async()=>{if(n.signal.aborted)return i(void 0);try{i(await this.runValidator({validate:t.validate,value:{value:e.store.state.value,fieldApi:e,signal:n.signal,validationSource:"field"},type:"validateAsync"}))}catch(e){s(e)}},t.debounceMs)})}catch(e){r=e}if(n.signal.aborted)return i(void 0);let o=et(r),{newErrorValue:l,newSource:u}=C({formLevelError:s[this.name]?.[a],fieldLevelError:o});e.setMeta(e=>({...e,errorMap:{...e?.errorMap,[a]:l},errorSourceMap:{...e.errorSourceMap,[a]:u}})),i(l)}))};for(let e of i)e.validate&&u(this,e,n);for(let e of r)e.validate&&u(e.field,e,o);let d=[];if((n.length||o.length)&&(d=await Promise.all(n),await Promise.all(o)),l)for(let e of(this.setMeta(e=>({...e,isValidating:!1})),a))e.setMeta(e=>({...e,isValidating:!1}));return d.filter(Boolean)},this.validate=(e,t)=>{if(!this.state.meta.isTouched)return[];let{fieldsErrorMap:i}=t?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(e),{hasErrored:s}=this.validateSync(e,i[this.name]??{});if(s&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[ei(e)]?.lastAbortController.abort(),this.state.meta.errors;let a=t?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(e);return this.validateAsync(e,a)},this.handleChange=e=>{this.setValue(e)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(e=>({...e,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(e=>({...e,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.setErrorMap=e=>{this.setMeta(t=>({...t,errorMap:{...t.errorMap,...e}}))},this.parseValueWithSchema=e=>N.validate({value:this.state.value,validationSource:"field"},e),this.parseValueWithSchemaAsync=e=>N.validateAsync({value:this.state.value,validationSource:"field"},e),this.triggerOnChangeListener=()=>{let e=this.form.options.listeners?.onChangeDebounceMs;e&&e>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},e)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});let t=this.options.listeners?.onChangeDebounceMs;t&&t>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},t)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},this.form=e.form,this.name=e.name,this.options=e,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new a({deps:[this.form.store],fn:({prevVal:t})=>{let i=this.form.getFieldMeta(this.name)??{...q,...e.defaultMeta},s=this.form.getFieldValue(this.name);return(i.isTouched||void 0!==s||void 0===this.options.defaultValue||O(s,this.options.defaultValue)||(s=this.options.defaultValue),t&&t.value===s&&t.meta===i)?t:{value:s,meta:i}}})}get state(){return this.store.state}runValidator(e){return W(e.validate)?N[e.type](e.value,e.validate):e.validate(e.value)}triggerOnBlurListener(){let e=this.form.options.listeners?.onBlurDebounceMs;e&&e>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},e)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});let t=this.options.listeners?.onBlurDebounceMs;t&&t>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},t)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}}function et(e){if(e)return e}function ei(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}let es="undefined"!=typeof window?Z.useLayoutEffect:Z.useEffect,ea=({children:e,...t})=>{let s=function(e){let[t,i]=(0,Z.useState)(()=>({form:e.form,name:e.name})),[s,a]=(0,Z.useState)(()=>new ee({...e}));(t.form!==e.form||t.name!==e.name)&&(a(new ee({...e})),i({form:e.form,name:e.name}));let r=Q(s.store,"array"===e.mode?e=>Object.keys(e.value??[]).length:e=>e.value),n=Q(s.store,e=>e.meta.isTouched),o=Q(s.store,e=>e.meta.isBlurred),l=Q(s.store,e=>e.meta.isDirty),u=Q(s.store,e=>e.meta.errorMap),d=Q(s.store,e=>e.meta.errorSourceMap),h=Q(s.store,e=>e.meta.isValidating),c=(0,Z.useMemo)(()=>{let t={...s,get state(){return{value:"array"===e.mode?s.state.value:r,get meta(){return{...s.state.meta,isTouched:n,isBlurred:o,isDirty:l,errorMap:u,errorSourceMap:d,isValidating:h}}}}};return t.Field=ea,t},[s,e.mode,r,n,o,l,u,d,h]);return es(s.mount,[s]),es(()=>{s.update(e)}),c}(t),a=(0,Z.useMemo)(()=>g(e,s),[e,s]);return(0,i.jsx)(i.Fragment,{children:a})},er="17"===Z.version.split(".")[0]?function(){return(0,Z.useState)(()=>_())[0]}:Z.useId;function en({form:e,selector:t,children:s}){let a=Q(e.store,t);return(0,i.jsx)(i.Fragment,{children:g(s,a)})}function eo(e){let t=er(),[s,a]=(0,Z.useState)(e?.formId),[r,n]=(0,Z.useState)(()=>new U({...e,formId:e?.formId??t}));if(s!==e?.formId){let i=e?.formId??t;n(new U({...e,formId:i})),a(i)}let o=(0,Z.useMemo)(()=>{let e={...r,handleSubmit:(...e)=>r._handleSubmit(...e),get formId(){return r._formId},get state(){return r.store.state}};return e.Field=function(e){return(0,i.jsx)(ea,{...e,form:r})},e.Subscribe=function(e){return(0,i.jsx)(en,{form:r,selector:e.selector,children:e.children})},e},[r]);return es(r.mount,[]),es(()=>{r.update(e)}),o}e.s(["useForm",()=>eo],741452);var el=e.i(225913),eu=e.i(152088),ed=e.i(173554);function eh({className:e,...t}){return(0,i.jsx)("fieldset",{"data-slot":"field-set",className:(0,eu.cn)("flex flex-col gap-6","has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3",e),...t})}function ec({className:e,variant:t="legend",...s}){return(0,i.jsx)("legend",{"data-slot":"field-legend","data-variant":t,className:(0,eu.cn)("mb-3 font-medium","data-[variant=legend]:text-base","data-[variant=label]:text-sm",e),...s})}function ef({className:e,...t}){return(0,i.jsx)("div",{"data-slot":"field-group",className:(0,eu.cn)("group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4",e),...t})}e.i(876581);let em=(0,el.cva)("group/field flex w-full gap-3 data-[invalid=true]:text-destructive",{variants:{orientation:{vertical:["flex-col [&>*]:w-full [&>.sr-only]:w-auto"],horizontal:["flex-row items-center","[&>[data-slot=field-label]]:flex-auto","has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"],responsive:["flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto","@md/field-group:[&>[data-slot=field-label]]:flex-auto","@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"]}},defaultVariants:{orientation:"vertical"}});function ev({className:e,orientation:t="vertical",...s}){return(0,i.jsx)("div",{role:"group","data-slot":"field","data-orientation":t,className:(0,eu.cn)(em({orientation:t}),e),...s})}function ep({className:e,...t}){return(0,i.jsx)(ed.Label,{"data-slot":"field-label",className:(0,eu.cn)("group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50","has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4","has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10",e),...t})}function eg({className:e,...t}){return(0,i.jsx)("p",{"data-slot":"field-description",className:(0,eu.cn)("text-muted-foreground text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance","last:mt-0 nth-last-2:-mt-1 [[data-variant=legend]+&]:-mt-1.5","[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4",e),...t})}function eb({className:e,children:t,errors:s,...a}){let r=(0,Z.useMemo)(()=>t||(s?s?.length===1&&s[0]?.message?s[0].message:(0,i.jsx)("ul",{className:"ml-4 flex list-disc flex-col gap-1",children:s.map((e,t)=>e?.message&&(0,i.jsx)("li",{children:e.message},t))}):null),[t,s]);return r?(0,i.jsx)("div",{role:"alert","data-slot":"field-error",className:(0,eu.cn)("text-destructive text-sm font-normal",e),...a,children:r}):null}e.s(["Field",()=>ev,"FieldDescription",()=>eg,"FieldError",()=>eb,"FieldGroup",()=>ef,"FieldLabel",()=>ep,"FieldLegend",()=>ec,"FieldSet",()=>eh],412762)}]);