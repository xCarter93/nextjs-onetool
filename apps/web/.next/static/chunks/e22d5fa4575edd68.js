(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,286536,e=>{"use strict";let t=(0,e.i(475254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},688511,e=>{"use strict";let t=(0,e.i(475254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],688511)},263488,e=>{"use strict";let t=(0,e.i(475254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],263488)},49789,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(24079),r=e.i(407107);function l({buttons:e,onCancel:l,onSave:i,cancelText:n="Cancel",saveText:d="Save",isLoading:o=!1,className:c="",fullWidth:x=!1,hasUnsavedChanges:m=!1,isEditing:u=!1}){let h=(0,s.useSidebar)(),g=e||[...l?[{label:n,onClick:l,intent:"outline",disabled:o}]:[],...i?[{label:o?"Saving...":d,onClick:i,intent:"primary",type:"submit",disabled:o}]:[]];if(0===g.length)return null;let p=!h||h.isMobile?"0px":"expanded"===h.state?"var(--sidebar-width, 18rem)":"var(--sidebar-width-icon, 3rem)";return(0,t.jsx)("div",{className:`fixed bottom-0 right-0 z-40 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 shadow-lg ${c} transition-[left] duration-200 ease-linear`,style:{left:p},children:(0,t.jsx)("div",{className:"w-full px-6",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-x-3 py-4 flex-wrap",children:[(0,t.jsx)("div",{className:"flex items-center gap-x-3 flex-wrap",children:g.filter(e=>!e.position||"left"===e.position).map((e,s)=>{let l=(0,t.jsx)(r.StyledButton,{label:e.label,onClick:e.onClick,intent:e.intent,size:e.size,icon:e.icon,isLoading:e.isLoading,disabled:e.disabled,type:e.type});return(0,t.jsx)(a.Fragment,{children:e.customComponent?e.customComponent(l):l},`left-${s}`)})}),u&&m&&(0,t.jsxs)("div",{className:"flex items-center gap-2.5 px-4 py-2 rounded-lg bg-yellow-100 dark:bg-yellow-900/40 border-2 border-yellow-400 dark:border-yellow-600 shrink-0 shadow-md animate-pulse",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 bg-yellow-500 rounded-full shrink-0 animate-pulse"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-yellow-900 dark:text-yellow-100 leading-tight",children:"Unsaved changes"}),(0,t.jsx)("p",{className:"text-xs font-medium text-yellow-800 dark:text-yellow-200 leading-tight",children:"Save or cancel your changes"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-x-3 flex-wrap",children:g.filter(e=>"right"===e.position).map((e,s)=>{let l=(0,t.jsx)(r.StyledButton,{label:e.label,onClick:e.onClick,intent:e.intent,size:e.size,icon:e.icon,isLoading:e.isLoading,disabled:e.disabled,type:e.type});return(0,t.jsx)(a.Fragment,{children:e.customComponent?e.customComponent(l):l},`right-${s}`)})})]})})})})}e.s(["StickyFormFooter",()=>l])},643531,e=>{"use strict";var t=e.i(678745);e.s(["Check",()=>t.default])},440160,e=>{"use strict";let t=(0,e.i(475254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],440160)},264036,e=>{"use strict";var t=e.i(843476),a=e.i(152088);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-action",className:(0,a.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardAction",()=>n,"CardContent",()=>d,"CardDescription",()=>i,"CardFooter",()=>o,"CardHeader",()=>r,"CardTitle",()=>l])},373884,e=>{"use strict";let t=(0,e.i(475254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],373884)},829164,e=>{"use strict";var t=e.i(843476),a=e.i(152088);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function l({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function i({className:e,...s}){return(0,t.jsx)("tfoot",{"data-slot":"table-footer",className:(0,a.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",e),...s})}function n({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function d({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function o({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function c({className:e,...s}){return(0,t.jsx)("caption",{"data-slot":"table-caption",className:(0,a.cn)("text-muted-foreground mt-4 text-sm",e),...s})}e.s(["Table",()=>s,"TableBody",()=>l,"TableCaption",()=>c,"TableCell",()=>o,"TableFooter",()=>i,"TableHead",()=>d,"TableHeader",()=>r,"TableRow",()=>n])},503116,e=>{"use strict";let t=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],503116)},212426,e=>{"use strict";let t=(0,e.i(475254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],212426)},955993,e=>{"use strict";var t=e.i(843476),a=e.i(643531),s=e.i(503116),r=e.i(152088),l=e.i(680707);function i({status:e,steps:i,events:n=[],failureStatuses:d=[],successStatuses:o=[],variantOverride:c,showStatusButton:x=!1,statusOptions:m=[],onStatusChange:u,statusButtonLabel:h="Change Status"}){let g=d.includes(e),p=o.includes(e),b=i.some(t=>t.id===e),j=g&&!b?[...i.slice(0,-1),{id:e,name:e,order:i.length}]:i,y=c||(p?"success":g?"destructive":"in-progress"),f=e=>"complete"===e||"current"===e?"text-white":"text-gray-700";return(0,t.jsx)("nav",{"aria-label":"Progress",className:"w-full max-w-5xl mx-auto",children:(0,t.jsxs)("div",{className:(0,r.cn)("flex items-stretch",x?"shadow-sm rounded-full overflow-hidden":""),children:[(0,t.jsx)("ol",{role:"list",className:(0,r.cn)("flex items-stretch flex-1",x?"":"rounded-full shadow-sm overflow-hidden"),style:{backgroundColor:"#f1f5f9"},children:j.map((l,i)=>{var d,o;let c,x,m,u=(c=j.find(t=>t.id===e),x=c?.order||1,l.id===e?"current":l.order<x?"complete":"upcoming"),h=(d=l.id,m=n.find(e=>e.type===d),m?.timestamp),g="complete"===(o=u)?"#22c55e":"current"===o?"success"===y?"#22c55e":"destructive"===y?"#ef4444":"#2563eb":"#f1f5f9",p=0===i,b=i===j.length-1,N=((e,t,a)=>{if(1!==t&&e!==t-1)return"polygon(0 0, calc(100% - 20px) 0, 100% 50%, calc(100% - 20px) 100%, 0 100%)"})(i,j.length,0),w=j.length-i;return(0,t.jsxs)("li",{className:(0,r.cn)("relative flex flex-1",!b&&"-mr-[20px]"),style:{backgroundColor:g,background:g,clipPath:N,WebkitClipPath:N,zIndex:w},children:[N&&!b?(0,t.jsx)("svg",{className:"absolute right-0 top-0 w-[20px] h-full pointer-events-none",style:{zIndex:w+1},preserveAspectRatio:"none",viewBox:"0 0 20 100",children:(0,t.jsx)("path",{d:"M 0 0 L 20 50 L 0 100",fill:"none",stroke:"white",strokeWidth:"3",vectorEffect:"non-scaling-stroke"})}):null,(0,t.jsxs)("div",{className:(0,r.cn)("relative flex w-full items-center justify-between","px-3 py-1.5",!p&&"pl-[24px]"),children:[(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:["complete"===u?(0,t.jsx)("span",{className:"flex size-6 shrink-0 items-center justify-center rounded-full bg-white/20 ring-2 ring-white/40",children:(0,t.jsx)(a.Check,{"aria-hidden":"true",className:"size-3 text-white stroke-[2.5]"})}):"current"===u?(0,t.jsx)("span",{className:"flex size-6 shrink-0 items-center justify-center rounded-full border-2 border-white/50 bg-white/10",children:(0,t.jsx)(s.Clock,{className:"size-3 text-white"})}):(0,t.jsx)("span",{className:"flex size-6 shrink-0 items-center justify-center rounded-full border-2 border-gray-300 bg-white",children:(0,t.jsx)("span",{className:"text-gray-500 text-[10px] font-medium",children:l.order})}),(0,t.jsxs)("span",{className:"flex flex-col items-start",children:[(0,t.jsx)("span",{className:(0,r.cn)("text-[10px] font-bold uppercase tracking-wide leading-tight","complete"===u||"current"===u?"text-white/80":"text-gray-500"),children:"complete"===u?"COMPLETED":"current"===u?"CURRENT STAGE":"UPCOMING"}),(0,t.jsx)("span",{className:(0,r.cn)("text-sm font-bold leading-tight",f(u)),children:l.name})]})]}),h&&(0,t.jsx)("span",{className:(0,r.cn)("text-xs font-medium",f(u),"opacity-80 ml-1.5"),children:h?new Date(h).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""})]})]},l.id)})}),x&&m.length>0&&u&&(0,t.jsxs)("div",{className:"-ml-[5px] relative flex items-center",style:{zIndex:j.length+10,backgroundColor:"#f1f5f9"},children:[(0,t.jsx)("div",{className:"absolute left-[5px] top-0 h-full",style:{zIndex:j.length+11,backgroundColor:"#ffffff"}}),(0,t.jsxs)(l.Select,{value:e,onValueChange:u,children:[(0,t.jsx)(l.SelectTrigger,{className:"w-auto whitespace-nowrap border-0 transition-all duration-200 font-semibold rounded-none h-full pl-7 pr-6 shadow-none focus:ring-0",style:{clipPath:"polygon(20px 0, 100% 0, 100% 100%, 20px 100%, 15px 90%, 10px 75%, 7px 60%, 5px 50%, 7px 40%, 10px 25%, 15px 10%)",WebkitClipPath:"polygon(20px 0, 100% 0, 100% 100%, 20px 100%, 15px 90%, 10px 75%, 7px 60%, 5px 50%, 7px 40%, 10px 25%, 15px 10%)",backgroundColor:"#f1f5f9",color:"#334155"},children:h}),(0,t.jsx)(l.SelectContent,{children:m.map(e=>(0,t.jsx)(l.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]})})}e.s(["StatusProgressBar",()=>i])},269638,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],269638)},338104,e=>{"use strict";var t=e.i(843476),a=e.i(618566),s=e.i(271645);e.i(250711);var r=e.i(982045),l=e.i(283164),i=e.i(907347),n=e.i(264036),d=e.i(955993),o=e.i(829164),c=e.i(985902),x=e.i(361922),m=e.i(178583),u=e.i(440160),h=e.i(286536),g=e.i(212426),p=e.i(607486),b=e.i(688511),j=e.i(75505),y=e.i(263488),f=e.i(269638),N=e.i(373884),w=e.i(49789),v=e.i(574780),k=e.i(242554);let C=v.StyleSheet.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:28,fontSize:11,fontFamily:"Helvetica"},logoSection:{marginBottom:16,alignItems:"flex-start"},logoContainer:{width:160,height:60},logo:{width:"100%",height:"100%",objectFit:"contain",objectPosition:"left center"},header:{flexDirection:"row",justifyContent:"space-between",marginBottom:24,paddingBottom:12,borderBottomWidth:2,borderBottomColor:"#000000"},headerLeft:{flexDirection:"column",maxWidth:280},headerRight:{flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},title:{fontSize:32,fontWeight:"bold",color:"#000000",marginBottom:8,letterSpacing:1},subtitle:{fontSize:10,color:"#374151",marginBottom:2,lineHeight:1.5},invoiceNumber:{fontSize:20,fontWeight:"bold",color:"#000000",marginBottom:8},invoiceMeta:{backgroundColor:"#F9FAFB",borderWidth:1,borderColor:"#E5E7EB",borderRadius:4,padding:10,minWidth:200},metaRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:4},metaLabel:{fontSize:10,color:"#6B7280",fontWeight:"bold"},metaValue:{fontSize:10,color:"#1F2937",marginLeft:16},statusBadge:{backgroundColor:"#10B981",paddingVertical:4,paddingHorizontal:8,borderRadius:4,marginTop:6},statusText:{fontSize:9,color:"#FFFFFF",fontWeight:"bold",textTransform:"uppercase"},billToSection:{marginTop:8,marginBottom:16,padding:12,backgroundColor:"#F9FAFB",borderRadius:4},sectionTitle:{fontSize:11,fontWeight:"bold",color:"#1F2937",marginBottom:8,textTransform:"uppercase",letterSpacing:.5},billToContent:{fontSize:11,color:"#374151",lineHeight:1.6},itemsTable:{marginTop:12,marginBottom:16,borderWidth:1,borderColor:"#E5E7EB",borderRadius:4},tableHeader:{flexDirection:"row",backgroundColor:"#1F2937",paddingVertical:10,paddingHorizontal:12},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#E5E7EB",paddingVertical:10,paddingHorizontal:12,backgroundColor:"#FFFFFF"},tableCell:{fontSize:10,color:"#374151",lineHeight:1.4},tableCellDescription:{flex:3},tableCellQuantity:{flex:1,textAlign:"center"},tableCellPrice:{flex:1.5,textAlign:"right"},tableCellTotal:{flex:1.5,textAlign:"right",fontWeight:"bold",color:"#1F2937"},tableHeaderCell:{fontSize:10,fontWeight:"bold",color:"#FFFFFF",textTransform:"uppercase",letterSpacing:.8},totalsSection:{flexDirection:"row",justifyContent:"flex-end",marginTop:12,marginBottom:16},totalsContainer:{width:260,borderWidth:1,borderColor:"#E5E7EB",borderRadius:4,padding:12,backgroundColor:"#F9FAFB"},totalRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:4},totalLabel:{fontSize:11,color:"#6B7280"},totalValue:{fontSize:11,color:"#374151",fontWeight:"bold"},grandTotalRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:8,paddingTop:10,borderTopWidth:2,borderTopColor:"#1F2937",marginTop:6},grandTotalLabel:{fontSize:14,fontWeight:"bold",color:"#000000"},grandTotalValue:{fontSize:16,fontWeight:"bold",color:"#000000"},amountDueSection:{marginTop:12,padding:12,backgroundColor:"#FEF3C7",borderRadius:4,borderLeftWidth:4,borderLeftColor:"#F59E0B"},amountDueText:{fontSize:12,fontWeight:"bold",color:"#92400E",marginBottom:4},amountDueValue:{fontSize:18,fontWeight:"bold",color:"#92400E"},paymentNotice:{marginTop:12,padding:12,backgroundColor:"#D1FAE5",borderRadius:4,borderLeftWidth:4,borderLeftColor:"#10B981"},paymentNoticeText:{fontSize:11,color:"#065F46",fontWeight:"bold"},footer:{marginTop:24,paddingTop:12,borderTopWidth:1,borderTopColor:"#E5E7EB"},footerText:{fontSize:9,color:"#6B7280",textAlign:"center",lineHeight:1.4}}),T=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),D=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),F=({invoice:e,client:a,items:s,organization:r})=>{let l="paid"===e.status,i=!l&&"sent"===e.status&&e.dueDate<Date.now();return(0,t.jsx)(k.Document,{children:(0,t.jsxs)(k.Page,{size:"A4",style:C.page,children:[r?.logoUrl?(0,t.jsx)(k.View,{style:C.logoSection,children:(0,t.jsx)(k.View,{style:C.logoContainer,children:(0,t.jsx)(k.Image,{style:C.logo,src:r.logoUrl})})}):null,(0,t.jsxs)(k.View,{style:C.header,children:[(0,t.jsxs)(k.View,{style:C.headerLeft,children:[(0,t.jsx)(k.Text,{style:C.title,children:"INVOICE"}),r?.name?(0,t.jsx)(k.Text,{style:C.subtitle,children:r.name}):null,r?.address?(0,t.jsx)(k.Text,{style:C.subtitle,children:r.address}):null,r?.phone?(0,t.jsxs)(k.Text,{style:C.subtitle,children:["Phone: ",r.phone]}):null,r?.email?(0,t.jsxs)(k.Text,{style:C.subtitle,children:["Email: ",r.email]}):null]}),(0,t.jsxs)(k.View,{style:C.headerRight,children:[(0,t.jsx)(k.Text,{style:C.invoiceNumber,children:e.invoiceNumber}),(0,t.jsxs)(k.View,{style:C.invoiceMeta,children:[(0,t.jsxs)(k.View,{style:C.metaRow,children:[(0,t.jsx)(k.Text,{style:C.metaLabel,children:"Issued:"}),(0,t.jsx)(k.Text,{style:C.metaValue,children:D(e.issuedDate)})]}),(0,t.jsxs)(k.View,{style:C.metaRow,children:[(0,t.jsx)(k.Text,{style:C.metaLabel,children:"Due Date:"}),(0,t.jsx)(k.Text,{style:C.metaValue,children:D(e.dueDate)})]}),l&&e.paidAt&&(0,t.jsxs)(k.View,{style:C.metaRow,children:[(0,t.jsx)(k.Text,{style:C.metaLabel,children:"Paid:"}),(0,t.jsx)(k.Text,{style:C.metaValue,children:D(e.paidAt)})]})]}),l&&(0,t.jsx)(k.View,{style:C.statusBadge,children:(0,t.jsx)(k.Text,{style:C.statusText,children:"PAID"})})]})]}),(0,t.jsxs)(k.View,{style:C.billToSection,wrap:!1,children:[(0,t.jsx)(k.Text,{style:C.sectionTitle,children:"Bill To:"}),(0,t.jsx)(k.View,{style:C.billToContent,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Text,{children:a.companyName}),a.industry?(0,t.jsx)(k.Text,{children:a.industry}):null]}):(0,t.jsx)(k.Text,{children:"Client details unavailable"})})]}),(0,t.jsxs)(k.View,{style:C.itemsTable,wrap:!1,children:[(0,t.jsxs)(k.View,{style:C.tableHeader,children:[(0,t.jsx)(k.Text,{style:[C.tableHeaderCell,C.tableCellDescription],children:"Description"}),(0,t.jsx)(k.Text,{style:[C.tableHeaderCell,C.tableCellQuantity],children:"Qty"}),(0,t.jsx)(k.Text,{style:[C.tableHeaderCell,C.tableCellPrice],children:"Unit Price"}),(0,t.jsx)(k.Text,{style:[C.tableHeaderCell,C.tableCellTotal],children:"Total"})]}),s.map(e=>(0,t.jsxs)(k.View,{style:C.tableRow,children:[(0,t.jsx)(k.Text,{style:[C.tableCell,C.tableCellDescription],children:e.description}),(0,t.jsx)(k.Text,{style:[C.tableCell,C.tableCellQuantity],children:e.quantity}),(0,t.jsx)(k.Text,{style:[C.tableCell,C.tableCellPrice],children:T(e.unitPrice)}),(0,t.jsx)(k.Text,{style:[C.tableCell,C.tableCellTotal],children:T(e.total)})]},String(e._id)))]}),(0,t.jsx)(k.View,{style:C.totalsSection,wrap:!1,children:(0,t.jsxs)(k.View,{style:C.totalsContainer,children:[(0,t.jsxs)(k.View,{style:C.totalRow,children:[(0,t.jsx)(k.Text,{style:C.totalLabel,children:"Subtotal:"}),(0,t.jsx)(k.Text,{style:C.totalValue,children:T(e.subtotal)})]}),e.discountAmount?(0,t.jsxs)(k.View,{style:C.totalRow,children:[(0,t.jsx)(k.Text,{style:C.totalLabel,children:"Discount:"}),(0,t.jsxs)(k.Text,{style:C.totalValue,children:["- ",T(e.discountAmount)]})]}):null,e.taxAmount?(0,t.jsxs)(k.View,{style:C.totalRow,children:[(0,t.jsx)(k.Text,{style:C.totalLabel,children:"Tax:"}),(0,t.jsx)(k.Text,{style:C.totalValue,children:T(e.taxAmount)})]}):null,(0,t.jsxs)(k.View,{style:C.grandTotalRow,children:[(0,t.jsx)(k.Text,{style:C.grandTotalLabel,children:"Total:"}),(0,t.jsx)(k.Text,{style:C.grandTotalValue,children:T(e.total)})]})]})}),!l&&(0,t.jsxs)(k.View,{style:C.amountDueSection,wrap:!1,children:[(0,t.jsx)(k.Text,{style:C.amountDueText,children:i?"AMOUNT OVERDUE":"AMOUNT DUE"}),(0,t.jsx)(k.Text,{style:C.amountDueValue,children:T(e.total)}),(0,t.jsxs)(k.Text,{style:{fontSize:10,color:"#92400E",marginTop:4},children:["Payment due by ",D(e.dueDate)]})]}),l&&(0,t.jsxs)(k.View,{style:C.paymentNotice,wrap:!1,children:[(0,t.jsxs)(k.Text,{style:C.paymentNoticeText,children:["âœ“ Payment received on"," ",e.paidAt&&D(e.paidAt)]}),(0,t.jsx)(k.Text,{style:{fontSize:10,color:"#065F46",marginTop:4},children:"Thank you for your business!"})]}),(0,t.jsxs)(k.View,{style:C.footer,children:[(0,t.jsx)(k.Text,{style:C.footerText,children:"This invoice was generated electronically and is valid without a signature."}),r?.name&&(0,t.jsxs)(k.Text,{style:C.footerText,children:[r.name," â€¢ Invoice ",e.invoiceNumber]})]})]})})};var S=e.i(407107);let B=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),z=(e,t)=>"sent"===e&&t&&t<Date.now()?"overdue":e,P=e=>{switch(e){case"draft":return"Draft";case"sent":return"Sent";case"paid":return"Paid";case"overdue":return"Overdue";case"cancelled":return"Cancelled";default:return e}};function V(){let e=(0,a.useRouter)(),k=(0,a.useParams)(),C=(0,x.useToast)(),T=k.invoiceId,D=(0,r.useQuery)(l.api.invoices.get,{id:T}),V=(0,r.useQuery)(l.api.clients.get,D?.clientId?{id:D.clientId}:"skip"),E=(0,r.useQuery)(l.api.projects.get,D?.projectId?{id:D.projectId}:"skip"),I=(0,r.useQuery)(l.api.invoiceLineItems.listByInvoice,{invoiceId:T}),L=(0,r.useQuery)(l.api.organizations.get,{}),R=(0,r.useQuery)(l.api.documents.getLatest,D?{documentType:"invoice",documentId:D._id}:"skip"),A=(0,r.useQuery)(l.api.clientContacts.getPrimaryContact,D?.clientId?{clientId:D.clientId}:"skip"),U=(0,r.useQuery)(l.api.clientProperties.getPrimaryProperty,D?.clientId?{clientId:D.clientId}:"skip"),H=(0,r.useMutation)(l.api.invoices.update),M=(0,r.useMutation)(l.api.documents.generateUploadUrl),W=(0,r.useMutation)(l.api.documents.create),_=(0,r.useQuery)(l.api.documents.getDocumentUrl,R?{id:R._id}:"skip"),O=(0,s.useMemo)(()=>{if(!D?.publicToken)return"";let e=window.location.origin;return e?`${e}/pay/${D.publicToken}`:""},[D?.publicToken]),Q=async e=>{try{await H({id:T,status:e}),C.success("Invoice Updated",`Status changed to ${P(e)}`)}catch(t){let e=t instanceof Error?t.message:"Failed to update status";C.error("Error",e)}},$=async()=>{try{await H({id:T,status:"paid"}),C.success("Invoice Paid","Invoice marked as paid successfully")}catch(t){let e=t instanceof Error?t.message:"Failed to mark as paid";C.error("Error",e)}};if(void 0===D)return(0,t.jsx)("div",{className:"min-h-screen flex-1 md:min-h-min",children:(0,t.jsxs)("div",{className:"relative bg-linear-to-br from-background via-muted/30 to-muted/60 dark:from-background dark:via-muted/20 dark:to-muted/40 min-h-screen rounded-xl",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_20%,rgba(120,119,198,0.08),transparent_50%)] rounded-xl"}),(0,t.jsx)("div",{className:"relative px-6 pt-8 pb-20",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[(0,t.jsxs)("div",{className:"xl:col-span-3 space-y-8",children:[(0,t.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"}),(0,t.jsx)("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"}),(0,t.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]})]})})]})});if(null===D)return(0,t.jsx)("div",{className:"min-h-screen flex-1 md:min-h-min",children:(0,t.jsxs)("div",{className:"relative bg-linear-to-br from-background via-muted/30 to-muted/60 dark:from-background dark:via-muted/20 dark:to-muted/40 min-h-screen rounded-xl",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_20%,rgba(120,119,198,0.08),transparent_50%)] rounded-xl"}),(0,t.jsxs)("div",{className:"relative px-6 pt-8 pb-20 flex flex-col items-center justify-center h-96 space-y-4",children:[(0,t.jsx)("div",{className:"text-6xl",children:"ğŸ“„"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Invoice Not Found"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"The invoice you're looking for doesn't exist or you don't have permission to view it."}),(0,t.jsx)(c.Button,{onClick:()=>e.push("/invoices"),children:"Back to Invoices"})]})]})});let q=z(D.status,D.dueDate),G=async()=>{let e;try{if(!D||!I)return;e=C.loading("Generating PDF","Rendering and uploadingâ€¦");let a=(0,t.jsx)(F,{invoice:D,client:V?{companyName:V.companyName,industry:V.industry}:void 0,items:I,organization:L?{name:L.name,logoUrl:L.logoUrl||void 0,address:L.address||void 0,phone:L.phone||void 0,email:L.email||void 0}:void 0}),s=await (0,v.pdf)(a).toBlob(),r=await M({}),l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/pdf"},body:s});if(!l.ok)throw Error("Failed to upload PDF");let{storageId:i}=await l.json();await W({documentType:"invoice",documentId:D._id,storageId:i}),C.removeToast(e),C.success("PDF generated","Your invoice PDF is ready.")}catch(a){e&&C.removeToast(e),console.error(a);let t=a instanceof Error?a.message:"Unknown error";C.error("PDF generation failed",t)}},K=async()=>{if(_)try{let e=await fetch(_);if(!e.ok)throw Error("Failed to fetch PDF");let t=await e.blob(),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`Invoice-${D?.invoiceNumber||D?._id.slice(-6)||"document"}.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}catch(t){console.error(t);let e=t instanceof Error?t.message:"Unknown error";C.error("Download failed",e)}};return(0,t.jsxs)("div",{className:"min-h-screen flex-1 md:min-h-min",children:[(0,t.jsxs)("div",{className:"relative min-h-screen rounded-xl",children:[(0,t.jsx)("div",{className:"rounded-xl"}),(0,t.jsx)("div",{className:"relative px-6 pt-8 pb-20",children:(0,t.jsxs)("div",{className:"mx-auto",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 shrink-0",children:(0,t.jsx)(m.FileText,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:D.invoiceNumber}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:E?.title||"Invoice"})]})]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(d.StatusProgressBar,{status:q,steps:[{id:"draft",name:"Draft",order:1},{id:"sent",name:"Sent",order:2},{id:"paid",name:"Paid",order:3}],events:[...D._creationTime?[{type:"draft",timestamp:D._creationTime}]:[],...D.issuedDate?[{type:"sent",timestamp:D.issuedDate}]:[],...D.paidAt?[{type:"paid",timestamp:D.paidAt}]:[]],failureStatuses:["overdue","cancelled"],successStatuses:["paid"]})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[(0,t.jsxs)("div",{className:"xl:col-span-3 space-y-8",children:[(0,t.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,t.jsxs)(n.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center justify-between text-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Building2,{className:"h-5 w-5"}),"Client and Project Details"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[E&&(0,t.jsxs)(c.Button,{intent:"outline",size:"sm",onClick:()=>e.push(`/projects/${E._id}`),children:[(0,t.jsx)(j.FolderOpen,{className:"h-4 w-4 mr-1"}),"View Project"]}),V&&(0,t.jsxs)(c.Button,{intent:"outline",size:"sm",onClick:()=>e.push(`/clients/${V._id}`),children:[(0,t.jsx)(b.Edit,{className:"h-4 w-4 mr-1"}),"View Client"]})]})]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[V?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:V.companyName}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:V.industry||"No industry specified"}),V.companyDescription&&(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:V.companyDescription})]}),V.status&&(0,t.jsx)(i.Badge,{variant:"active"===V.status?"default":"outline",children:V.status})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,t.jsx)(y.Mail,{className:"h-4 w-4"}),"Primary Contact"]}),A?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[A.firstName," ",A.lastName]}),A.jobTitle&&(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:A.jobTitle}),A.email&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,t.jsx)("a",{href:`mailto:${A.email}`,className:"hover:text-blue-600 dark:hover:text-blue-400",children:A.email})}),A.phone&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,t.jsx)("a",{href:`tel:${A.phone}`,className:"hover:text-blue-600 dark:hover:text-blue-400",children:A.phone})})]}):(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No primary contact set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,t.jsx)(p.Building2,{className:"h-4 w-4"}),"Primary Location"]}),U?(0,t.jsxs)("div",{className:"space-y-2",children:[U.propertyName&&(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:U.propertyName}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsx)("p",{children:U.streetAddress}),(0,t.jsxs)("p",{children:[U.city,","," ",U.state," ",U.zipCode]})]})]}):(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No property address set"})]})]})]}):(0,t.jsxs)("div",{className:"p-6 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,t.jsx)(p.Building2,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client information not available"})]}),E&&(0,t.jsxs)("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,t.jsx)(j.FolderOpen,{className:"h-4 w-4"}),"Associated Project"]}),E.status&&(0,t.jsx)(i.Badge,{variant:"in-progress"===E.status?"default":"completed"===E.status?"secondary":"outline",children:E.status})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:E.title}),E.projectNumber&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Project #",E.projectNumber]})]}),E.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:E.description})]})]})]})})]})}),(0,t.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,t.jsxs)(n.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,t.jsx)(n.CardHeader,{className:"flex flex-row items-center justify-between",children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(g.DollarSign,{className:"h-5 w-5"}),"Line Items"]})}),(0,t.jsx)(n.CardContent,{children:I&&I.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-hidden rounded-lg border",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{className:"bg-muted",children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{children:"Description"}),(0,t.jsx)(o.TableHead,{className:"text-center",children:"Qty"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Unit Price"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Total"})]})}),(0,t.jsx)(o.TableBody,{children:I.map(e=>(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableCell,{className:"font-medium",children:e.description}),(0,t.jsx)(o.TableCell,{className:"text-center",children:e.quantity}),(0,t.jsx)(o.TableCell,{className:"text-right",children:B(e.unitPrice)}),(0,t.jsx)(o.TableCell,{className:"text-right font-medium",children:B(e.total)})]},e._id))})]})}),(0,t.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),(0,t.jsx)("span",{className:"font-medium",children:B(D.subtotal)})]}),D.discountAmount&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Discount:"}),(0,t.jsxs)("span",{className:"font-medium text-red-600 dark:text-red-400",children:["-",B(D.discountAmount)]})]}),D.taxAmount&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax:"}),(0,t.jsx)("span",{className:"font-medium",children:B(D.taxAmount)})]}),(0,t.jsx)("div",{className:"border-t pt-2",children:(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsx)("span",{children:B(D.total)})]})})]})]}):(0,t.jsxs)("div",{className:"p-8 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-3",children:"ğŸ“‹"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"No line items found"})]})})]})})]}),(0,t.jsx)("div",{className:"xl:col-span-1",children:(0,t.jsxs)("div",{className:"sticky top-24 space-y-6",children:[(0,t.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,t.jsxs)(n.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{className:"text-lg",children:"Invoice Details"})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status:"}),(0,t.jsx)(i.Badge,{variant:(e=>{switch(e){case"paid":return"default";case"sent":return"secondary";case"overdue":case"cancelled":return"destructive";default:return"outline"}})(q),children:P(q)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Issued:"}),(0,t.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(D.issuedDate).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Due Date:"}),(0,t.jsx)("span",{className:`text-sm font-medium ${"overdue"===q?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:new Date(D.dueDate).toLocaleDateString()})]}),D.paidAt&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Paid:"}),(0,t.jsx)("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:new Date(D.paidAt).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Amount Due:"}),(0,t.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"paid"===q?B(0):B(D.total)})]})]})]})}),(0,t.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,t.jsxs)(n.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{className:"text-lg",children:"Payment Link"})}),(0,t.jsx)(n.CardContent,{className:"space-y-3",children:L?.stripeConnectAccountId?O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground break-all",children:O}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(S.StyledButton,{intent:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(O).then(()=>C.success("Link copied","Public payment link copied.")).catch(()=>C.error("Copy failed","Unable to copy the link."))},children:"Copy link"}),(0,t.jsx)(S.StyledButton,{size:"sm",intent:"primary",showArrow:!1,onClick:()=>{window.open(O,"_blank","noopener,noreferrer")},children:"Open test link"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This public link uses the invoice token; share it with your client to pay via Stripe."})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No payment link available for this invoice."}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Connect Stripe payments to enable the public checkout link for this invoice."})})]})}),(0,t.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-xl shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,t.jsxs)(n.Card,{className:"bg-transparent border-none shadow-none ring-0",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(n.CardTitle,{className:"text-lg",children:"Generated PDF"})}),(0,t.jsx)(m.FileText,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"text-center py-6",children:_?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-48 bg-gray-50 dark:bg-gray-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,t.jsx)("iframe",{src:_,className:"w-full h-full",title:"PDF Preview",style:{border:"none"}})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:(0,t.jsxs)(c.Button,{intent:"outline",size:"sm",className:"w-full",children:[(0,t.jsx)(h.Eye,{className:"h-4 w-4 mr-2"}),"View"]})}),(0,t.jsxs)(c.Button,{intent:"outline",size:"sm",className:"w-full flex-1",onClick:K,children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)(m.FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"No PDF generated yet"}),(0,t.jsxs)(c.Button,{intent:"outline",size:"sm",onClick:G,children:[(0,t.jsx)(m.FileText,{className:"h-4 w-4 mr-2"}),"Generate PDF"]})]})})})]})})]})})]})]})})]}),(0,t.jsx)(w.StickyFormFooter,{buttons:[...(()=>{if(!D)return null;switch(z(D.status,D.dueDate)){case"draft":return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.Button,{size:"sm",onClick:()=>Q("sent"),children:[(0,t.jsx)(y.Mail,{className:"h-4 w-4 mr-1"})," Send Invoice"]}),(0,t.jsxs)(c.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:$,children:[(0,t.jsx)(f.CheckCircle,{className:"h-4 w-4 mr-1"})," Mark as Paid"]})]});case"sent":case"overdue":return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:$,children:[(0,t.jsx)(f.CheckCircle,{className:"h-4 w-4 mr-1"})," Mark as Paid"]}),(0,t.jsx)(c.Button,{size:"sm",intent:"outline",onClick:()=>Q("draft"),children:"Revert to Draft"})]});case"paid":return(0,t.jsx)(c.Button,{size:"sm",intent:"outline",onClick:()=>Q("sent"),children:"Reopen"});case"cancelled":return(0,t.jsx)(c.Button,{size:"sm",intent:"outline",onClick:()=>Q("draft"),children:"Reopen (Draft)"});default:return null}})()?[{label:"draft"===q?"Mark as Sent":"sent"===q||"overdue"===q?"Mark as Paid":"paid"===q?"Reopen":"Update Status",intent:"draft"===q?"primary":"sent"===q||"overdue"===q?"success":"outline",icon:"draft"===q?(0,t.jsx)(y.Mail,{className:"h-4 w-4"}):"sent"===q||"overdue"===q?(0,t.jsx)(f.CheckCircle,{className:"h-4 w-4"}):(0,t.jsx)(b.Edit,{className:"h-4 w-4"}),onClick:()=>{"draft"===q?Q("sent"):"sent"===q||"overdue"===q?$():"paid"===q&&Q("sent")},position:"left"}]:[],{label:"Generate PDF",intent:"outline",icon:(0,t.jsx)(m.FileText,{className:"h-4 w-4"}),onClick:G,position:"right"},..."cancelled"!==q?[{label:"Cancel Invoice",intent:"destructive",icon:(0,t.jsx)(N.XCircle,{className:"h-4 w-4"}),onClick:()=>Q("cancelled"),position:"right"}]:[]],fullWidth:!0})]})}e.s(["default",()=>V],338104)}]);