(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,601600,e=>{"use strict";var r,t,a=e.i(843476),n=e.i(271645),s=e.i(618566),o=e.i(657688),d=e.i(189807),i=e.i(827085);e.i(250711);var l=e.i(982045),c=e.i(761911),u=e.i(607486),m=e.i(248256),g=e.i(878894),x=e.i(178583),b=e.i(569074),p=e.i(727612),h=e.i(440160),f=e.i(286536),y=e.i(688511),v=e.i(107233),j=e.i(643531),k=e.i(37727),w=e.i(270756),N=e.i(531278);let S=(0,e.i(475254).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var C=e.i(778917);function I(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=Array(r);t<r;t++)a[t]=e[t];return a}var O=n.createContext(null);O.displayName="ConnectComponents";var T=function(e){var r=e.connectInstance,t=e.children;return n.createElement(O.Provider,{value:{connectInstance:r}},t)},z=function(){var e=n.useContext(O);if(!e)throw Error("Could not find Components context; You need to wrap the part of your app in an <ConnectComponentsProvider> provider.");return e},D=function(e){var r,t=function(e){if(Array.isArray(e))return e}(r=n.useState(null))||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,s,o,d=[],i=!0,l=!1;try{s=(t=t.call(e)).next,!1;for(;!(i=(a=s.call(t)).done)&&(d.push(a.value),2!==d.length);i=!0);}catch(e){l=!0,n=e}finally{try{if(!i&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw n}}return d}}(r,2)||function(e,r){if(e){if("string"==typeof e)return I(e,2);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=t[0],s=t[1],o=z().connectInstance,d=n.useRef(null),i=n.createElement("div",{style:{width:"100%"},"data-stripe-connect-js-wrapper":!0,ref:d});return n.useLayoutEffect(function(){if(null!==d.current&&null===a){var r=o.create(e);if(s(r),null!==r){try{r.setAttribute("reactSdkAnalytics","3.3.31")}catch(e){console.log("Error setting React Sdk version with error message: ",e)}for(;d.current.firstChild;)d.current.removeChild(d.current.firstChild);d.current.appendChild(r)}}},[o,e]),{wrapper:i,component:a}},E=function(e,r,t){n.default.useEffect(function(){if(e)try{t(e,r)}catch(e){console.error("Error when calling setter! ",e);return}},[e,r,t])},P=function(e){var r=e.onLoadError,t=e.onLoaderStart,a=D("payouts"),n=a.wrapper,s=a.component;return E(s,t,function(e,r){e.setOnLoaderStart(r)}),E(s,r,function(e,r){e.setOnLoadError(r)}),n};(r=t||(t={})).exit="exit",r.close="close",r.instantPayoutCreated="instantpayoutcreated";var U=e.i(313318),B=e.i(610012),A=e.i(493843),L=e.i(985902),F=e.i(407107),M=e.i(264036),K=e.i(828542),q=e.i(361922),_=e.i(311500),$=e.i(283953);function R(e,r){e instanceof Error?e.message:String(e),e instanceof Error&&e.stack}function H(e){return e instanceof Error?e.message:"An unexpected error occurred"}e.i(247167);let Y={setOnLoadError:e=>{},setOnLoaderStart:e=>{}},Z={"account-onboarding":{setFullTermsOfServiceUrl:e=>{},setRecipientTermsOfServiceUrl:e=>{},setPrivacyPolicyUrl:e=>{},setSkipTermsOfServiceCollection:e=>{},setCollectionOptions:e=>{},setOnExit:e=>{},setOnStepChange:e=>{}},"account-management":{setCollectionOptions:e=>{}},"notification-banner":{setCollectionOptions:e=>{},setOnNotificationsChange:e=>{}},"instant-payouts-promotion":{setOnInstantPayoutsPromotionLoaded:e=>{},setOnInstantPayoutCreated:e=>{}},"issuing-card":{setDefaultCard:e=>{},setCardSwitching:e=>{},setFetchEphemeralKey:e=>{},setShowSpendControls:e=>{}},"issuing-cards-list":{setFetchEphemeralKey:e=>{},setShowSpendControls:e=>{},setIssuingProgram:e=>{}},"financial-account":{setFinancialAccount:e=>{}},"financial-account-transactions":{setFinancialAccount:e=>{}},payments:{setDefaultFilters:e=>{}},"payment-details":{setPayment:e=>{},setOnClose:e=>{}},"payment-disputes":{setPayment:e=>{},setOnDisputesLoaded:e=>{}},"tax-settings":{setHideProductTaxCodeSelector:e=>{},setDisplayHeadOfficeCountries:e=>{},setOnTaxSettingsUpdated:e=>{}},"tax-registrations":{setOnAfterTaxRegistrationAdded:e=>{},setDisplayCountries:e=>{},setOnAfterTaxRegistrationExpired:e=>{}},"payout-details":{setPayout:e=>{},setOnClose:e=>{}}},J={"account-onboarding":"stripe-connect-account-onboarding","disputes-list":"stripe-connect-disputes-list",payments:"stripe-connect-payments","payment-details":"stripe-connect-payment-details","payment-disputes":"stripe-connect-payment-disputes",payouts:"stripe-connect-payouts","payouts-list":"stripe-connect-payouts-list","payout-details":"stripe-connect-payout-details",balances:"stripe-connect-balances","account-management":"stripe-connect-account-management","notification-banner":"stripe-connect-notification-banner","instant-payouts-promotion":"stripe-connect-instant-payouts-promotion","issuing-card":"stripe-connect-issuing-card","issuing-cards-list":"stripe-connect-issuing-cards-list","financial-account":"stripe-connect-financial-account","financial-account-transactions":"stripe-connect-financial-account-transactions",documents:"stripe-connect-documents","tax-registrations":"stripe-connect-tax-registrations","tax-settings":"stripe-connect-tax-settings"},V="loadConnect was called but an existing Connect.js script already exists in the document; existing script parameters will be used",Q="https://connect-js.stripe.com/v1.0/connect.js",W=null,X=e=>!!(e&&"object"==typeof e&&"init"in e&&"function"==typeof e.init),G=e=>(window.StripeConnect=window.StripeConnect||{},window.StripeConnect.optimizedLoading=!0,{initialize:r=>{var t;let a=null!=(t=r.metaOptions)?t:{};return e.init(Object.assign(Object.assign({},r),{metaOptions:Object.assign(Object.assign({},a),{sdk:!0,sdkOptions:{sdkVersion:"3.3.31"}})}))}}),ee=Promise.resolve().then(()=>null!==W?W:W=new Promise((e,r)=>{if("undefined"==typeof window)return void r("ConnectJS won't load when rendering code in the server - it can only be loaded on a browser. This error is expected when loading ConnectJS in SSR environments, like NextJS. It will have no impact in the UI, however if you wish to avoid it, you can switch to the `pure` version of the connect.js loader: https://github.com/stripe/connect-js#importing-loadconnect-without-side-effects.");if(X(window.StripeConnect)){console.warn(V),e(G(window.StripeConnect));return}try{let t=document.querySelectorAll(`script[src="${Q}"]`)[0]||document.querySelectorAll('script[src="https://connect-js.stripe.com/v0.1/connect.js"]')[0]||null;t?console.warn(V):t||(t=(()=>{let e=document.createElement("script");if(e.src=Q,!document.head)throw Error("Expected document.head not to be null. Connect.js requires a <head> element.");return document.head.appendChild(e),e})()),t.addEventListener("load",()=>{if(X(window.StripeConnect)){let r=G(window.StripeConnect);e(r)}else r(Error("Connect.js did not load the necessary objects"))}),t.addEventListener("error",()=>{r(Error("Failed to load Connect.js"))})}catch(e){r(e)}})),er=!1;function et({accountId:e,children:r}){let[t,s]=(0,n.useState)(null);return(0,n.useEffect)(()=>{e&&(async()=>{try{var r,t;let a,n,o,d=await fetch("/api/stripe-connect/account-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e})}),i=await d.json();if(!d.ok)throw console.error("Account session creation failed:",i),Error(i.error||"Failed to create account session");let{clientSecret:l}=i,c=document.documentElement;getComputedStyle(c);let u=c.classList.contains("dark"),m=await (r={publishableKey:"pk_test_51SbubR2dAZWhmODOFHx8PxoYF8JbxbXVoxVidXf37ebmD8cA3fzHSZ52eWG1yQjrvOWE03Yk5gNNFPLOAc2VGdJw00X97XlYIH",fetchClientSecret:async()=>l,appearance:{overlays:"drawer",variables:{fontFamily:'Outfit, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSizeBase:"16px",spacingUnit:"8px",borderRadius:"8px",colorPrimary:u?"#7c9eff":"#00a6f4",colorBackground:u?"#1a1a1f":"#ffffff",formBackgroundColor:u?"#242429":"#ffffff",offsetBackgroundColor:u?"#1f1f24":"#f9fafb",colorText:u?"#f5f5f5":"#242424",colorSecondaryText:u?"#b4b4b9":"#6b7280",colorBorder:u?"#3a3a40":"#d7d7d7",formHighlightColorBorder:u?"#7c9eff":"#00a6f4",colorDanger:u?"#ea5a7f":"#df2953",formAccentColor:u?"#7c9eff":"#00a6f4",actionPrimaryColorText:u?"#7c9eff":"#00a6f4",buttonPrimaryColorBackground:u?"#7c9eff":"#00a6f4",buttonPrimaryColorBorder:u?"#7c9eff":"#00a6f4",buttonPrimaryColorText:"#ffffff",buttonSecondaryColorBackground:u?"#2f2f35":"#f3f4f6",buttonSecondaryColorBorder:u?"#3a3a40":"#e5e7eb",buttonSecondaryColorText:u?"#f5f5f5":"#1f2937",badgeSuccessColorBackground:u?"#1a3a1f":"#cef6bb",badgeSuccessColorText:u?"#7ed88a":"#056 90d",badgeWarningColorBackground:u?"#3a2f1a":"#fceeba",badgeWarningColorText:u?"#ffb84d":"#a82c00",badgeDangerColorBackground:u?"#3a1f2f":"#f9e4f1",badgeDangerColorText:u?"#ea5a7f":"#b3063d",overlayBackdropColor:u?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.5)"}}},er=!0,a=(()=>{try{return r.fetchClientSecret()}catch(e){return Promise.reject(e)}})(),n=null!=(t=r.metaOptions)?t:{},o=ee.then(e=>e.initialize(Object.assign(Object.assign({},r),{metaOptions:Object.assign(Object.assign({},n),{eagerClientSecretPromise:a})}))),{create:e=>{let r=J[e];r||(r=e);let t=document.createElement(r),a=Object.assign(Object.assign({},e in Z?Z[e]:{}),Y);for(let r in a)t[r]=function(t){o.then(()=>{if(!this[`${r}InternalOnly`])throw Error(`Method ${r} is not available in the ${e} HTML element. Are you using a supported version of the "@stripe/connect-js" package? Using version: 3.3.31`);this[`${r}InternalOnly`](t)})};return o.then(r=>{if(!t.isConnected&&!t.setConnector){let e=t.style.display;t.style.display="none",document.body.appendChild(t),document.body.removeChild(t),t.style.display=e}if(!t||!t.setConnector)throw Error(`Element ${e} was not transformed into a custom element. Are you using a documented component? See https://docs.stripe.com/connect/supported-embedded-components for a list of supported components`);t.setConnector(r.connect)}),t},update:e=>{o.then(r=>{r.update(e)})},debugInstance:()=>o,logout:()=>o.then(e=>e.logout())});s(m)}catch(e){console.error("Failed to initialize Stripe Connect:",e)}})()},[e]),(0,a.jsx)(a.Fragment,{children:r(t)})}ee.catch(e=>{er||console.warn(e)});var ea=e.i(283164);let en=["overview","business","payments","documents","skus"],es=[{icon:c.Users,text:"1-10",value:"1-10"},{icon:u.Building2,text:"10-100",value:"10-100"},{icon:m.Globe,text:"100+",value:"100+"}],eo={email:"",website:"",phone:"",addressStreet:"",addressCity:"",addressState:"",addressZip:"",companySize:"",logoInvertInDarkMode:!0};function ed({onboardingLoading:e,onboardingComplete:r,onClick:t,disabled:n=!1,variant:s="styled",size:o="md",intent:d="secondary",className:i=""}){if(r)return null;let l=e||n,c=e?null:r?"Open onboarding":"Continue onboarding",u=e?"Loading onboarding...":r?"Open onboarding in Stripe":"Continue onboarding in Stripe";return"plain"===s?(0,a.jsxs)(L.Button,{intent:"plain",className:`text-sm ${i}`,onClick:t,isDisabled:l,"aria-label":u,children:[e?(0,a.jsx)(N.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(C.ExternalLink,{className:"mr-2 h-4 w-4"}),c]}):(0,a.jsxs)(F.StyledButton,{size:o,intent:d,onClick:t,disabled:l,"aria-label":u,className:i,children:[e?(0,a.jsx)(N.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(C.ExternalLink,{className:"mr-2 h-4 w-4"}),c]})}function ei(){let e=(0,s.useRouter)(),r=(0,s.useSearchParams)(),{organization:t}=(0,i.useOrganization)(),c=(0,q.useToast)(),{hasPremiumAccess:u}=(0,$.useFeatureAccess)(),m=(0,l.useQuery)(ea.api.organizations.get,{}),x=(0,l.useQuery)(ea.api.users.current,{}),b=(0,l.useMutation)(ea.api.organizations.update),p=(0,l.useMutation)(ea.api.organizations.setStripeConnectAccountId),[h,f]=n.default.useState(eo),[y,v]=n.default.useState(!1),[j,k]=n.default.useState(!1),[I,O]=n.default.useState(!1),[z,D]=n.default.useState(!1),[E,M]=n.default.useState(null),_=n.default.useRef(null),Y=!!(E?.detailsSubmitted&&E?.chargesEnabled&&E?.payoutsEnabled),Z=n.default.useCallback(e=>e?"border-emerald-200 bg-emerald-50 text-emerald-900 dark:border-emerald-800/70 dark:bg-emerald-950/40 dark:text-emerald-100":"border-rose-200 bg-rose-50 text-rose-900 dark:border-rose-800/70 dark:bg-rose-950/40 dark:text-rose-100",[]),J=r.get("tab"),V=J&&en.includes(J)?J:"overview";n.default.useEffect(()=>{let e=m?._id??null;_.current!==e&&(_.current=e,v(!1),M(null))},[m?._id]);let Q=n.default.useCallback(r=>{if(!en.includes(r))return;if(("documents"===r||"skus"===r||"payments"===r)&&!u)return void c.error("Premium Feature","Upgrade to access this feature");let t=new URLSearchParams;"overview"!==r&&t.set("tab",r);let a=""===t.toString()?"/organization/profile":`/organization/profile?${t.toString()}`;e.push(a)},[e,u,c]);n.default.useEffect(()=>{if(void 0!==m&&!y){let{street:e,city:r,state:t,zip:a}=function(e){if(!e)return{street:"",city:"",state:"",zip:""};let r=e.split(",").map(e=>e.trim());return{street:r[0]??"",city:r[1]??"",state:r[2]??"",zip:r[3]??""}}(m?.address);f({email:m?.email??"",website:m?.website?.replace(/^https?:\/\//i,"")??"",phone:m?.phone??"",addressStreet:e,addressCity:r,addressState:t,addressZip:a,companySize:m?.companySize??"",logoInvertInDarkMode:m?.logoInvertInDarkMode??!0})}},[m,y]);let W=void 0===m||void 0===x,X=!!(m&&x&&"ownerUserId"in m&&m.ownerUserId===x._id),G=n.default.useCallback(()=>{let e=[h.addressStreet.trim(),h.addressCity.trim(),h.addressState.trim(),h.addressZip.trim()].filter(Boolean);return e.length>0?e.join(", "):void 0},[h.addressStreet,h.addressCity,h.addressState,h.addressZip]),ee=n.default.useCallback(()=>[h.email.trim(),h.phone.trim(),h.addressStreet.trim(),h.addressCity.trim(),h.addressState.trim(),h.addressZip.trim()].every(Boolean)?!!h.companySize||(c.warning("Select company size","Choose the option that best represents your team."),!1):(c.warning("Missing required information","Email, phone, and full mailing address are required."),!1),[h,c]),er=n.default.useCallback(async()=>{if(!X)return void c.error("Permission required","Only the organization owner can update business details.");if(!ee())return;let e=h.website.trim()?`https://${h.website.trim().replace(/^https?:\/\//i,"")}`:void 0;k(!0);try{await b({email:h.email.trim(),phone:h.phone.trim(),website:e,address:G(),companySize:h.companySize,logoUrl:t?.imageUrl??void 0,logoInvertInDarkMode:h.logoInvertInDarkMode}),v(!1),c.success("Business info updated","Organization details have been saved.")}catch(r){let e=r instanceof Error?r.message:"Failed to save business information.";c.error("Update failed",e)}finally{k(!1)}},[h,t?.imageUrl,G,X,c,b,ee]),ei=n.default.useCallback(async()=>{if(!X)return void c.error("Permission required","Only the organization owner can manage payments.");O(!0);try{let e=await fetch("/api/stripe-connect/account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:m?.stripeConnectAccountId??void 0,email:m?.email??x?.email})}),r=await e.json();if(!e.ok)throw Error(r?.error??"Stripe could not create or retrieve the connected account.");let t=r?.accountId;if(!t)throw Error("Stripe did not return an account ID.");m?.stripeConnectAccountId!==t&&await p({accountId:t});let a=await fetch("/api/stripe-connect/account-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:t})}),n=await a.json();if(!a.ok)throw Error(n?.error??"Stripe could not generate an onboarding link. Try again.");if(!n?.url)throw Error("Stripe did not return an onboarding URL.");r?.account&&M({accountId:t,chargesEnabled:!!r.account.charges_enabled,payoutsEnabled:!!r.account.payouts_enabled,detailsSubmitted:!!r.account.details_submitted,requirements:r.account.requirements}),window.location.href=n.url}catch(e){R(e,{action:"stripe_onboarding"}),c.error("Stripe onboarding failed",H(e)??"Unable to start Stripe onboarding right now.")}finally{O(!1)}},[x?.email,X,m?.email,m?.stripeConnectAccountId,p,c]),ec=n.default.useCallback(async()=>{if(!m?.stripeConnectAccountId)return void c.warning("No Stripe account yet","Create an account first to check status.");D(!0);try{let e=await fetch("/api/stripe-connect/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:m.stripeConnectAccountId})}),r=await e.json();if(!e.ok)throw Error(r?.error??"Stripe could not provide the latest onboarding status.");M({accountId:r.accountId,chargesEnabled:!!r.chargesEnabled,payoutsEnabled:!!r.payoutsEnabled,detailsSubmitted:!!r.detailsSubmitted,requirements:r.requirements})}catch(e){R(e,{action:"stripe_status"}),c.error("Unable to load Stripe status",H(e)??"Try again in a moment.")}finally{D(!1)}},[m?.stripeConnectAccountId,c]);return(n.default.useEffect(()=>{"payments"===V&&m?.stripeConnectAccountId&&!E&&!z&&ec()},[V,m?.stripeConnectAccountId,ec,z,E]),W)?(0,a.jsx)("div",{className:"min-h-screen flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Loading organization settings..."}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please wait while we fetch your organization data."})]})}):m?(0,a.jsx)("div",{className:"relative p-4 sm:p-6 lg:p-8 min-h-screen flex flex-col",children:(0,a.jsxs)("div",{className:"flex-1 flex flex-col py-8",children:[(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-2 h-8 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,a.jsx)("h1",{className:"text-3xl font-bold bg-linear-to-r from-foreground to-foreground/70 bg-clip-text text-transparent tracking-tight",children:"Organization Settings"})]}),(0,a.jsx)("p",{className:"text-muted-foreground ml-5 leading-relaxed max-w-2xl",children:"Manage the active organization's profile, team, and operational preferences from one cohesive workspace."})]}),(0,a.jsxs)(U.Tabs,{value:V,onValueChange:Q,className:"flex-1",children:[(0,a.jsxs)(U.TabsList,{children:[(0,a.jsx)(U.TabsTrigger,{value:"overview",children:"Overview"}),(0,a.jsx)(U.TabsTrigger,{value:"business",children:"Business Info"}),(0,a.jsxs)(U.TabsTrigger,{value:"payments",disabled:!u,className:u?"":"cursor-not-allowed",children:[!u&&(0,a.jsx)(w.Lock,{className:"h-3 w-3 mr-1"}),"Payments"]}),(0,a.jsxs)(U.TabsTrigger,{value:"documents",disabled:!u,className:u?"":"cursor-not-allowed",children:[!u&&(0,a.jsx)(w.Lock,{className:"h-3 w-3 mr-1"}),"Documents"]}),(0,a.jsxs)(U.TabsTrigger,{value:"skus",disabled:!u,className:u?"":"cursor-not-allowed",children:[!u&&(0,a.jsx)(w.Lock,{className:"h-3 w-3 mr-1"}),"SKUs"]})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-8",children:[(0,a.jsx)(U.TabsContent,{value:"overview",children:(0,a.jsx)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-2xl p-8 shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50",children:(0,a.jsx)(d.OrganizationProfile,{routing:"hash",appearance:{elements:{rootBox:"w-full text-foreground",card:"w-full !shadow-none !bg-transparent !border-none !p-0",headerTitle:"text-2xl font-bold !text-foreground dark:!text-foreground mb-2 tracking-tight",headerSubtitle:"text-sm !text-muted-foreground dark:!text-muted-foreground mb-6 leading-relaxed",navbar:"border-b !border-border/60 dark:!border-border/40 mb-8 pb-4 !bg-transparent",navbarButton:"px-4 py-2 !text-muted-foreground dark:!text-muted-foreground hover:!text-foreground dark:hover:!text-foreground hover:!bg-muted/40 dark:hover:!bg-muted/20 rounded-lg transition-all duration-200 font-medium",navbarButtonActive:"!bg-primary/10 dark:!bg-primary/20 !text-primary dark:!text-primary px-4 py-2 rounded-lg font-medium !shadow-none ring-1 !ring-primary/20",pageScrollBox:"!bg-transparent",page:"space-y-8 !bg-transparent",form:"space-y-6",formFieldLabel:"text-sm font-semibold !text-foreground tracking-wide",formFieldInput:"w-full !bg-background/95 dark:!bg-card/60 border !border-border dark:!border-border/60 focus:!border-primary focus:!ring-2 focus:!ring-primary/20 rounded-lg px-3 py-2.5 !text-foreground dark:!text-foreground placeholder:!text-muted-foreground dark:!placeholder:text-muted-foreground transition-all duration-200 shadow-sm dark:!shadow-none",formFieldInputShowPasswordButton:"!text-muted-foreground hover:!text-foreground dark:!text-muted-foreground dark:hover:!text-foreground",formButtonPrimary:"bg-linear-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary !text-primary-foreground font-medium py-2.5 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 border-0",formButtonSecondary:"!bg-muted/80 hover:!bg-muted/70 dark:!bg-muted/40 dark:hover:!bg-muted/30 !text-muted-foreground hover:!text-foreground dark:!text-muted-foreground dark:hover:!text-foreground font-medium py-2.5 px-6 rounded-lg border !border-border/60 dark:!border-border/40 transition-all duration-200",table:"w-full border-collapse",tableHead:"border-b !border-border dark:!border-border !bg-muted/30 dark:!bg-muted/20",tableHeadRow:"border-b !border-border dark:!border-border",tableHeadCell:"text-left p-4 font-semibold !text-foreground dark:!text-foreground text-sm",tableBody:"divide-y !divide-border dark:!divide-border/60",tableRow:"hover:!bg-muted/30 dark:hover:!bg-muted/20 transition-colors",tableCell:"p-4 text-sm !text-foreground dark:!text-foreground",badge:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium",badgeSecondary:"!bg-muted dark:!bg-muted/40 !text-muted-foreground dark:!text-muted-foreground",badgePrimary:"!bg-primary !text-primary-foreground",membersPageInviteButton:"bg-linear-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary !text-primary-foreground font-medium py-2.5 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 border-0",avatarBox:"w-10 h-10 rounded-lg !bg-muted dark:!bg-muted/40 flex items-center justify-center",avatarImage:"w-10 h-10 rounded-lg object-cover",footer:"mt-8 pt-6 border-t !border-border dark:!border-border/60",footerActionText:"text-xs !text-muted-foreground dark:!text-muted-foreground",footerActionLink:"!text-primary hover:!text-primary/80 dark:!text-primary dark:hover:!text-primary/80 font-medium text-xs",spinner:"!text-primary dark:!text-primary",modalContent:"!bg-card dark:!bg-card border !border-border/60 dark:!border-border/40 shadow-xl dark:!shadow-xl rounded-xl",modalCloseButton:"!text-muted-foreground hover:!text-foreground dark:!text-muted-foreground dark:hover:!text-foreground",selectOptionsContainer:"!bg-background border !border-border/60 dark:!border-border/40 rounded-lg p-2"},variables:{colorPrimary:"hsl(var(--primary))",colorText:"hsl(var(--foreground))",colorTextSecondary:"hsl(var(--muted-foreground))",colorNeutral:"hsl(var(--muted-foreground))",colorBackground:"transparent",colorInputBackground:"hsl(var(--background))",colorInputText:"hsl(var(--foreground))",fontFamily:"inherit",borderRadius:"0.75rem",spacingUnit:"1rem"}},afterLeaveOrganizationUrl:"/organization/complete"})})}),(0,a.jsx)(U.TabsContent,{value:"business",children:(0,a.jsxs)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-2xl p-8 shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50 space-y-8",children:[!X&&(0,a.jsxs)("div",{className:"border border-border/60 dark:border-border/40 rounded-xl p-4 flex items-start gap-3 bg-muted/40 text-muted-foreground",children:[(0,a.jsx)(g.AlertTriangle,{className:"w-5 h-5 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-foreground",children:"View only"}),(0,a.jsx)("p",{className:"text-sm",children:"Only the organization owner can update business details."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Business Information"})]}),(0,a.jsx)("p",{className:"text-muted-foreground ml-5 leading-relaxed",children:"Keep your public-facing business details up to date for clients and documents."})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-3 tracking-wide",children:"Business Email"}),(0,a.jsx)(B.Input,{value:h.email,onChange:e=>{v(!0),f(r=>({...r,email:e.target.value}))},disabled:!X||j,className:"w-full border-border dark:border-border bg-background dark:bg-background focus:bg-background dark:focus:bg-background transition-colors shadow-sm ring-1 ring-border/10",placeholder:"your.business@company.com",type:"email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-3 tracking-wide",children:"Company Website"}),(0,a.jsxs)("div",{className:"mt-2 flex",children:[(0,a.jsx)("span",{className:"flex shrink-0 items-center rounded-l-md border border-border bg-muted/40 px-3 text-sm font-medium text-muted-foreground",children:"https://"}),(0,a.jsx)(B.Input,{value:h.website,onChange:e=>{v(!0);let r=e.target.value.replace(/^https?:\/\//i,"");f(e=>({...e,website:r}))},disabled:!X||j,className:"w-full rounded-l-none border border-l-0 border-border dark:border-border bg-background dark:bg-background focus:bg-background dark:focus:bg-background transition-colors shadow-sm ring-1 ring-border/10",placeholder:"www.yourcompany.com",type:"text"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-3 tracking-wide",children:"Phone Number"}),(0,a.jsx)(B.Input,{value:h.phone,onChange:e=>{v(!0),f(r=>({...r,phone:e.target.value}))},disabled:!X||j,className:"w-full border-border dark:border-border bg-background dark:bg-background focus:bg-background dark:focus:bg-background transition-colors shadow-sm ring-1 ring-border/10",placeholder:"+1 (555) 123-4567",type:"tel"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-3 tracking-wide",children:"Business Address"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsx)("div",{className:"sm:col-span-2",children:(0,a.jsx)(B.Input,{value:h.addressStreet,onChange:e=>{v(!0),f(r=>({...r,addressStreet:e.target.value}))},disabled:!X||j,className:"w-full border-border dark:border-border bg-background dark:bg-background focus:bg-background dark:focus:bg-background transition-colors shadow-sm ring-1 ring-border/10",placeholder:"123 Business St"})}),(0,a.jsx)("div",{children:(0,a.jsx)(B.Input,{value:h.addressCity,onChange:e=>{v(!0),f(r=>({...r,addressCity:e.target.value}))},disabled:!X||j,className:"w-full border-border dark:border-border bg-background dark:bg-background focus:bg-background dark:focus:bg-background transition-colors shadow-sm ring-1 ring-border/10",placeholder:"City"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(B.Input,{value:h.addressState,onChange:e=>{v(!0),f(r=>({...r,addressState:e.target.value}))},disabled:!X||j,className:"w-full border-border dark:border-border bg-background dark:bg-background focus:bg-background dark:focus:bg-background transition-colors shadow-sm ring-1 ring-border/10",placeholder:"State"}),(0,a.jsx)(B.Input,{value:h.addressZip,onChange:e=>{v(!0),f(r=>({...r,addressZip:e.target.value}))},disabled:!X||j,className:"w-full border-border dark:border-border bg-background dark:bg-background focus:bg-background dark:focus:bg-background transition-colors shadow-sm ring-1 ring-border/10",placeholder:"ZIP"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-6 tracking-wide",children:"How many people work at your company? *"}),(0,a.jsx)(K.default,{options:es,selected:h.companySize,onChange:e=>{X&&!j&&(v(!0),f(r=>({...r,companySize:e})))}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-3 tracking-wide",children:"Logo Display Preferences"}),(0,a.jsxs)("div",{className:"space-y-4 border border-border dark:border-border/80 rounded-xl p-5",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Invert logo colors in dark mode"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable this if your logo is dark so it stays visible on dark backgrounds."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(A.Checkbox,{checked:h.logoInvertInDarkMode,onCheckedChange:e=>{X&&!j&&(v(!0),f(r=>({...r,logoInvertInDarkMode:!!e})))},className:"size-5",disabled:!X||j}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:h.logoInvertInDarkMode?"Enabled":"Disabled"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"border border-border/60 dark:border-border/40 rounded-lg p-4 flex flex-col items-center gap-3 bg-white",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Light Mode Preview"}),(0,a.jsx)("div",{className:"h-16 w-16 rounded-lg border border-border flex items-center justify-center bg-white",children:t?.imageUrl?(0,a.jsx)(o.default,{src:t.imageUrl,alt:"Logo preview light",width:64,height:64,className:"max-h-12 max-w-full object-contain"}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"No logo"})})]}),(0,a.jsxs)("div",{className:"border border-border/60 dark:border-border/40 rounded-lg p-4 flex flex-col items-center gap-3 bg-zinc-900",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Dark Mode Preview"}),(0,a.jsx)("div",{className:"h-16 w-16 rounded-lg border border-border/40 flex items-center justify-center bg-zinc-900",children:t?.imageUrl?(0,a.jsx)(o.default,{src:t.imageUrl,alt:"Logo preview dark",width:64,height:64,className:`max-h-12 max-w-full object-contain transition-all duration-200 ${h.logoInvertInDarkMode?"invert brightness-0":""}`}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"No logo"})})]})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)("button",{type:"button",onClick:er,disabled:!X||j,className:"group inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 transition-all duration-200 px-4 py-2 rounded-lg bg-primary/10 hover:bg-primary/15 ring-1 ring-primary/30 hover:ring-primary/40 shadow-sm hover:shadow-md backdrop-blur-sm disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:text-primary disabled:hover:bg-primary/10 disabled:hover:ring-primary/30",children:j?"Saving...":"Save Changes"})})]})}),(0,a.jsx)(U.TabsContent,{value:"payments",children:(0,a.jsxs)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-2xl p-8 shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Payments (Stripe Connect)"})]}),(0,a.jsx)("p",{className:"text-muted-foreground ml-5 leading-relaxed",children:"Onboard to Stripe to accept payments on behalf of your organization. Status is fetched live from Stripe each time you refresh this tab."})]}),m?.stripeConnectAccountId&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 justify-end",children:[(0,a.jsxs)(L.Button,{intent:"outline",onClick:ec,isDisabled:z,children:[z?(0,a.jsx)(N.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(S,{className:"mr-2 h-4 w-4"}),"Refresh status"]}),(0,a.jsx)(ed,{onboardingLoading:I,onboardingComplete:Y,onClick:ei,variant:"styled",size:"md",intent:"secondary"})]})]}),m?.stripeConnectAccountId?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-border/60 dark:border-border/40 p-5 bg-background/60 dark:bg-card/70",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Connected Account"}),(0,a.jsx)("p",{className:"font-mono text-sm text-foreground break-all",children:m.stripeConnectAccountId})]})}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3 mt-4",children:[(0,a.jsxs)("div",{className:`rounded-lg border p-3 ${Z(E?.detailsSubmitted)}`,children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Details submitted"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-foreground",children:E?.detailsSubmitted?"Yes":"Pending"})]}),(0,a.jsxs)("div",{className:`rounded-lg border p-3 ${Z(E?.chargesEnabled)}`,children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Charges enabled"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-foreground",children:E?.chargesEnabled?"Yes":"No"})]}),(0,a.jsxs)("div",{className:`rounded-lg border p-3 ${Z(E?.payoutsEnabled)}`,children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Payouts enabled"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-foreground",children:E?.payoutsEnabled?"Yes":"No"})]})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Requirements"}),E?.requirements?.currently_due?.length?(0,a.jsx)("ul",{className:"list-disc pl-5 text-sm text-muted-foreground space-y-1",children:E.requirements.currently_due.map(e=>(0,a.jsx)("li",{children:e},e))}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No outstanding requirements reported."}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(g.AlertTriangle,{className:"h-4 w-4"}),"Status is always fetched directly from Stripe; reload if you make changes in the dashboard."]})]})]}),Y&&X&&(0,a.jsxs)("div",{className:"rounded-xl border border-border/60 dark:border-border/40 p-5 bg-background/60 dark:bg-card/70",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Payouts"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your payout schedule, view payout history, and perform instant or manual payouts."})]}),(0,a.jsx)(et,{accountId:m.stripeConnectAccountId,children:e=>e?(0,a.jsx)(T,{connectInstance:e,children:(0,a.jsx)(P,{})}):(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(N.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading payouts..."})]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(L.Button,{intent:"outline",onClick:ec,isDisabled:z,children:[z?(0,a.jsx)(N.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(S,{className:"mr-2 h-4 w-4"}),"Refresh status"]}),(0,a.jsx)(ed,{onboardingLoading:I,onboardingComplete:Y,onClick:ei,variant:"styled",size:"md",intent:"secondary"})]})]}):(0,a.jsxs)("div",{className:"rounded-xl border border-border/60 dark:border-border/50 bg-muted/20 dark:bg-muted/10 p-6 space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-foreground leading-relaxed",children:"Start by creating a connected account. You'll be redirected to Stripe's hosted onboarding to provide verification details. Fees are paid by the connected account; disputes are handled by Stripe."}),(0,a.jsxs)(F.StyledButton,{size:"md",onClick:ei,disabled:I,children:[I?(0,a.jsx)(N.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(C.ExternalLink,{className:"mr-2 h-4 w-4"}),"Onboard to collect payments"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Note: The account ID will be stored on this organization so future visits reuse the same Stripe account."})]})]})}),(0,a.jsx)(U.TabsContent,{value:"documents",children:(0,a.jsx)(el,{})}),(0,a.jsx)(U.TabsContent,{value:"skus",children:(0,a.jsx)(eu,{})})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)(g.AlertTriangle,{className:"w-10 h-10 text-muted-foreground mx-auto"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:"No active organization"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Switch to an organization from the sidebar to manage settings, or create a new one."})]})})}function el(){let e=(0,q.useToast)(),{confirm:r}=(0,_.useConfirmDialog)(),[t,s]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),i=(0,n.useRef)(null),c=(0,l.useQuery)(ea.api.organizationDocuments.list),u=(0,l.useMutation)(ea.api.organizationDocuments.generateUploadUrl),m=(0,l.useMutation)(ea.api.organizationDocuments.create),g=(0,l.useMutation)(ea.api.organizationDocuments.remove),p=async r=>{if("application/pdf"!==r.type)return void e.error("Invalid file type","Please upload a PDF file");if(r.size>0xa00000)return void e.error("File too large","Maximum file size is 10MB");s(!0);try{let t=await u({}),a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/pdf"},body:r});if(!a.ok)throw Error("Failed to upload");let{storageId:n}=await a.json();await m({name:r.name.replace(".pdf",""),storageId:n,fileSize:r.size}),e.success("Document uploaded","Your document is ready"),i.current&&(i.current.value="")}catch(a){R(a,{action:"upload_organization_document",metadata:{fileName:r.name,fileSize:r.size}});let t=H(a);e.error("Upload failed",t)}finally{s(!1)}},h=async e=>{let r=e.target.files?.[0];r&&await p(r)},f=async e=>{e.preventDefault(),d(!1);let r=e.dataTransfer.files?.[0];r&&await p(r)},y=async t=>{if(await r({title:"Delete Document",message:"This action cannot be undone. This will permanently delete the document and remove all associated data.",confirmLabel:"Delete Document",cancelLabel:"Cancel",variant:"destructive"}))try{await g({id:t}),e.success("Document deleted","The document has been removed")}catch(a){R(a,{action:"delete_organization_document",metadata:{documentId:t}});let r=H(a);e.error("Delete failed",r)}};return(0,a.jsxs)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-2xl p-8 shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Organization Documents"})]}),(0,a.jsx)("p",{className:"text-muted-foreground ml-5 leading-relaxed",children:"Upload custom documents that can be appended to quotes and invoices."})]}),(0,a.jsxs)("div",{onClick:()=>{t||i.current?.click()},onKeyDown:e=>{t||("Enter"===e.key||" "===e.key)&&(e.preventDefault(),i.current?.click())},onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},onDrop:f,tabIndex:t?-1:0,role:"button","aria-disabled":t,className:`
				relative flex items-center gap-4 max-w-2xl
				px-6 py-4
				border-2 border-dashed rounded-xl
				cursor-pointer
				transition-all duration-200 ease-in-out
				focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2
				${o?"border-primary bg-primary/5 dark:bg-primary/10 scale-[1.02]":"border-border dark:border-border bg-muted/30 dark:bg-muted/20 hover:bg-muted/50 dark:hover:bg-muted/30 hover:border-primary/50"}
				${t?"opacity-50 cursor-not-allowed":""}
			`,children:[(0,a.jsx)("input",{ref:i,type:"file",accept:"application/pdf",onChange:h,disabled:t,className:"hidden"}),(0,a.jsx)("div",{className:`
						flex items-center justify-center w-12 h-12 rounded-lg shrink-0
						transition-colors duration-200
						${o?"bg-primary/20 dark:bg-primary/30":"bg-muted dark:bg-muted/60"}
					`,children:(0,a.jsx)(b.Upload,{className:`
							w-6 h-6 transition-colors duration-200
							${o?"text-primary":"text-muted-foreground"}
						`})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:t?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-muted-foreground/30 border-t-primary rounded-full animate-spin"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:"Uploading document..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"font-medium text-foreground",children:[(0,a.jsx)("span",{className:"text-primary hover:underline",children:"Click to upload"})," ","or drag and drop"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"PDF files only (max 10MB)"})]})}),o&&(0,a.jsx)("div",{className:"absolute inset-0 bg-primary/5 dark:bg-primary/10 rounded-xl pointer-events-none"})]}),void 0===c?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-muted rounded w-1/3 mx-auto"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"})]})}):0===c.length?(0,a.jsxs)("div",{className:"text-center py-12 px-4 border-2 border-dashed border-border dark:border-border/60 rounded-xl bg-muted/20",children:[(0,a.jsx)(x.FileText,{className:"h-12 w-12 text-muted-foreground/60 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-foreground font-medium mb-1",children:"No documents uploaded yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload your first document to get started"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[c.length," document",1!==c.length?"s":""," ","uploaded"]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(e=>(0,a.jsx)(ec,{document:e,onDelete:()=>y(e._id)},e._id))})]})]})}function ec({document:e,onDelete:r}){var t;let n=(0,l.useQuery)(ea.api.organizationDocuments.getDocumentUrl,{id:e._id});return(0,a.jsx)(M.Card,{className:"group bg-card dark:bg-card/80 backdrop-blur-sm border border-border dark:border-border/60 hover:border-primary/50 shadow-sm hover:shadow-md dark:shadow-black/20 ring-1 ring-border/20 dark:ring-border/30 transition-all duration-200",children:(0,a.jsxs)(M.CardContent,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10 dark:bg-primary/20 shrink-0 group-hover:bg-primary/15 dark:group-hover:bg-primary/25 transition-colors",children:(0,a.jsx)(x.FileText,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm truncate text-foreground mb-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:new Date(e.uploadedAt).toLocaleDateString()}),e.fileSize&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsx)("span",{children:(t=e.fileSize)?t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`:""})]})]})]})]}),e.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex gap-1.5 pt-2 border-t border-border/50",children:[n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:(0,a.jsxs)(L.Button,{intent:"outline",size:"sm",className:"w-full h-8 text-xs hover:bg-primary/10 hover:text-primary hover:border-primary/50",children:[(0,a.jsx)(f.Eye,{className:"h-3 w-3 mr-1.5"}),"View"]})}),(0,a.jsx)("a",{href:n,download:`${e.name}.pdf`,children:(0,a.jsx)(L.Button,{intent:"outline",size:"sm",className:"h-8 px-2 hover:bg-primary/10 hover:text-primary hover:border-primary/50",children:(0,a.jsx)(h.Download,{className:"h-3 w-3"})})})]}),(0,a.jsx)(L.Button,{intent:"outline",size:"sm",onClick:r,className:"h-8 px-2 hover:bg-red-50 dark:hover:bg-red-950/30 hover:text-red-600 dark:hover:text-red-400 hover:border-red-300 dark:hover:border-red-900",children:(0,a.jsx)(p.Trash2,{className:"h-3 w-3"})})]})]})})}function eu(){let e=(0,q.useToast)(),{confirm:r}=(0,_.useConfirmDialog)(),[t,s]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),[i,c]=(0,n.useState)(null),[m,g]=(0,n.useState)({name:"",unit:"",rate:"",cost:""}),x=(0,l.useQuery)(ea.api.skus.listAll),b=(0,l.useMutation)(ea.api.skus.create),h=(0,l.useMutation)(ea.api.skus.update),f=(0,l.useMutation)(ea.api.skus.remove),w=()=>{g({name:"",unit:"",rate:"",cost:""}),c(null)},N=()=>{w(),s(!1),d(!1)},S=()=>{w(),s(!0)},C=async()=>{if(o)return;if(!m.name.trim())return void e.warning("Name required","Please enter a SKU name");if(!m.unit.trim())return void e.warning("Unit required","Please enter a unit");let r=parseFloat(m.rate);if(isNaN(r)||r<0)return void e.warning("Invalid rate","Please enter a valid rate");let t=m.cost.trim()?parseFloat(m.cost):void 0;if(void 0!==t&&(isNaN(t)||t<0))return void e.warning("Invalid cost","Please enter a valid cost");try{d(!0),i?(await h({id:i,name:m.name.trim(),unit:m.unit.trim(),rate:r,cost:t}),e.success("SKU updated","SKU has been successfully updated")):(await b({name:m.name.trim(),unit:m.unit.trim(),rate:r,cost:t}),e.success("SKU created","SKU has been successfully created")),N()}catch(t){R(t,{action:i?"update_sku":"create_sku",metadata:{skuForm:m}});let r=H(t);e.error(i?"Update failed":"Create failed",r)}finally{d(!1)}},I=async t=>{if(await r({title:"Delete SKU",message:"Are you sure you want to delete this SKU? It will be marked as inactive and won't appear in new quotes.",confirmLabel:"Delete SKU",cancelLabel:"Cancel",variant:"destructive"}))try{await f({id:t}),e.success("SKU deleted","The SKU has been removed")}catch(a){R(a,{action:"delete_sku",metadata:{skuId:t}});let r=H(a);e.error("Delete failed",r)}},O=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return(0,a.jsxs)("div",{className:"bg-card dark:bg-card backdrop-blur-md border border-border dark:border-border rounded-2xl p-8 shadow-lg dark:shadow-black/50 ring-1 ring-border/30 dark:ring-border/50 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"w-1.5 h-6 bg-linear-to-b from-primary to-primary/60 rounded-full"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"SKUs (Stock Keeping Units)"})]}),(0,a.jsx)("p",{className:"text-muted-foreground ml-5 leading-relaxed",children:"Create reusable SKUs with predefined rates and costs to quickly add line items to quotes."})]}),!t&&x&&x.length>0&&(0,a.jsxs)(L.Button,{intent:"outline",size:"sm",onPress:S,children:[(0,a.jsx)(v.Plus,{className:"h-4 w-4 mr-2"}),"Add SKU"]})]}),void 0===x?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-muted rounded w-1/3 mx-auto"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"})]})}):0!==x.length||t?(0,a.jsx)("div",{className:"border border-border dark:border-border/60 rounded-xl overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Unit"}),(0,a.jsx)("th",{className:"text-right px-4 py-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Rate"}),(0,a.jsx)("th",{className:"text-right px-4 py-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Cost"}),(0,a.jsx)("th",{className:"text-center px-4 py-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Margin"}),(0,a.jsx)("th",{className:"text-center px-4 py-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"text-right px-4 py-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-border dark:divide-border/60 bg-card",children:[t&&(0,a.jsxs)("tr",{className:"bg-blue-50/50 dark:bg-blue-900/10 border-l-4 border-l-blue-500",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(B.Input,{value:m.name,onChange:e=>g(r=>({...r,name:e.target.value})),placeholder:"Enter SKU name...",className:"w-full",autoFocus:!0})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(B.Input,{value:m.unit,onChange:e=>g(r=>({...r,unit:e.target.value})),placeholder:"hour, day, item",className:"w-full"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(B.Input,{type:"number",value:m.rate,onChange:e=>g(r=>({...r,rate:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"w-full text-right"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(B.Input,{type:"number",value:m.cost,onChange:e=>g(r=>({...r,cost:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"w-full text-right"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:i?"Editing":"New"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,a.jsx)(L.Button,{intent:"outline",size:"sq-sm",onPress:C,isDisabled:o,"aria-label":o?"Saving...":"Save SKU",className:"bg-green-50 dark:bg-green-950/30 hover:bg-green-100 dark:hover:bg-green-900/40 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800",children:(0,a.jsx)(j.Check,{className:"h-3 w-3"})}),(0,a.jsx)(L.Button,{intent:"outline",size:"sq-sm",onPress:N,isDisabled:o,"aria-label":"Cancel",className:"hover:bg-red-50 dark:hover:bg-red-950/30 hover:text-red-600 dark:hover:text-red-400",children:(0,a.jsx)(k.X,{className:"h-3 w-3"})})]})})]}),x.map(e=>{var r,t;let n=(r=e.rate,void 0===(t=e.cost)||0===r?null:(r-t)/r*100);return(0,a.jsxs)("tr",{className:`hover:bg-muted/30 transition-colors ${!e.isActive?"opacity-50":""}`,children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-foreground",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:e.unit}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-foreground",children:O(e.rate)}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right text-muted-foreground",children:void 0!==e.cost?O(e.cost):"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:null!==n?(0,a.jsxs)("span",{className:`font-medium ${n>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[n.toFixed(1),"%"]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:e.isActive?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:"Active"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-300",children:"Inactive"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,a.jsx)(L.Button,{intent:"outline",size:"sq-sm",onPress:()=>{e&&(g({name:e.name,unit:e.unit,rate:e.rate.toString(),cost:void 0!==e.cost?e.cost.toString():""}),c(e._id),s(!0))},"aria-label":"Edit SKU",className:"hover:bg-primary/10 hover:text-primary",children:(0,a.jsx)(y.Edit,{className:"h-3 w-3"})}),e.isActive&&(0,a.jsx)(L.Button,{intent:"outline",size:"sq-sm",onPress:()=>I(e._id),"aria-label":"Delete SKU",className:"hover:bg-red-50 dark:hover:bg-red-950/30 hover:text-red-600 dark:hover:text-red-400",children:(0,a.jsx)(p.Trash2,{className:"h-3 w-3"})})]})})]},e._id)})]})]})})}):(0,a.jsxs)("div",{className:"text-center py-16 px-4 border-2 border-dashed border-border dark:border-border/60 rounded-xl bg-muted/20",children:[(0,a.jsx)(u.Building2,{className:"h-16 w-16 text-muted-foreground/60 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-foreground mb-2",children:"No SKUs created yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-6 max-w-sm mx-auto",children:"Create your first SKU to streamline your quote creation process with reusable line items."}),(0,a.jsx)(F.StyledButton,{intent:"primary",size:"lg",onClick:S,icon:(0,a.jsx)(v.Plus,{className:"h-5 w-5"}),label:"Create Your First SKU"})]}),x&&x.length>0&&!t&&(0,a.jsx)("div",{className:"flex items-center justify-between text-sm text-muted-foreground pt-2",children:(0,a.jsxs)("p",{children:[x.filter(e=>e.isActive).length," active SKU",1!==x.filter(e=>e.isActive).length?"s":""," â€¢ ",x.length," total"]})})]})}e.s(["default",()=>ei],601600)}]);