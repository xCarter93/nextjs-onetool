(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,810643,e=>{"use strict";let t,r,a,s,n,i,l,d,o,c;var u=e.i(843476);e.i(250711);var m=e.i(982045),h=e.i(283164),x=e.i(618566),p=e.i(985902),g=e.i(361922),f=e.i(499398),y=e.i(271645),b=e.i(741452),v=e.i(362201),j=e.i(264036),N=e.i(907347),k=e.i(412762),w=e.i(610012),C=e.i(541247),S=e.i(160430),F=e.i(337837),T=e.i(465986),E=e.i(625754),D=e.i(369910),P=e.i(49789),I=e.i(267218);e.i(900175);var R=e.i(428055),O=e.i(730896),A=e.i(440160),L=e.i(475254);let M=(0,L.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var $=e.i(75505),U=e.i(531278);let B=(0,L.default)("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),V=(0,y.memo)(({document:e})=>{var t;let r;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"shrink-0",children:"signed-quote"===e.type?(0,u.jsx)("div",{className:"h-16 w-16 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:(0,u.jsx)(B,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}):e.mimeType.startsWith("image/")?(0,u.jsx)("div",{className:"h-16 w-16 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden",children:(0,u.jsx)(M,{className:"h-6 w-6 text-blue-500"})}):(0,u.jsx)("div",{className:"h-16 w-16 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:(0,u.jsx)(O.FileIcon,{className:`h-6 w-6 ${"application/pdf"===e.mimeType?"text-red-500":"text-gray-500"}`})})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.fileName}),"signed-quote"===e.type&&(0,u.jsx)(N.Badge,{variant:"outline",className:"shrink-0 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800",children:"Signed Quote"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[e.fileSize>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(e=>{if(0===e)return"0 Bytes";let t=["Bytes","KB","MB","GB","TB","PB"],r=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,r=Math.min(r,t.length-1))*100)/100+" "+t[r]})(e.fileSize)}),(0,u.jsx)("span",{className:"text-xs text-gray-400",children:"•"})]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(t=e.uploadedAt,r="undefined"!=typeof navigator?navigator.language:void 0,new Date(t).toLocaleDateString(r,{year:"numeric",month:"short",day:"numeric"}))}),e.quoteNumber&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,u.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Quote #",e.quoteNumber]})]})]})]}),(0,u.jsx)("div",{className:"shrink-0",children:(0,u.jsx)(A.Download,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})})]})});function q({projectId:e}){let t=(0,m.useQuery)(h.api.messageAttachments.listByEntity,{entityType:"project",entityId:e}),r=(0,m.useQuery)(h.api.documents.listSignedByProject,{projectId:e}),a=(0,y.useMemo)(()=>{if(t&&r)return[...t.map(e=>({_id:e._id,fileName:e.fileName,fileSize:e.fileSize,mimeType:e.mimeType,uploadedAt:e.uploadedAt,downloadUrl:e.downloadUrl,type:"attachment"})),...r.map(e=>({_id:e._id,fileName:e.fileName,fileSize:e.fileSize,mimeType:e.mimeType,uploadedAt:e.uploadedAt,downloadUrl:e.downloadUrl,type:"signed-quote",quoteNumber:e.quoteNumber}))].sort((e,t)=>t.uploadedAt-e.uploadedAt)},[t,r]);return void 0===a?(0,u.jsxs)(R.StyledCard,{children:[(0,u.jsx)(R.StyledCardHeader,{children:(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)($.FolderOpen,{className:"h-5 w-5 text-primary"}),(0,u.jsx)(R.StyledCardTitle,{className:"text-lg",children:"Project Documents"})]})}),(0,u.jsx)(R.StyledCardContent,{children:(0,u.jsx)("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(e=>(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"h-16 w-16 bg-gray-200 dark:bg-gray-700 rounded-lg"}),(0,u.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,u.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,u.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},e))})})]}):0===a.length?(0,u.jsxs)(R.StyledCard,{children:[(0,u.jsxs)(R.StyledCardHeader,{children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)($.FolderOpen,{className:"h-5 w-5 text-primary"}),(0,u.jsx)(R.StyledCardTitle,{className:"text-lg",children:"Project Documents"})]}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Files shared in team communications and signed quotes"})]}),(0,u.jsx)(R.StyledCardContent,{children:(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,u.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:(0,u.jsx)($.FolderOpen,{className:"h-8 w-8 text-gray-400 dark:text-gray-600"})}),(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No documents yet"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-sm",children:"Documents and signed quotes will appear here"})]})})]}):(0,u.jsxs)(R.StyledCard,{children:[(0,u.jsxs)(R.StyledCardHeader,{children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)($.FolderOpen,{className:"h-5 w-5 text-primary"}),(0,u.jsx)(R.StyledCardTitle,{className:"text-lg",children:"Project Documents"}),(0,u.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",a.length,")"]})]}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Files shared in team communications and signed quotes"})]}),(0,u.jsx)(R.StyledCardContent,{children:(0,u.jsx)("div",{className:"grid grid-cols-1 gap-3",children:a.map(e=>(0,u.jsx)(_,{downloadUrl:e.downloadUrl,children:(0,u.jsx)(V,{document:e})},e._id))})})]})}function _({downloadUrl:e,children:t}){return e?(0,u.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all",children:t}):(0,u.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg opacity-50","aria-busy":"true","aria-label":"Loading download link",children:[(0,u.jsx)(U.Loader2,{className:"h-4 w-4 text-gray-400 animate-spin shrink-0"}),t]})}V.displayName="DocumentContent";var H=e.i(152088),G=e.i(859531),Q=e.i(495794);let z=y.forwardRef(function({title:e,titleId:t,...r},a){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{fillRule:"evenodd",d:"M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))});var W=e.i(560539),K=e.i(979259),Y=e.i(460759);let X=y.forwardRef(function({title:e,titleId:t,...r},a){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}),Z=y.forwardRef(function({title:e,titleId:t,...r},a){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))});var J=e.i(747697),ee=e.i(107233),et=e.i(191741),er=e.i(350627),ea=e.i(178583),es=e.i(284614),en=e.i(35723);let ei=v.object({clientId:v.string().optional(),title:v.string().min(1,"Project title is required"),instructions:v.string().optional(),projectType:v.enum(["one-off","recurring"]),startDate:v.date().optional(),endDate:v.date().optional(),assignedUserIds:v.array(v.string()).optional(),invoiceReminderEnabled:v.boolean(),scheduleForLater:v.boolean()}),el=e=>e?("number"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set",ed=e=>{switch(e){case"planned":case"lead":case"prospect":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"completed":case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"cancelled":case"archived":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}};function eo({projectId:e,project:t,onUpdate:r,onDelete:a,onStatusUpdate:s,isUpdating:n,projectTasks:i,projectQuotes:l,approvedQuotesCount:d,onTaskSheetOpen:o,onNavigate:c,onGenerateInvoice:x,isEditing:g,onEditingChange:f}){let[v,R]=(0,y.useState)(!1),O=void 0!==g?g:v,A=e=>{f?f(e):R(e)},[L,M]=(0,y.useState)(()=>{let e=new Date;return e.setHours(0,0,0,0),e}),[$,U]=(0,y.useState)(!1),[B,V]=(0,y.useState)(!1),_=(0,m.useQuery)(h.api.clients.list,{}),eo=(0,m.useQuery)(h.api.clients.get,t?.clientId?{id:t.clientId}:"skip"),ec=(0,m.useQuery)(h.api.clientContacts.listByClient,t?.clientId?{clientId:t.clientId}:"skip"),eu=(0,m.useQuery)(h.api.clientProperties.listByClient,t?.clientId?{clientId:t.clientId}:"skip"),em=(0,m.useQuery)(h.api.users.listByOrg),eh=(0,b.useForm)({defaultValues:{clientId:t.clientId?.toString()||"",title:t.title,instructions:t.instructions||"",projectType:t.projectType,startDate:t.startDate?new Date(t.startDate):void 0,endDate:t.endDate?new Date(t.endDate):void 0,assignedUserIds:t.assignedUserIds||[],invoiceReminderEnabled:t.invoiceReminderEnabled||!1,scheduleForLater:t.scheduleForLater||!1},onSubmit:async({value:e})=>{let a=ei.safeParse(e);if(!a.success)return void console.error("Validation errors:",a.error.flatten());let s={};(e.clientId||void 0)!==(t.clientId||void 0)&&(s.clientId=e.clientId),e.title!==t.title&&(s.title=e.title.trim()),(e.instructions||"")!==(t.instructions||"")&&(s.instructions=e.instructions||void 0),e.projectType!==t.projectType&&(s.projectType=e.projectType),(e.startDate?e.startDate.getTime():void 0)!==(t.startDate||void 0)&&(s.startDate=e.startDate?e.startDate.getTime():void 0),(e.endDate?e.endDate.getTime():void 0)!==(t.endDate||void 0)&&(s.endDate=e.endDate?e.endDate.getTime():void 0);let n=t.assignedUserIds||[],i=e.assignedUserIds||[];(n.length!==i.length||n.some((e,t)=>e!==i[t]))&&(s.assignedUserIds=i.length>0?i:void 0),(e.invoiceReminderEnabled||!1)!==(t.invoiceReminderEnabled||!1)&&(s.invoiceReminderEnabled=!!e.invoiceReminderEnabled),(e.scheduleForLater||!1)!==(t.scheduleForLater||!1)&&(s.scheduleForLater=!!e.scheduleForLater),0===Object.keys(s).length||await r(s),A(!1)}});(0,y.useEffect)(()=>{t&&(eh.setFieldValue("clientId",t.clientId?.toString()||""),eh.setFieldValue("title",t.title),eh.setFieldValue("instructions",t.instructions||""),eh.setFieldValue("projectType",t.projectType),eh.setFieldValue("startDate",t.startDate?new Date(t.startDate):void 0),eh.setFieldValue("endDate",t.endDate?new Date(t.endDate):void 0),eh.setFieldValue("assignedUserIds",t.assignedUserIds||[]),eh.setFieldValue("invoiceReminderEnabled",t.invoiceReminderEnabled||!1),eh.setFieldValue("scheduleForLater",t.scheduleForLater||!1))},[t,eh]);let ex=ec?.find(e=>e.isPrimary)||ec?.[0],ep=eu?.find(e=>e.isPrimary)||eu?.[0],eg=e=>{eh.setFieldValue("projectType",e)},ef=(0,y.useMemo)(()=>(_??[]).map(e=>e.companyName),[_]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,u.jsxs)(j.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,u.jsx)(j.CardHeader,{className:"pb-4",children:(0,u.jsxs)(j.CardTitle,{className:"flex items-center justify-between text-xl font-semibold text-gray-900 dark:text-white",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(G.MagnifyingGlassIcon,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Client Information"]}),eo&&(0,u.jsxs)(T.Tooltip,{children:[(0,u.jsx)(T.TooltipTrigger,{asChild:!0,children:(0,u.jsx)("button",{onClick:()=>c(`/clients/${eo._id}`),className:"inline-flex items-center justify-center h-8 w-8 rounded-md bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors",type:"button",children:(0,u.jsx)(Z,{className:"h-4 w-4"})})}),(0,u.jsx)(T.TooltipContent,{children:(0,u.jsx)("p",{children:"Navigate to client page"})})]})]})}),(0,u.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"grid gap-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400 text-left",children:"Selected Client"}),(0,u.jsx)(eh.Field,{name:"clientId",children:e=>(0,u.jsx)(E.default,{options:ef,placeholder:eo?eo.companyName:"No client selected...",disabled:!O,onSelect:t=>{if(O){let r=_?.find(e=>e.companyName===t);e.handleChange(r?r._id:"")}}})})]}),eo&&!O?(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),(0,u.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,u.jsx)(N.Badge,{className:ed(eo.status),variant:"outline",children:eo.status})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white capitalize",children:eo.clientType||"Not specified"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Industry:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:eo.industry||"No industry specified"})]}),eo.companyDescription&&(0,u.jsxs)("div",{className:"col-span-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Description:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:eo.companyDescription})]}),ex?.email&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Email:"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("a",{href:`mailto:${ex.email}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ex.email})})]}),ex?.phone&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Phone:"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("a",{href:`tel:${ex.phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ex.phone})})]})]}):O?(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{className:"text-sm",children:"Select a client above to see details"})}):(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{className:"text-sm",children:"No client selected"})})]})]}),(0,u.jsxs)(j.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,u.jsx)(j.CardHeader,{className:"pb-4",children:(0,u.jsxs)(j.CardTitle,{className:"flex items-center gap-2 text-xl font-semibold text-gray-900 dark:text-white",children:[(0,u.jsx)(W.MapPinIcon,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),"Property Address"]})}),(0,u.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"grid gap-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400 text-left",children:"Selected Property"}),(0,u.jsx)(E.default,{options:eu&&eu.length>0?eu.map(e=>e.propertyName?`${e.propertyName} - ${e.streetAddress}`:e.streetAddress):[],placeholder:ep?ep.propertyName?`${ep.propertyName} - ${ep.streetAddress}`:ep.streetAddress:eo&&eu&&eu.length>0?"Select a property...":eo?"No properties available...":"Select a client first...",disabled:!O,onSelect:e=>{O&&eu&&console.log("Selected property:",eu.find(t=>(t.propertyName?`${t.propertyName} - ${t.streetAddress}`:t.streetAddress)===e))}})]}),ep&&!O?(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[ep.propertyName&&(0,u.jsxs)("div",{className:"col-span-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Property Name:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white font-medium",children:ep.propertyName})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white capitalize",children:ep.propertyType||"Not specified"})]}),ep.squareFootage&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Square Footage:"}),(0,u.jsxs)("div",{className:"mt-1 text-gray-900 dark:text-white",children:[ep.squareFootage.toLocaleString()," sq ft"]})]}),(0,u.jsxs)("div",{className:"col-span-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Address:"}),(0,u.jsxs)("div",{className:"mt-1 text-gray-900 dark:text-white",children:[(0,u.jsx)("div",{className:"font-medium",children:ep.streetAddress}),(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:[ep.city,", ",ep.state," ",ep.zipCode,ep.country&&`, ${ep.country}`]})]})]}),ep.description&&(0,u.jsxs)("div",{className:"col-span-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Description:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:ep.description})]})]}):O?(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{className:"text-sm",children:eo?eu&&eu.length>0?"Select a property above to see details":"No properties available for this client":"Select a client first to see properties"})}):(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{className:"text-sm",children:"No property selected"})})]})]}),(0,u.jsxs)(j.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,u.jsx)(j.CardHeader,{className:"pb-4",children:(0,u.jsxs)(j.CardTitle,{className:"flex items-center gap-2 text-xl font-semibold text-gray-900 dark:text-white",children:[(0,u.jsx)(Q.UserIcon,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),"Contact Details"]})}),(0,u.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"grid gap-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400 text-left",children:"Selected Contact"}),(0,u.jsx)(E.default,{options:ec&&ec.length>0?ec.map(e=>`${e.firstName} ${e.lastName}${e.jobTitle?` - ${e.jobTitle}`:""}`):[],placeholder:ex?`${ex.firstName} ${ex.lastName}${ex.jobTitle?` - ${ex.jobTitle}`:""}`:eo&&ec&&ec.length>0?"Select a contact...":eo?"No contacts available...":"Select a client first...",disabled:!O,onSelect:e=>{O&&ec&&console.log("Selected contact:",ec.find(t=>`${t.firstName} ${t.lastName}${t.jobTitle?` - ${t.jobTitle}`:""}`===e))}})]}),ex&&!O?(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,u.jsxs)("div",{className:"col-span-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Name:"}),(0,u.jsxs)("div",{className:"mt-1 text-gray-900 dark:text-white font-medium",children:[ex.firstName," ",ex.lastName]})]}),ex.jobTitle&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Job Title:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:ex.jobTitle})]}),ex.role&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Role:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white capitalize",children:ex.role})]}),ex.department&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Department:"}),(0,u.jsx)("div",{className:"mt-1 text-gray-900 dark:text-white",children:ex.department})]}),ex.email&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Email:"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("a",{href:`mailto:${ex.email}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ex.email})})]}),ex.phone&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Phone:"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("a",{href:`tel:${ex.phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:ex.phone})})]})]}):O?(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{className:"text-sm",children:eo?ec&&ec.length>0?"Select a contact above to see details":"No contacts available for this client":"Select a client first to see contacts"})}):(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{className:"text-sm",children:"No contact selected"})})]})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,u.jsxs)(j.Card,{className:(0,H.cn)("shadow-sm border-gray-200/60 dark:border-white/10",O?"lg:col-span-3":"lg:col-span-2"),children:[(0,u.jsx)(j.CardHeader,{className:"pb-4",children:(0,u.jsx)(j.CardTitle,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Project Information"})}),(0,u.jsx)(j.CardContent,{className:"space-y-6",children:(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsx)(k.FieldGroup,{children:(0,u.jsx)(eh.Field,{name:"title",children:e=>{let t=e.state.meta.isTouched&&e.state.meta.errors.length>0;return(0,u.jsxs)(k.Field,{"data-invalid":t,children:[(0,u.jsx)(k.FieldLabel,{htmlFor:e.name,children:"Project Title"}),(0,u.jsx)(w.Input,{id:e.name,name:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:t=>e.handleChange(t.target.value),"aria-invalid":t,disabled:!O}),t&&(0,u.jsx)(k.FieldError,{errors:e.state.meta.errors})]})}})}),(0,u.jsx)(k.FieldGroup,{children:(0,u.jsx)(eh.Field,{name:"instructions",children:e=>{let t=e.state.meta.isTouched&&e.state.meta.errors.length>0;return(0,u.jsxs)(k.Field,{"data-invalid":t,children:[(0,u.jsx)(k.FieldLabel,{htmlFor:e.name,children:"Instructions"}),(0,u.jsx)(C.Textarea,{id:e.name,name:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:t=>e.handleChange(t.target.value),"aria-invalid":t,rows:4,disabled:!O}),t&&(0,u.jsx)(k.FieldError,{errors:e.state.meta.errors})]})}})}),(0,u.jsx)(k.FieldGroup,{children:(0,u.jsx)(eh.Field,{name:"assignedUserIds",children:e=>{let t=e.state.value||[];return(0,u.jsxs)(k.Field,{children:[(0,u.jsxs)(k.FieldLabel,{htmlFor:e.name,className:"flex items-center gap-2",children:[(0,u.jsx)(es.User,{className:"h-4 w-4 text-primary"}),"Assign To"]}),(0,u.jsx)(en.StyledMultiSelector,{options:em?.map(e=>({label:e.name||e.email,value:e._id}))||[],value:t,onValueChange:t=>e.handleChange(t),placeholder:"Select team members",maxCount:2,disabled:!O,className:"w-full"})]})}})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Project Number"}),(0,u.jsx)("div",{className:"flex items-center justify-between",children:(0,u.jsxs)("span",{className:"text-sm text-gray-900 dark:text-white font-mono",children:["#",t.projectNumber||e.slice(-6)]})})]}),(0,u.jsx)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-white/10",children:(0,u.jsx)(eh.Field,{name:"invoiceReminderEnabled",children:e=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{type:"checkbox",checked:e.state.value,onChange:t=>e.handleChange(t.target.checked),readOnly:!O,disabled:!O,className:"h-4 w-4 rounded border-gray-300 dark:border-white/10 text-blue-600 dark:text-indigo-500"}),(0,u.jsx)("label",{className:"text-sm text-gray-900 dark:text-white",children:"Remind me to invoice when I close the project"})]})})})]})})]}),!O&&(0,u.jsx)("div",{className:"lg:col-span-1",children:(0,u.jsx)(q,{projectId:e})})]}),(0,u.jsxs)(j.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,u.jsx)(j.CardHeader,{className:"pb-4",children:(0,u.jsxs)(j.CardTitle,{className:"flex items-center gap-2 text-xl font-semibold text-gray-900 dark:text-white",children:[(0,u.jsx)(J.CalendarIcon,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),"Schedule & Project Details"]})}),(0,u.jsxs)(j.CardContent,{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Project Type"}),(0,u.jsx)(eh.Field,{name:"projectType",children:e=>(0,u.jsxs)(I.ButtonGroup,{children:[(0,u.jsx)("button",{type:"button",onClick:()=>{O&&eg("one-off")},disabled:!O,className:(0,H.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","one-off"===e.state.value?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:"One-off Project"}),(0,u.jsx)("button",{type:"button",onClick:()=>{O&&eg("recurring")},disabled:!O,className:(0,H.cn)("inline-flex items-center gap-2 font-semibold transition-all duration-200 text-xs px-3 py-1.5 ring-1 shadow-sm hover:shadow-md backdrop-blur-sm","recurring"===e.state.value?"text-primary hover:text-primary/80 bg-primary/10 hover:bg-primary/15 ring-primary/30 hover:ring-primary/40":"text-gray-600 hover:text-gray-700 bg-transparent hover:bg-gray-50 ring-transparent hover:ring-gray-200 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-800 dark:hover:ring-gray-700"),children:"Recurring Project"})]})})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Start Date"}),(0,u.jsx)(eh.Field,{name:"startDate",children:e=>(0,u.jsxs)(F.Popover,{open:$,onOpenChange:U,children:[(0,u.jsx)(F.PopoverTrigger,{asChild:!0,children:(0,u.jsxs)(p.Button,{intent:"outline",className:"w-full justify-start text-left font-normal",isDisabled:!O||n,children:[(0,u.jsx)(J.CalendarIcon,{className:"mr-2 h-4 w-4"}),e.state.value?el(e.state.value):"Select start date"]})}),(0,u.jsx)(F.PopoverContent,{className:"w-auto p-0 bg-white dark:bg-gray-950",align:"start",children:(0,u.jsx)(S.Calendar,{mode:"single",selected:e.state.value,onSelect:t=>{e.handleChange(t),U(!1)},disabled:n,className:"bg-white! dark:bg-gray-950!"})})]})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"End Date"}),(0,u.jsx)(eh.Field,{name:"endDate",children:e=>{let t=eh.getFieldValue("startDate");return(0,u.jsxs)(F.Popover,{open:B,onOpenChange:V,children:[(0,u.jsx)(F.PopoverTrigger,{asChild:!0,children:(0,u.jsxs)(p.Button,{intent:"outline",className:"w-full justify-start text-left font-normal",isDisabled:!O||n,children:[(0,u.jsx)(J.CalendarIcon,{className:"mr-2 h-4 w-4"}),e.state.value?el(e.state.value):"Select end date"]})}),(0,u.jsx)(F.PopoverContent,{className:"w-auto p-0 bg-white dark:bg-gray-950",align:"start",children:(0,u.jsx)(S.Calendar,{mode:"single",selected:e.state.value,onSelect:t=>{e.handleChange(t),V(!1)},disabled:e=>{if(n)return!0;if(!t)return!1;let r=new Date("number"==typeof t?t:t.getTime());r.setHours(0,0,0,0);let a=new Date(e);return a.setHours(0,0,0,0),a<r},className:"bg-white! dark:bg-gray-950!"})})]})}})]})]}),(0,u.jsx)("div",{className:"flex items-center gap-3",children:(0,u.jsx)(eh.Field,{name:"scheduleForLater",children:e=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{type:"checkbox",checked:e.state.value,onChange:t=>e.handleChange(t.target.checked),readOnly:!O,disabled:!O,className:"h-4 w-4 rounded border-gray-300 dark:border-white/10 text-blue-600 dark:text-indigo-500"}),(0,u.jsx)("label",{className:"text-sm text-gray-900 dark:text-white",children:"Scheduled for later"})]})})})]}),(0,u.jsx)(D.CalendarWidget,{form:eh,calendarDate:L,handleCalendarNavigation:e=>{M(t=>{let r=new Date(t);return"prev"===e?r.setMonth(r.getMonth()-1):r.setMonth(r.getMonth()+1),r})},handleDateClick:e=>{if(!e||!O)return;let t=new Date(L.getFullYear(),L.getMonth(),e);t.setHours(0,0,0,0);let r=eh.getFieldValue("startDate"),a=eh.getFieldValue("endDate");r?a?(eh.setFieldValue("startDate",t),eh.setFieldValue("endDate",void 0)):eh.setFieldValue("endDate",t):eh.setFieldValue("startDate",t)},formatDisplayDate:el,variant:"default"})]})]})]}),!O&&(0,u.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,u.jsxs)(j.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,u.jsx)(j.CardHeader,{className:"pb-4",children:(0,u.jsxs)(j.CardTitle,{className:"flex items-center justify-between text-xl font-semibold text-gray-900 dark:text-white",children:[(0,u.jsxs)("span",{children:["Tasks (",i?.length||0,")"]}),(0,u.jsxs)("button",{type:"button",onClick:o,className:"group inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 transition-all duration-200 px-4 py-2 rounded-lg bg-primary/10 hover:bg-primary/15 ring-1 ring-primary/30 hover:ring-primary/40 shadow-sm hover:shadow-md backdrop-blur-sm",children:[(0,u.jsx)(ee.Plus,{className:"h-4 w-4"}),"Add Task",(0,u.jsx)("span",{"aria-hidden":"true",className:"group-hover:translate-x-1 transition-transform duration-200",children:"→"})]})]})}),(0,u.jsx)(j.CardContent,{children:i&&i.length>0?(0,u.jsxs)("div",{className:"space-y-3",children:[i.slice(0,4).map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:`w-2 h-2 rounded-full ${"completed"===e.status?"bg-green-500":"cancelled"===e.status?"bg-red-500":"bg-yellow-500"}`}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),e.date&&(0,u.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:el(e.date)})]})]}),(0,u.jsx)(N.Badge,{className:ed(e.status),children:e.status})]},e._id)),i.length>4&&(0,u.jsxs)("button",{type:"button",onClick:()=>c(`/projects/${e}/tasks`),className:"w-full mt-3 h-9 px-3 py-2 text-sm border border-gray-200 dark:border-white/10 rounded-md hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:["View All ",i.length," Tasks"]})]}):(0,u.jsxs)("div",{className:"p-6 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,u.jsx)("div",{className:"flex justify-center mb-3",children:(0,u.jsx)(et.ClipboardList,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})}),(0,u.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tasks created yet"})]})})]}),(0,u.jsxs)(j.Card,{className:"shadow-sm border-gray-200/60 dark:border-white/10",children:[(0,u.jsx)(j.CardHeader,{className:"pb-4",children:(0,u.jsxs)(j.CardTitle,{className:"flex items-center justify-between text-xl font-semibold text-gray-900 dark:text-white",children:[(0,u.jsxs)("span",{children:["Quotes (",l?.length||0,")"]}),(0,u.jsxs)("button",{type:"button",onClick:()=>c(`/quotes/new?projectId=${e}`),className:"group inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 transition-all duration-200 px-4 py-2 rounded-lg bg-primary/10 hover:bg-primary/15 ring-1 ring-primary/30 hover:ring-primary/40 shadow-sm hover:shadow-md backdrop-blur-sm",children:[(0,u.jsx)(ee.Plus,{className:"h-4 w-4"}),"Add Quote",(0,u.jsx)("span",{"aria-hidden":"true",className:"group-hover:translate-x-1 transition-transform duration-200",children:"→"})]})]})}),(0,u.jsx)(j.CardContent,{children:l&&l.length>0?(0,u.jsxs)("div",{className:"space-y-3",children:[l.slice(0,4).map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 transition-colors cursor-pointer",onClick:()=>c(`/quotes/${e._id}`),children:[(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["Quote #",e.quoteNumber||e._id.slice(-6)]}),(0,u.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:el(e._creationTime)})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[e.total&&(0,u.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.total.toLocaleString()]}),(0,u.jsx)(N.Badge,{className:ed(e.status||"draft"),children:e.status||"draft"})]})]},e._id)),l.length>4&&(0,u.jsxs)("button",{type:"button",onClick:()=>c(`/projects/${e}/quotes`),className:"w-full mt-3 h-9 px-3 py-2 text-sm border border-gray-200 dark:border-white/10 rounded-md hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:["View All ",l.length," Quotes"]})]}):(0,u.jsxs)("div",{className:"p-6 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg text-center",children:[(0,u.jsx)("div",{className:"flex justify-center mb-3",children:(0,u.jsx)(er.Receipt,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})}),(0,u.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No quotes created yet"})]})})]})]})]}),(0,u.jsx)(eh.Subscribe,{selector:e=>e.values,children:e=>{var r,i;let l,o,c=(e.clientId||"")!==(t.clientId?.toString()||"")||e.title!==t.title||(e.instructions||"")!==(t.instructions||"")||e.projectType!==t.projectType||(e.startDate?e.startDate.getTime():void 0)!==(t.startDate||void 0)||(e.endDate?e.endDate.getTime():void 0)!==(t.endDate||void 0)||(r=e.assignedUserIds,i=t.assignedUserIds,l=r||[],o=i||[],!(l.length===o.length&&l.every((e,t)=>e===o[t])))||(e.invoiceReminderEnabled||!1)!==(t.invoiceReminderEnabled||!1)||(e.scheduleForLater||!1)!==(t.scheduleForLater||!1);return(0,u.jsx)(P.StickyFormFooter,{buttons:(e=>{let r=[];if(O?(r.push({label:n?"Saving...":"Save",onClick:()=>eh.handleSubmit(),intent:"primary",disabled:n||!e,icon:(0,u.jsx)(z,{className:"h-4 w-4"})}),r.push({label:"Cancel",onClick:()=>{eh.setFieldValue("clientId",t.clientId?.toString()||""),eh.setFieldValue("title",t.title),eh.setFieldValue("instructions",t.instructions||""),eh.setFieldValue("projectType",t.projectType),eh.setFieldValue("startDate",t.startDate?new Date(t.startDate):void 0),eh.setFieldValue("endDate",t.endDate?new Date(t.endDate):void 0),eh.setFieldValue("assignedUserIds",t.assignedUserIds||[]),eh.setFieldValue("invoiceReminderEnabled",t.invoiceReminderEnabled||!1),eh.setFieldValue("scheduleForLater",t.scheduleForLater||!1),A(!1)},intent:"outline"})):r.push({label:"Edit",onClick:()=>A(!0),intent:"outline",icon:(0,u.jsx)(K.PencilIcon,{className:"h-4 w-4"})}),t)switch(t.status){case"planned":r.push({label:"Start Project",onClick:()=>s("in-progress"),intent:"success",disabled:n,icon:(0,u.jsx)(X,{className:"h-4 w-4"}),position:"right"});break;case"in-progress":r.push({label:"Complete",onClick:()=>s("completed"),intent:"success",disabled:n,icon:(0,u.jsx)(z,{className:"h-4 w-4"}),position:"right"});break;case"completed":r.push({label:"Reopen Project",onClick:()=>s("in-progress"),intent:"outline",disabled:n,position:"right"});break;case"cancelled":r.push({label:"Restore Project",onClick:()=>s("planned"),intent:"outline",disabled:n,position:"right"})}return r.push({label:"Generate Invoice",onClick:x,intent:"primary",icon:(0,u.jsx)(ea.FileText,{className:"h-4 w-4"}),position:"right",disabled:0===d}),r.push({label:"Delete",onClick:a,intent:"destructive",icon:(0,u.jsx)(Y.TrashIcon,{className:"h-4 w-4"}),position:"right"}),r})(c),fullWidth:!0,hasUnsavedChanges:c,isEditing:O})}})]})}eo.displayName="ProjectViewEditForm";var ec=e.i(374294),eu=e.i(565835),em=e.i(147145),eh=e.i(407107),ex=e.i(429427),ep=e.i(371330),eg=e.i(174080),ef=Object.defineProperty,ey=(e,t,r)=>{let a;return(a="symbol"!=typeof t?t+"":t)in e?ef(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,r};let eb=new class{constructor(){ey(this,"current",this.detect()),ey(this,"handoffState","pending"),ey(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},ev=(e,t)=>{eb.isServer?(0,y.useEffect)(e,t):(0,y.useLayoutEffect)(e,t)};function ej(e){let t=(0,y.useRef)(e);return ev(()=>{t.current=e},[e]),t}let eN=function(e){let t=ej(e);return y.default.useCallback((...e)=>t.current(...e),[t])};function ek(e){return(0,y.useMemo)(()=>e,Object.values(e))}let ew=Symbol();function eC(...e){let t=(0,y.useRef)(e);(0,y.useEffect)(()=>{t.current=e},[e]);let r=eN(e=>{for(let r of t.current)null!=r&&("function"==typeof r?r(e):r.current=e)});return e.every(e=>null==e||(null==e?void 0:e[ew]))?void 0:r}let eS=(0,y.createContext)(void 0);function eF(){return(0,y.useContext)(eS)}function eT(e,t){return e?e+"["+t+"]":t}function eE(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}function eD(e,t,...r){if(e in t){let a=t[e];return"function"==typeof a?a(...r):a}let a=Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,eD),a}var eP=((t=eP||{})[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t),eI=((r=eI||{})[r.Unmount=0]="Unmount",r[r.Hidden=1]="Hidden",r);function eR(){let e,t,r=(e=(0,y.useRef)([]),t=(0,y.useCallback)(t=>{for(let r of e.current)null!=r&&("function"==typeof r?r(t):r.current=t)},[]),(...r)=>{if(!r.every(e=>null==e))return e.current=r,t});return(0,y.useCallback)(e=>(function({ourProps:e,theirProps:t,slot:r,defaultTag:a,features:s,visible:n=!0,name:i,mergeRefs:l}){l=null!=l?l:eA;let d=eL(t,e);if(n)return eO(d,r,a,i,l);let o=null!=s?s:0;if(2&o){let{static:e=!1,...t}=d;if(e)return eO(t,r,a,i,l)}if(1&o){let{unmount:e=!0,...t}=d;return eD(+!e,{0:()=>null,1:()=>eO({...t,hidden:!0,style:{display:"none"}},r,a,i,l)})}return eO(d,r,a,i,l)})({mergeRefs:r,...e}),[r])}function eO(e,t={},r,a,s){let{as:n=r,children:i,refName:l="ref",...d}=eB(e,["unmount","static"]),o=void 0!==e.ref?{[l]:e.ref}:{},c="function"==typeof i?i(t):i;"className"in d&&d.className&&"function"==typeof d.className&&(d.className=d.className(t)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let u={};if(t){let e=!1,r=[];for(let[a,s]of Object.entries(t))"boolean"==typeof s&&(e=!0),!0===s&&r.push(a.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e)for(let e of(u["data-headlessui-state"]=r.join(" "),r))u[`data-${e}`]=""}if(eV(n)&&(Object.keys(eU(d)).length>0||Object.keys(eU(u)).length>0))if(!(0,y.isValidElement)(c)||Array.isArray(c)&&c.length>1||eV(c.type)){if(Object.keys(eU(d)).length>0)throw Error(['Passing props on "Fragment"!',"",`The current component <${a} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(eU(d)).concat(Object.keys(eU(u))).map(e=>`  - ${e}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join(`
`)].join(`
`))}else{var m;let e=c.props,t=null==e?void 0:e.className,r="function"==typeof t?(...e)=>eE(t(...e),d.className):eE(t,d.className),a=eL(c.props,eU(eB(d,["ref"])));for(let e in u)e in a&&delete u[e];return(0,y.cloneElement)(c,Object.assign({},a,u,o,{ref:s((m=c,y.default.version.split(".")[0]>="19"?m.props.ref:m.ref),o.ref)},r?{className:r}:{}))}return(0,y.createElement)(n,Object.assign({},eB(d,["ref"]),!eV(n)&&o,!eV(n)&&u),c)}function eA(...e){return e.every(e=>null==e)?void 0:t=>{for(let r of e)null!=r&&("function"==typeof r?r(t):r.current=t)}}function eL(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},r={};for(let a of e)for(let e in a)e.startsWith("on")&&"function"==typeof a[e]?(null!=r[e]||(r[e]=[]),r[e].push(a[e])):t[e]=a[e];if(t.disabled||t["aria-disabled"])for(let e in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(e)&&(r[e]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let e in r)Object.assign(t,{[e](t,...a){for(let s of r[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;s(t,...a)}}});return t}function eM(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},r={};for(let a of e)for(let e in a)e.startsWith("on")&&"function"==typeof a[e]?(null!=r[e]||(r[e]=[]),r[e].push(a[e])):t[e]=a[e];for(let e in r)Object.assign(t,{[e](...t){for(let a of r[e])null==a||a(...t)}});return t}function e$(e){var t;return Object.assign((0,y.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function eU(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function eB(e,t=[]){let r=Object.assign({},e);for(let e of t)e in r&&delete r[e];return r}function eV(e){return e===y.Fragment||e===Symbol.for("react.fragment")}var eq=((a=eq||{})[a.None=1]="None",a[a.Focusable=2]="Focusable",a[a.Hidden=4]="Hidden",a);let e_=e$(function(e,t){var r;let{features:a=1,...s}=e,n={ref:t,"aria-hidden":(2&a)==2||(null!=(r=s["aria-hidden"])?r:void 0),hidden:(4&a)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&a)==4&&(2&a)!=2&&{display:"none"}}};return eR()({ourProps:n,theirProps:s,slot:{},defaultTag:"span",name:"Hidden"})}),eH=(0,y.createContext)(null);function eG({children:e}){let t=(0,y.useContext)(eH);if(!t)return y.default.createElement(y.default.Fragment,null,e);let{target:r}=t;return r?(0,eg.createPortal)(y.default.createElement(y.default.Fragment,null,e),r):null}function eQ({data:e,form:t,disabled:r,onReset:a,overrides:s}){let[n,i]=(0,y.useState)(null),l=function(){let[e]=(0,y.useState)(function e(){let t=[],r={addEventListener:(e,t,a,s)=>(e.addEventListener(t,a,s),r.add(()=>e.removeEventListener(t,a,s))),requestAnimationFrame(...e){let t=requestAnimationFrame(...e);return r.add(()=>cancelAnimationFrame(t))},nextFrame:(...e)=>r.requestAnimationFrame(()=>r.requestAnimationFrame(...e)),setTimeout(...e){let t=setTimeout(...e);return r.add(()=>clearTimeout(t))},microTask(...e){var t;let a={current:!0};return t=()=>{a.current&&e[0]()},"function"==typeof queueMicrotask?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e})),r.add(()=>{a.current=!1})},style(e,t,r){let a=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:r}),this.add(()=>{Object.assign(e.style,{[t]:a})})},group(t){let r=e();return t(r),this.add(()=>r.dispose())},add:e=>(t.includes(e)||t.push(e),()=>{let r=t.indexOf(e);if(r>=0)for(let e of t.splice(r,1))e()}),dispose(){for(let e of t.splice(0))e()}};return r});return(0,y.useEffect)(()=>()=>e.dispose(),[e]),e}();return(0,y.useEffect)(()=>{if(a&&n)return l.addEventListener(n,"reset",a)},[n,t,a]),y.default.createElement(eG,null,y.default.createElement(ez,{setForm:i,formId:t}),(function e(t={},r=null,a=[]){for(let[s,n]of Object.entries(t))!function t(r,a,s){if(Array.isArray(s))for(let[e,n]of s.entries())t(r,eT(a,e.toString()),n);else s instanceof Date?r.push([a,s.toISOString()]):"boolean"==typeof s?r.push([a,s?"1":"0"]):"string"==typeof s?r.push([a,s]):"number"==typeof s?r.push([a,`${s}`]):null==s?r.push([a,""]):function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}(s)&&!(0,y.isValidElement)(s)&&e(s,a,r)}(a,eT(r,s),n);return a})(e).map(([e,a])=>y.default.createElement(e_,{features:eq.Hidden,...eU({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:t,disabled:r,name:e,value:a,...s})})))}function ez({setForm:e,formId:t}){return(0,y.useEffect)(()=>{if(t){let r=document.getElementById(t);r&&e(r)}},[e,t]),t?null:y.default.createElement(e_,{features:eq.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let r=t.closest("form");r&&e(r)}})}let eW=(0,y.createContext)(void 0);function eK(){return(0,y.useContext)(eW)}function eY(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"tagName"in e}function eX(e){return eY(e)&&"accessKey"in e}function eZ(e){return eX(e)&&"LABEL"===e.nodeName}function eJ(e){return eX(e)&&"LEGEND"===e.nodeName}function e0(e){var t;let r=e.parentElement,a=null;for(;r&&!(eX(t=r)&&"FIELDSET"===t.nodeName);)eJ(r)&&(a=r),r=r.parentElement;let s=(null==r?void 0:r.getAttribute("disabled"))==="";return!(s&&function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(eJ(t))return!1;t=t.previousElementSibling}return!0}(a))&&s}function e1(e){var t,r;return eb.isServer?null:null==e?document:null!=(r=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e))?r:document}function e2(e){var t,r;return null!=(r=null==(t=e1(e))?void 0:t.activeElement)?r:null}let e4=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),e5=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var e6=((s=e6||{})[s.First=1]="First",s[s.Previous=2]="Previous",s[s.Next=4]="Next",s[s.Last=8]="Last",s[s.WrapAround=16]="WrapAround",s[s.NoScroll=32]="NoScroll",s[s.AutoFocus=64]="AutoFocus",s),e3=((n=e3||{})[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n),e9=((i=e9||{})[i.Previous=-1]="Previous",i[i.Next=1]="Next",i),e8=((l=e8||{})[l.Strict=0]="Strict",l[l.Loose=1]="Loose",l),e7=((d=e7||{})[d.Keyboard=0]="Keyboard",d[d.Mouse=1]="Mouse",d);function te(e,t=e=>e){return e.slice().sort((e,r)=>{let a=t(e),s=t(r);if(null===a||null===s)return 0;let n=a.compareDocumentPosition(s);return n&Node.DOCUMENT_POSITION_FOLLOWING?-1:n&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function tt(e,t,{sorted:r=!0,relativeTo:a=null,skipElements:s=[]}={}){var n,i,l;let d=Array.isArray(e)?e.length>0?e1(e[0]):document:e1(e),o=Array.isArray(e)?r?te(e):e:64&t?function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(e5)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(e4)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);s.length>0&&o.length>1&&(o=o.filter(e=>!s.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),a=null!=a?a:null==d?void 0:d.activeElement;let c=(()=>{if(5&t)return 1;if(10&t)return -1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(a))-1;if(4&t)return Math.max(0,o.indexOf(a))+1;if(8&t)return o.length-1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=32&t?{preventScroll:!0}:{},h=0,x=o.length,p;do{if(h>=x||h+x<=0)return 0;let e=u+h;if(16&t)e=(e+x)%x;else{if(e<0)return 3;if(e>=x)return 1}null==(p=o[e])||p.focus(m),h+=c}while(p!==e2(p))return 6&t&&null!=(l=null==(i=null==(n=p)?void 0:n.matches)?void 0:i.call(n,"textarea,input"))&&l&&p.select(),2}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let tr=(0,y.createContext)(null);function ta(){let[e,t]=(0,y.useState)([]);return[e.length>0?e.join(" "):void 0,(0,y.useMemo)(()=>function(e){let r=eN(e=>(t(t=>[...t,e]),()=>t(t=>{let r=t.slice(),a=r.indexOf(e);return -1!==a&&r.splice(a,1),r}))),a=(0,y.useMemo)(()=>({register:r,slot:e.slot,name:e.name,props:e.props,value:e.value}),[r,e.slot,e.name,e.props,e.value]);return y.default.createElement(tr.Provider,{value:a},e.children)},[t])]}tr.displayName="DescriptionContext";let ts=Object.assign(e$(function(e,t){let r=(0,y.useId)(),a=eF(),{id:s=`headlessui-description-${r}`,...n}=e,i=function e(){let t=(0,y.useContext)(tr);if(null===t){let t=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),l=eC(t);ev(()=>i.register(s),[s,i.register]);let d=ek({...i.slot,disabled:a||!1}),o={ref:l,...i.props,id:s};return eR()({ourProps:o,theirProps:n,slot:d,defaultTag:"p",name:i.name||"Description"})}),{});var tn=((o=tn||{}).Space=" ",o.Enter="Enter",o.Escape="Escape",o.Backspace="Backspace",o.Delete="Delete",o.ArrowLeft="ArrowLeft",o.ArrowUp="ArrowUp",o.ArrowRight="ArrowRight",o.ArrowDown="ArrowDown",o.Home="Home",o.End="End",o.PageUp="PageUp",o.PageDown="PageDown",o.Tab="Tab",o);let ti=(0,y.createContext)(null);function tl(e){var t,r,a;let s=null!=(r=null==(t=(0,y.useContext)(ti))?void 0:t.value)?r:void 0;return(null!=(a=null==e?void 0:e.length)?a:0)>0?[s,...e].filter(Boolean).join(" "):s}function td({inherit:e=!1}={}){let t=tl(),[r,a]=(0,y.useState)([]),s=e?[t,...r].filter(Boolean):r;return[s.length>0?s.join(" "):void 0,(0,y.useMemo)(()=>function(e){let t=eN(e=>(a(t=>[...t,e]),()=>a(t=>{let r=t.slice(),a=r.indexOf(e);return -1!==a&&r.splice(a,1),r}))),r=(0,y.useMemo)(()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value}),[t,e.slot,e.name,e.props,e.value]);return y.default.createElement(ti.Provider,{value:r},e.children)},[a])]}ti.displayName="LabelContext";let to=Object.assign(e$(function(e,t){var r;let a=(0,y.useId)(),s=function e(){let t=(0,y.useContext)(ti);if(null===t){let t=Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),n=eK(),i=eF(),{id:l=`headlessui-label-${a}`,htmlFor:d=null!=n?n:null==(r=s.props)?void 0:r.htmlFor,passive:o=!1,...c}=e,u=eC(t);ev(()=>s.register(l),[l,s.register]);let m=eN(e=>{var t;let r=e.currentTarget;if(!(e.target!==e.currentTarget&&eY(t=e.target)&&t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'))&&(eZ(r)&&e.preventDefault(),s.props&&"onClick"in s.props&&"function"==typeof s.props.onClick&&s.props.onClick(e),eZ(r))){let e=document.getElementById(r.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let r=e.getAttribute("aria-disabled");if("true"===r||""===r)return;(eX(e)&&"INPUT"===e.nodeName&&("file"===e.type||"radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}}),h=ek({...s.slot,disabled:i||!1}),x={ref:u,...s.props,id:l,htmlFor:d,onClick:m};return o&&("onClick"in x&&(delete x.htmlFor,delete x.onClick),"onClick"in c&&delete c.onClick),eR()({ourProps:x,theirProps:c,slot:h,defaultTag:d?"label":"div",name:s.name||"Label"})}),{});var tc=((c=tc||{})[c.RegisterOption=0]="RegisterOption",c[c.UnregisterOption=1]="UnregisterOption",c);let tu={0(e,t){let r=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:te(r,e=>e.element.current)}},1(e,t){let r=e.options.slice(),a=e.options.findIndex(e=>e.id===t.id);return -1===a?e:(r.splice(a,1),{...e,options:r})}},tm=(0,y.createContext)(null);function th(e){let t=(0,y.useContext)(tm);if(null===t){let t=Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,th),t}return t}tm.displayName="RadioGroupDataContext";let tx=(0,y.createContext)(null);function tp(e){let t=(0,y.useContext)(tx);if(null===t){let t=Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,tp),t}return t}function tg(e,t){return eD(t.type,tu,e,t)}tx.displayName="RadioGroupActionsContext";let tf=Object.assign(e$(function(e,t){let r=(0,y.useId)(),a=eF(),{id:s=`headlessui-radiogroup-${r}`,value:n,form:i,name:l,onChange:d,by:o,disabled:c=a||!1,defaultValue:u,tabIndex:m=0,...h}=e,x=function(e=function(e,t){return null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t&&"id"in e&&"id"in t?e.id===t.id:e===t}){return(0,y.useCallback)((t,r)=>"string"==typeof e?(null==t?void 0:t[e])===(null==r?void 0:r[e]):e(t,r),[e])}(o),[p,g]=(0,y.useReducer)(tg,{options:[]}),f=p.options,[b,v]=td(),[j,N]=ta(),k=(0,y.useRef)(null),w=eC(k,t),C=function(e){let[t]=(0,y.useState)(e);return t}(u),[S,F]=function(e,t,r){let[a,s]=(0,y.useState)(r),n=void 0!==e,i=(0,y.useRef)(n),l=(0,y.useRef)(!1),d=(0,y.useRef)(!1);return!n||i.current||l.current?n||!i.current||d.current||(d.current=!0,i.current=n,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(l.current=!0,i.current=n,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[n?e:a,eN(e=>(n||(0,eg.flushSync)(()=>s(e)),null==t?void 0:t(e)))]}(n,d,C),T=(0,y.useMemo)(()=>f.find(e=>!e.propsRef.current.disabled),[f]),E=(0,y.useMemo)(()=>f.some(e=>x(e.propsRef.current.value,S)),[f,S]),D=eN(e=>{var t;if(c||x(e,S))return!1;let r=null==(t=f.find(t=>x(t.propsRef.current.value,e)))?void 0:t.propsRef.current;return(null==r||!r.disabled)&&(null==F||F(e),!0)}),P=eN(e=>{if(!k.current)return;let t=f.filter(e=>!1===e.propsRef.current.disabled).map(e=>e.element.current);switch(e.key){case tn.Enter:!function(e){var t,r;let a=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(a){for(let t of a.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(r=a.requestSubmit)||r.call(a)}}(e.currentTarget);break;case tn.ArrowLeft:case tn.ArrowUp:if(e.preventDefault(),e.stopPropagation(),tt(t,e6.Previous|e6.WrapAround)===e3.Success){let e=f.find(e=>{var t;return e2(t=e.element.current)===t});e&&D(e.propsRef.current.value)}break;case tn.ArrowRight:case tn.ArrowDown:if(e.preventDefault(),e.stopPropagation(),tt(t,e6.Next|e6.WrapAround)===e3.Success){let e=f.find(e=>{var t;return e2(t=e.element.current)===t});e&&D(e.propsRef.current.value)}break;case tn.Space:{e.preventDefault(),e.stopPropagation();let t=f.find(e=>{var t;return e2(t=e.element.current)===t});t&&D(t.propsRef.current.value)}}}),I=eN(e=>(g({type:0,...e}),()=>g({type:1,id:e.id}))),R=(0,y.useMemo)(()=>({value:S,firstOption:T,containsCheckedOption:E,disabled:c,compare:x,tabIndex:m,...p}),[S,T,E,c,x,m,p]),O=(0,y.useMemo)(()=>({registerOption:I,change:D}),[I,D]),A=ek({value:S}),L=(0,y.useCallback)(()=>{if(void 0!==C)return D(C)},[D,C]),M=eR();return y.default.createElement(N,{name:"RadioGroup.Description"},y.default.createElement(v,{name:"RadioGroup.Label"},y.default.createElement(tx.Provider,{value:O},y.default.createElement(tm.Provider,{value:R},null!=l&&y.default.createElement(eQ,{disabled:c,data:{[l]:S||"on"},overrides:{type:"radio",checked:null!=S},form:i,onReset:L}),M({ourProps:{ref:w,id:s,role:"radiogroup","aria-labelledby":b,"aria-describedby":j,onKeyDown:P},theirProps:h,slot:A,defaultTag:"div",name:"RadioGroup"})))))}),{Option:e$(function(e,t){var r;let a=th("RadioGroup.Option"),s=tp("RadioGroup.Option"),n=(0,y.useId)(),{id:i=`headlessui-radiogroup-option-${n}`,value:l,disabled:d=a.disabled||!1,autoFocus:o=!1,...c}=e,u=(0,y.useRef)(null),m=eC(u,t),[h,x]=td(),[p,g]=ta(),f=ej({value:l,disabled:d});ev(()=>s.registerOption({id:i,element:u,propsRef:f}),[i,s,u,f]);let b=eN(e=>{var t;if(e0(e.currentTarget))return e.preventDefault();s.change(l)&&(null==(t=u.current)||t.focus())}),v=(null==(r=a.firstOption)?void 0:r.id)===i,{isFocusVisible:j,focusProps:N}=(0,ex.useFocusRing)({autoFocus:o}),{isHovered:k,hoverProps:w}=(0,ep.useHover)({isDisabled:d}),C=a.compare(a.value,l),S=eM({ref:m,id:i,role:"radio","aria-checked":C?"true":"false","aria-labelledby":h,"aria-describedby":p,"aria-disabled":!!d||void 0,tabIndex:d?-1:C||!a.containsCheckedOption&&v?a.tabIndex:-1,onClick:d?void 0:b,autoFocus:o},N,w),F=ek({checked:C,disabled:d,active:j,hover:k,focus:j,autofocus:o}),T=eR();return y.default.createElement(g,{name:"RadioGroup.Description"},y.default.createElement(x,{name:"RadioGroup.Label"},T({ourProps:S,theirProps:c,slot:F,defaultTag:"div",name:"RadioGroup.Option"})))}),Radio:e$(function(e,t){var r,a,s;let n=th("Radio"),i=tp("Radio"),l=(0,y.useId)(),d=eK(),o=eF(),{id:c=d||`headlessui-radio-${l}`,value:u,disabled:m=n.disabled||o||!1,autoFocus:h=!1,...x}=e,p=(0,y.useRef)(null),g=eC(p,t),f=tl(),b=null!=(s=null==(a=(0,y.useContext)(tr))?void 0:a.value)?s:void 0,v=ej({value:u,disabled:m});ev(()=>i.registerOption({id:c,element:p,propsRef:v}),[c,i,p,v]);let j=eN(e=>{var t;if(e0(e.currentTarget))return e.preventDefault();i.change(u)&&(null==(t=p.current)||t.focus())}),{isFocusVisible:N,focusProps:k}=(0,ex.useFocusRing)({autoFocus:h}),{isHovered:w,hoverProps:C}=(0,ep.useHover)({isDisabled:m}),S=(null==(r=n.firstOption)?void 0:r.id)===c,F=n.compare(n.value,u),T=eM({ref:g,id:c,role:"radio","aria-checked":F?"true":"false","aria-labelledby":f,"aria-describedby":b,"aria-disabled":!!m||void 0,tabIndex:m?-1:F||!n.containsCheckedOption&&S?n.tabIndex:-1,autoFocus:h,onClick:m?void 0:j},k,C),E=ek({checked:F,disabled:m,hover:w,focus:N,autofocus:h});return eR()({ourProps:T,theirProps:x,slot:E,defaultTag:"span",name:"Radio"})}),Label:to,Description:ts});var ty=e.i(694214);function tb({isOpen:e,onClose:t,approvedQuotes:r}){let a=(0,x.useRouter)(),s=(0,g.useToast)(),[n,i]=(0,y.useState)(r.length>0?r[0]._id:null),[l,d]=(0,y.useState)(!1),o=(0,m.useMutation)(h.api.invoices.createFromQuote),c=async()=>{if(!n)return void s.error("No Quote Selected","Please select a quote to generate an invoice from.");d(!0);try{let e=s.loading("Creating Invoice","Converting quote to invoice..."),r=await o({quoteId:n,issuedDate:Date.now(),dueDate:Date.now()+2592e6});s.removeToast(e),s.success("Invoice Created","Quote converted to invoice successfully"),t(),a.push(`/invoices/${r}`)}catch(t){let e=t instanceof Error?t.message:"Failed to create invoice";s.error("Invoice Creation Failed",e)}finally{d(!1)}};return(0,u.jsx)(em.default,{isOpen:e,onClose:t,size:"2xl",animation:"scale",children:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,u.jsx)(er.Receipt,{className:"h-6 w-6 text-primary"}),(0,u.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Generate Invoice from Quote"})]}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select an approved quote to convert into an invoice. All line items and totals will be copied to the new invoice."})]}),(0,u.jsx)("div",{className:"py-4",children:0===r.length?(0,u.jsxs)("div",{className:"text-center py-8",children:[(0,u.jsx)(er.Receipt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No approved quotes available for this project."}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Please approve a quote first before generating an invoice."})]}):(0,u.jsx)(tf,{value:n,onChange:i,children:(0,u.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,u.jsx)(tf.Option,{value:e._id,className:({checked:e})=>`relative flex cursor-pointer rounded-lg border-2 px-5 py-4 transition-all ${e?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:({checked:t})=>{let r;return(0,u.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border-2 transition-all ${t?"border-primary bg-primary":"border-gray-300 dark:border-gray-600"}`,children:t&&(0,u.jsx)(ty.CheckCircleIcon,{className:"h-5 w-5 text-white"})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Quote #",e.quoteNumber||e._id.slice(-6)]}),(0,u.jsx)(N.Badge,{variant:"default",className:"text-xs",children:"Approved"})]}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Created on ",new Date(e._creationTime||Date.now()).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}),(0,u.jsx)("div",{className:"text-right",children:(0,u.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.total?(r=e.total,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r)):"$0"})})]})}},e._id))})})}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsx)(eh.StyledButton,{onClick:t,intent:"outline",disabled:l,showArrow:!1,children:"Cancel"}),(0,u.jsx)(eh.StyledButton,{onClick:c,intent:"primary",disabled:!n||l||0===r.length,isLoading:l,showArrow:!1,children:"Create Invoice"})]})]})})}let tv=(0,L.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var tj=e.i(164407),tN=e.i(955993),tk=e.i(271217);let tw=["planned","in-progress","completed","cancelled"];function tC(e){return"in-progress"===e?"In Progress":e.charAt(0).toUpperCase()+e.slice(1)}function tS(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set"}function tF(e){switch(e){case"planned":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":case"sent":case"pending":case"approved":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"completed":case"paid":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}}function tT({project:e,projectId:t,isEditing:r,onEditClick:a,statusValue:s,onStatusChange:n,tasks:i,quotes:l,onTaskSheetOpen:d,onStatusUpdate:o}){let c=(0,x.useRouter)();return(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,u.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-lg bg-linear-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 shrink-0 shadow-md",children:(0,u.jsx)($.FolderOpen,{className:"h-8 w-8 text-white"})}),(0,u.jsxs)("div",{className:"min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 flex-wrap mb-3",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.title}),r?(0,u.jsxs)(tk.StyledSelect,{value:s,onValueChange:n,children:[(0,u.jsx)(tk.StyledSelectTrigger,{className:"w-auto",children:(0,u.jsx)(tk.SelectValue,{})}),(0,u.jsx)(tk.StyledSelectContent,{children:tw.map(e=>(0,u.jsx)(tk.SelectItem,{value:e,children:tC(e)},e))})]}):(0,u.jsx)(tj.ProminentStatusBadge,{status:e.status,size:"large",showIcon:!0,entityType:"project"})]}),!r&&(0,u.jsxs)("button",{onClick:a,className:"inline-flex items-center gap-2 text-sm text-primary hover:text-primary/80 font-medium transition-colors",children:[(0,u.jsx)(tv,{className:"h-4 w-4"}),"Edit Details"]})]}),(0,u.jsx)("div",{className:"flex-1 min-w-0",children:(0,u.jsx)(tN.StatusProgressBar,{status:e.status,steps:[{id:"planned",name:"Planned",order:1},{id:"in-progress",name:"In Progress",order:2},{id:"completed",name:"Completed",order:3}],events:[...e._creationTime?[{type:"planned",timestamp:e._creationTime}]:[],...e.startDate?[{type:"in-progress",timestamp:e.startDate}]:[],...e.completedAt?[{type:"completed",timestamp:e.completedAt}]:[]],failureStatuses:["cancelled"],successStatuses:["completed"],showStatusButton:!0,statusOptions:tw.map(e=>({value:e,label:tC(e)})),onStatusChange:e=>o(e),statusButtonLabel:"Change Status"})})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3",children:[(0,u.jsxs)(F.Popover,{children:[(0,u.jsx)(F.PopoverTrigger,{asChild:!0,children:(0,u.jsxs)("button",{className:"flex flex-col items-center justify-center p-4 rounded-lg border border-gray-300 dark:border-white/20 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),(0,u.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i?.length||0})]}),(0,u.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Tasks"})]})}),(0,u.jsxs)(F.PopoverContent,{className:"w-96 p-0 bg-white dark:bg-gray-900",align:"start",side:"bottom",children:[(0,u.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-white/10",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Tasks"}),(0,u.jsxs)(p.Button,{intent:"outline",size:"sm",onPress:d,children:[(0,u.jsx)(ee.Plus,{className:"h-4 w-4 mr-2"}),"New"]})]})}),(0,u.jsx)("div",{className:"max-h-96 overflow-y-auto",children:i&&i.length>0?(0,u.jsx)("div",{className:"p-2",children:i.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg transition-colors",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,u.jsx)("div",{className:`w-2 h-2 rounded-full shrink-0 ${"completed"===e.status?"bg-green-500":"cancelled"===e.status?"bg-red-500":"bg-yellow-500"}`}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e.title}),e.date&&(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:tS(e.date)})]})]}),(0,u.jsx)(N.Badge,{className:tF(e.status),variant:"outline",children:e.status})]},e._id))}):(0,u.jsxs)("div",{className:"p-8 text-center",children:[(0,u.jsx)(et.ClipboardList,{className:"h-12 w-12 text-gray-400 dark:text-gray-600 mx-auto mb-3"}),(0,u.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tasks yet"})]})})]})]}),(0,u.jsxs)(F.Popover,{children:[(0,u.jsx)(F.PopoverTrigger,{asChild:!0,children:(0,u.jsxs)("button",{className:"flex flex-col items-center justify-center p-4 rounded-lg border border-gray-300 dark:border-white/20 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z"})}),(0,u.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l?.length||0})]}),(0,u.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Quotes"})]})}),(0,u.jsxs)(F.PopoverContent,{className:"w-96 p-0 bg-white dark:bg-gray-900",align:"start",side:"bottom",children:[(0,u.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-white/10",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Quotes"}),(0,u.jsxs)(p.Button,{intent:"outline",size:"sm",onPress:()=>c.push(`/quotes/new?projectId=${t}`),children:[(0,u.jsx)(ee.Plus,{className:"h-4 w-4 mr-2"}),"New"]})]})}),(0,u.jsx)("div",{className:"max-h-96 overflow-y-auto",children:l&&l.length>0?(0,u.jsx)("div",{className:"p-2",children:l.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg transition-colors cursor-pointer",onClick:()=>c.push(`/quotes/${e._id}`),children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 shrink-0"}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:["Quote #",e.quoteNumber||e._id.slice(-6)]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:tS(e._creationTime)})]})]}),(0,u.jsxs)("div",{className:"text-right shrink-0",children:[e.total&&(0,u.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:["$",e.total.toLocaleString()]}),(0,u.jsx)(N.Badge,{className:tF(e.status||"draft"),variant:"outline",children:e.status||"draft"})]})]},e._id))}):(0,u.jsxs)("div",{className:"p-8 text-center",children:[(0,u.jsx)(er.Receipt,{className:"h-12 w-12 text-gray-400 dark:text-gray-600 mx-auto mb-3"}),(0,u.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No quotes yet"})]})})]})]})]})]})}function tE(){let e=(0,x.useParams)(),t=(0,x.useRouter)(),r=(0,g.useToast)(),[a,s]=(0,y.useState)(!1),[n,i]=(0,y.useState)(!1),[l,d]=(0,y.useState)(!1),[o,c]=(0,y.useState)(!1),[b,v]=(0,y.useState)(!1),[j,N]=(0,y.useState)(!1),k=e.projectId,w=(0,m.useQuery)(h.api.projects.get,{id:k}),C=(0,m.useQuery)(h.api.tasks.list,null===w||o?"skip":{projectId:k}),S=(0,m.useQuery)(h.api.quotes.list,null===w||o?"skip":{projectId:k}),F=(0,m.useMutation)(h.api.projects.update),T=(0,m.useMutation)(h.api.projects.remove),E=async e=>{s(!0);try{await F({id:k,...e}),r.success("Project Updated","Your changes have been saved.")}catch(t){let e=t instanceof Error?t.message:"Failed to save changes";r.error("Error",e)}finally{s(!1)}};if(void 0===w)return(0,u.jsx)("div",{className:"w-full px-6",children:(0,u.jsx)("div",{className:"w-full pt-8 pb-24",children:(0,u.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-3"}),(0,u.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,u.jsx)("div",{className:"lg:col-span-2 h-64 bg-gray-200 dark:bg-gray-700 rounded"}),(0,u.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]})]})})});if(null===w)return(0,u.jsx)("div",{className:"w-full px-6",children:(0,u.jsxs)("div",{className:"w-full pt-8 pb-24 flex flex-col items-center justify-center h-96 space-y-4",children:[(0,u.jsx)("div",{className:"text-6xl",children:"📋"}),(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Project Not Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"The project you're looking for doesn't exist or you don't have permission to view it."}),(0,u.jsx)(p.Button,{onClick:()=>t.push("/projects"),children:"Back to Projects"})]})});let D=async e=>{s(!0);try{await F({id:k,status:e}),r.success("Project Updated",`Project status changed to ${e}`)}catch{r.error("Error","Failed to update project status")}finally{s(!1)}},P=async()=>{d(!0)},I=async()=>{c(!0);try{await T({id:k}),r.success("Project Deleted","Project has been successfully deleted"),d(!1),t.push("/projects")}catch(t){let e=t instanceof Error?t.message:"Failed to delete project";r.error("Error",e),d(!1),c(!1)}},R=S?.filter(e=>"approved"===e.status)||[];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f.TaskSheet,{mode:"create",isOpen:n,onOpenChange:i,initialValues:{clientId:w?.clientId,projectId:k}}),(0,u.jsx)(eu.default,{isOpen:l,onClose:()=>d(!1),onConfirm:I,title:"Delete Project",itemName:w.title,itemType:"Project",isArchive:!1}),(0,u.jsx)(tb,{isOpen:b,onClose:()=>v(!1),approvedQuotes:R}),(0,u.jsx)("div",{className:"w-full px-6",children:(0,u.jsxs)("div",{className:"w-full pt-8 pb-24",children:[(0,u.jsx)(tT,{project:w,projectId:k,isEditing:j,onEditClick:()=>N(!0),statusValue:w.status,onStatusChange:e=>{D(e)},tasks:C,quotes:S,onTaskSheetOpen:()=>i(!0),onStatusUpdate:D}),(0,u.jsx)(eo,{projectId:k,project:w,onUpdate:E,onDelete:P,onStatusUpdate:D,isUpdating:a,projectTasks:C,projectQuotes:S,approvedQuotesCount:R.length,onTaskSheetOpen:()=>i(!0),onNavigate:e=>t.push(e),onGenerateInvoice:()=>v(!0),isEditing:j,onEditingChange:N}),(0,u.jsx)("div",{className:"mt-8",children:(0,u.jsx)(ec.MentionSection,{entityType:"project",entityId:k,entityName:w.title})})]})})]})}e.s(["default",()=>tE],810643)}]);