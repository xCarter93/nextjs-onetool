(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,173554,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(439162),s=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var n=e.i(152088);function l({className:e,...r}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>l],173554)},284614,e=>{"use strict";let t=(0,e.i(475254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],284614)},361277,e=>{"use strict";let t=(0,e.i(475254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",()=>t])},337837,e=>{"use strict";var t=e.i(843476),r=e.i(178761),a=e.i(152088);function s({...e}){return(0,t.jsx)(r.Root,{"data-slot":"popover",...e})}function n({...e}){return(0,t.jsx)(r.Trigger,{"data-slot":"popover-trigger",...e})}function l({className:e,align:s="center",sideOffset:n=4,...l}){return(0,t.jsx)(r.Portal,{children:(0,t.jsx)(r.Content,{"data-slot":"popover-content",align:s,sideOffset:n,className:(0,a.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-[var(--radix-popover-content-transform-origin)] rounded-md border p-4 shadow-md outline-hidden",e),...l})})}e.s(["Popover",()=>s,"PopoverContent",()=>l,"PopoverTrigger",()=>n])},75505,e=>{"use strict";let t=(0,e.i(475254).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);e.s(["FolderOpen",()=>t],75505)},225913,e=>{"use strict";var t=e.i(207670);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=t.clsx;e.s(["cva",0,(e,t)=>s=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==s?void 0:s[e],a=null==i?void 0:i[e];if(null===t)return null;let n=r(t)||r(a);return l[e][n]}),d=s&&Object.entries(s).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return a(e,o,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...d}[t]):({...i,...d})[t]===r})?[...e,r,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}])},907347,e=>{"use strict";var t=e.i(843476),r=e.i(418094),a=e.i(225913),s=e.i(152088);let n=(0,a.cva)("inline-flex items-center justify-center gap-1 rounded-lg px-3 py-1 text-xs font-medium whitespace-nowrap shrink-0 ring-1 ring-inset ring-transparent shadow-sm transition-all duration-200 hover:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background backdrop-blur-sm overflow-hidden [&>svg]:size-3 [&>svg]:pointer-events-none aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:text-destructive",{variants:{variant:{default:"bg-primary/10 text-primary ring-primary/30 hover:bg-primary/15 hover:ring-primary/40 focus-visible:ring-primary/50 dark:bg-primary/20 dark:text-primary-foreground dark:ring-primary/35 dark:hover:bg-primary/25",secondary:"bg-secondary/10 text-secondary-foreground ring-secondary/30 hover:bg-secondary/15 hover:ring-secondary/40 focus-visible:ring-secondary/45 dark:bg-secondary/20 dark:ring-secondary/35",destructive:"bg-destructive/10 text-destructive ring-destructive/30 hover:bg-destructive/15 hover:ring-destructive/40 focus-visible:ring-destructive/50 dark:bg-destructive/20 dark:text-destructive-foreground dark:ring-destructive/45",success:"bg-emerald-500/10 text-emerald-600 ring-emerald-500/30 hover:bg-emerald-500/15 hover:ring-emerald-500/40 focus-visible:ring-emerald-500/50 dark:bg-emerald-500/20 dark:text-emerald-50 dark:ring-emerald-500/50",warning:"bg-amber-500/10 text-amber-600 ring-amber-500/30 hover:bg-amber-500/15 hover:ring-amber-500/40 focus-visible:ring-amber-500/50 dark:bg-amber-500/20 dark:text-amber-50 dark:ring-amber-500/50",outline:"bg-background/80 text-foreground ring-border hover:bg-accent/30 hover:text-accent-foreground focus-visible:ring-ring"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,asChild:l=!1,...i}){let o=l?r.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,s.cn)(n({variant:a}),e),...i})}e.s(["Badge",()=>l,"badgeVariants",()=>n])},178761,e=>{"use strict";var t=e.i(271645),r=e.i(981140),a=e.i(820783),s=e.i(30030),n=e.i(726330),l=e.i(303536),i=e.i(765491),o=e.i(610772),d=e.i(853660),c=e.i(774606),u=e.i(296626),p=e.i(248425),m=e.i(991918),f=e.i(369340),h=e.i(186312),g=e.i(985369),x=e.i(843476),v="Popover",[y,b]=(0,s.createContextScope)(v,[d.createPopperScope]),j=(0,d.createPopperScope)(),[S,w]=y(v),N=e=>{let{__scopePopover:r,children:a,open:s,defaultOpen:n,onOpenChange:l,modal:i=!1}=e,c=j(r),u=t.useRef(null),[p,m]=t.useState(!1),[h,g]=(0,f.useControllableState)({prop:s,defaultProp:n??!1,onChange:l,caller:v});return(0,x.jsx)(d.Root,{...c,children:(0,x.jsx)(S,{scope:r,contentId:(0,o.useId)(),triggerRef:u,open:h,onOpenChange:g,onOpenToggle:t.useCallback(()=>g(e=>!e),[g]),hasCustomAnchor:p,onCustomAnchorAdd:t.useCallback(()=>m(!0),[]),onCustomAnchorRemove:t.useCallback(()=>m(!1),[]),modal:i,children:a})})};N.displayName=v;var k="PopoverAnchor",C=t.forwardRef((e,r)=>{let{__scopePopover:a,...s}=e,n=w(k,a),l=j(a),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=n;return t.useEffect(()=>(i(),()=>o()),[i,o]),(0,x.jsx)(d.Anchor,{...l,...s,ref:r})});C.displayName=k;var I="PopoverTrigger",D=t.forwardRef((e,t)=>{let{__scopePopover:s,...n}=e,l=w(I,s),i=j(s),o=(0,a.useComposedRefs)(t,l.triggerRef),c=(0,x.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":_(l.open),...n,ref:o,onClick:(0,r.composeEventHandlers)(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?c:(0,x.jsx)(d.Anchor,{asChild:!0,...i,children:c})});D.displayName=I;var P="PopoverPortal",[T,M]=y(P,{forceMount:void 0}),U=e=>{let{__scopePopover:t,forceMount:r,children:a,container:s}=e,n=w(P,t);return(0,x.jsx)(T,{scope:t,forceMount:r,children:(0,x.jsx)(u.Presence,{present:r||n.open,children:(0,x.jsx)(c.Portal,{asChild:!0,container:s,children:a})})})};U.displayName=P;var O="PopoverContent",R=t.forwardRef((e,t)=>{let r=M(O,e.__scopePopover),{forceMount:a=r.forceMount,...s}=e,n=w(O,e.__scopePopover);return(0,x.jsx)(u.Presence,{present:a||n.open,children:n.modal?(0,x.jsx)(E,{...s,ref:t}):(0,x.jsx)(F,{...s,ref:t})})});R.displayName=O;var A=(0,m.createSlot)("PopoverContent.RemoveScroll"),E=t.forwardRef((e,s)=>{let n=w(O,e.__scopePopover),l=t.useRef(null),i=(0,a.useComposedRefs)(s,l),o=t.useRef(!1);return t.useEffect(()=>{let e=l.current;if(e)return(0,h.hideOthers)(e)},[]),(0,x.jsx)(g.RemoveScroll,{as:A,allowPinchZoom:!0,children:(0,x.jsx)(V,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;o.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),F=t.forwardRef((e,r)=>{let a=w(O,e.__scopePopover),s=t.useRef(!1),n=t.useRef(!1);return(0,x.jsx)(V,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),V=t.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:f,...h}=e,g=w(O,r),v=j(r);return(0,l.useFocusGuards)(),(0,x.jsx)(i.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,x.jsx)(n.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:f,onEscapeKeyDown:u,onPointerDownOutside:p,onFocusOutside:m,onDismiss:()=>g.onOpenChange(!1),children:(0,x.jsx)(d.Content,{"data-state":_(g.open),role:"dialog",id:g.contentId,...v,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),H="PopoverClose";function _(e){return e?"open":"closed"}t.forwardRef((e,t)=>{let{__scopePopover:a,...s}=e,n=w(H,a);return(0,x.jsx)(p.Primitive.button,{type:"button",...s,ref:t,onClick:(0,r.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=H,t.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,s=j(r);return(0,x.jsx)(d.Arrow,{...s,...a,ref:t})}).displayName="PopoverArrow",e.s(["Anchor",()=>C,"Content",()=>R,"Portal",()=>U,"Root",()=>N,"Trigger",()=>D])},246349,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>t])},412012,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},107233,e=>{"use strict";let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},499398,805899,e=>{"use strict";var t=e.i(843476),r=e.i(271645);e.i(250711);var a=e.i(982045),s=e.i(283164),n=e.i(152088),l=e.i(407107),i=e.i(51738),o=e.i(680707),d=e.i(985902),c=e.i(160430),u=e.i(610012),p=e.i(173554),m=e.i(337837),f=e.i(245715),h=e.i(361922),g=e.i(747697),x=e.i(284614),v=e.i(475254);let y=(0,v.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);e.s(["Flag",()=>y],805899);var b=e.i(607486),j=e.i(75505);let S=(0,v.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),w=[{value:"low",label:"Low",color:"text-gray-600"},{value:"medium",label:"Medium",color:"text-blue-600"},{value:"high",label:"High",color:"text-amber-600"},{value:"urgent",label:"Urgent",color:"text-red-600"}],N=[{value:"pending",label:"Pending",color:"text-gray-600"},{value:"in-progress",label:"In Progress",color:"text-blue-600"},{value:"completed",label:"Completed",color:"text-green-600"},{value:"cancelled",label:"Cancelled",color:"text-red-600"}],k=[{value:"none",label:"No repeat"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function C({task:e,onOpenChange:v,trigger:C,mode:I,isOpen:D,initialValues:P}){let{success:T,error:M}=(0,h.useToast)(),[U,O]=(0,r.useState)({title:"",description:"",type:"external",clientId:"",projectId:"",date:void 0,assigneeUserId:"",status:"pending",priority:"medium",repeat:"none",repeatUntil:void 0}),[R,A]=(0,r.useState)(!1),[E,F]=(0,r.useState)(!1),[V,H]=(0,r.useState)(!1),[_,X]=(0,r.useState)(!1),z=(0,a.useQuery)(s.api.clients.list,{}),L=(0,a.useQuery)(s.api.projects.list,U.clientId?{clientId:U.clientId}:{}),B=(0,a.useQuery)(s.api.users.listByOrg),q=(0,a.useMutation)(s.api.tasks.create),Y=(0,a.useMutation)(s.api.tasks.update),K="edit"===I||!!e,Q="create"===I||!e;(0,r.useEffect)(()=>{if(K&&e){let t=new Date(e.date);O({title:e.title,description:e.description||"",type:e.type||"external",clientId:e.clientId||"",projectId:e.projectId||"",date:t,assigneeUserId:e.assigneeUserId||"",status:e.status,priority:e.priority||"medium",repeat:e.repeat||"none",repeatUntil:e.repeatUntil?new Date(e.repeatUntil):void 0})}else if(Q){let e=new Date;e.setHours(0,0,0,0),O({title:"",description:"",type:"external",clientId:P?.clientId||"",projectId:P?.projectId||"",date:e,assigneeUserId:"",status:"pending",priority:"medium",repeat:"none",repeatUntil:void 0})}},[e,K,Q,P,I]);let G=(e,t)=>{O(r=>({...r,[e]:t})),"clientId"===e&&O(e=>({...e,projectId:""}))},W=async t=>{if(t?.preventDefault(),!U.title.trim())return void M("Error","Task title is required");if("external"===U.type&&!U.clientId)return void M("Error","Please select a client for external tasks");if(!U.date)return void M("Error","Please select a date");if(U.repeat&&"none"!==U.repeat&&!U.repeatUntil)return void M("Error","Please select an end date for recurring tasks");A(!0);try{let t=e=>{let t=new Date(e),r=t.getFullYear(),a=t.getMonth(),s=t.getDate();return Date.UTC(r,a,s)},r=t(U.date),a=U.repeatUntil?t(U.repeatUntil):void 0,s={title:U.title.trim(),description:U.description.trim()||void 0,type:U.type,clientId:U.clientId?U.clientId:void 0,projectId:U.projectId?U.projectId:void 0,date:r,assigneeUserId:U.assigneeUserId?U.assigneeUserId:void 0,status:U.status,priority:U.priority,repeat:U.repeat,repeatUntil:a};K&&e?(await Y({id:e._id,...s}),T("Success","Task updated successfully!")):(await q(s),T("Success","Task created successfully!")),C?X(!1):v&&v(!1)}catch(e){console.error("Error saving task:",e),M("Error",e instanceof Error?e.message:"Failed to save task")}finally{A(!1)}},Z=(0,t.jsx)(f.SheetContent,{side:"right",className:"w-full sm:max-w-xl bg-background!",children:(0,t.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,t.jsxs)(f.SheetHeader,{className:"border-b border-border pb-4 shrink-0",children:[(0,t.jsx)(f.SheetTitle,{className:"flex items-center gap-2 text-2xl font-semibold",children:K?"Edit Task":"Create New Task"}),(0,t.jsx)(f.SheetDescription,{className:"text-muted-foreground",children:K?"Update the task details below.":"Add a new task to your schedule. Fill in the details below."})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto pt-6 px-6",children:(0,t.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"Task Type"}),(0,t.jsxs)(i.StyledSelect,{value:U.type,onValueChange:e=>G("type",e),children:[(0,t.jsx)(i.StyledSelectTrigger,{className:"w-full",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(i.StyledSelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"external",children:"External (Client Task)"}),(0,t.jsx)(o.SelectItem,{value:"internal",children:"Internal (Team Task)"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"external"===U.type?"External tasks require a client and can be linked to projects":"Internal tasks are for your team and don't require a client"})]}),(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-1.5",children:["Task Title ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)(u.Input,{value:U.title,onChange:e=>G("title",e.target.value),placeholder:"Enter task title...",className:"w-full transition-all duration-200 hover:border-primary/50 focus:border-primary"})]}),(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"Description"}),(0,t.jsx)("textarea",{value:U.description,onChange:e=>G("description",e.target.value),placeholder:"Add task description...",className:(0,n.cn)("flex min-h-[100px] w-full rounded-md border border-input bg-transparent px-3 py-2.5 text-sm","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","transition-all duration-200 hover:border-primary/50 focus:border-primary","resize-none"),rows:4})]}),"external"===U.type&&(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,t.jsx)(b.Building2,{className:"h-4 w-4 text-primary"}),"Client ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)(i.StyledSelect,{value:U.clientId,onValueChange:e=>G("clientId",e),children:[(0,t.jsx)(i.StyledSelectTrigger,{className:"w-full",children:(0,t.jsx)(o.SelectValue,{placeholder:"Select a client..."})}),(0,t.jsx)(i.StyledSelectContent,{children:z?.map(e=>(0,t.jsx)(o.SelectItem,{value:e._id,children:e.companyName},e._id))})]})]}),"external"===U.type&&(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,t.jsx)(j.FolderOpen,{className:"h-4 w-4 text-primary"}),"Project"," ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsxs)(i.StyledSelect,{value:U.projectId,onValueChange:e=>G("projectId",e),disabled:!U.clientId,children:[(0,t.jsx)(i.StyledSelectTrigger,{className:"w-full",disabled:!U.clientId,children:(0,t.jsx)(o.SelectValue,{placeholder:"No project selected"})}),(0,t.jsx)(i.StyledSelectContent,{children:L?.map(e=>(0,t.jsx)(o.SelectItem,{value:e._id,children:e.title},e._id))})]}),!U.clientId&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select a client first to choose a project"})]}),(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,t.jsx)(g.CalendarIcon,{className:"h-4 w-4 text-primary"}),"Date ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)(m.Popover,{open:E,onOpenChange:F,children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(d.Button,{intent:"outline",id:"date-picker",className:"w-full justify-start font-normal",children:[(0,t.jsx)(g.CalendarIcon,{className:"mr-2 h-4 w-4"}),U.date?U.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Select date"]})}),(0,t.jsx)(m.PopoverContent,{className:"w-auto p-0 bg-white dark:bg-gray-950",align:"start",children:(0,t.jsx)(c.Calendar,{mode:"single",selected:U.date,onSelect:e=>{e&&(O(t=>({...t,date:e})),F(!1))},className:"bg-white! dark:bg-gray-950!"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,t.jsx)(S,{className:"h-4 w-4 text-primary"}),"Status"]}),(0,t.jsxs)(i.StyledSelect,{value:U.status,onValueChange:e=>G("status",e),children:[(0,t.jsx)(i.StyledSelectTrigger,{className:"w-full",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsx)(i.StyledSelectContent,{children:N.map(e=>(0,t.jsx)(o.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,t.jsx)(y,{className:"h-4 w-4 text-primary"}),"Priority"]}),(0,t.jsxs)(i.StyledSelect,{value:U.priority,onValueChange:e=>G("priority",e),children:[(0,t.jsx)(i.StyledSelectTrigger,{className:"w-full",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsx)(i.StyledSelectContent,{children:w.map(e=>(0,t.jsx)(o.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,t.jsx)(x.User,{className:"h-4 w-4 text-primary"}),"Assign To"]}),(0,t.jsxs)(i.StyledSelect,{value:U.assigneeUserId||void 0,onValueChange:e=>G("assigneeUserId",e),children:[(0,t.jsx)(i.StyledSelectTrigger,{className:"w-full",children:(0,t.jsx)(o.SelectValue,{placeholder:"Unassigned"})}),(0,t.jsx)(i.StyledSelectContent,{children:B?.map(e=>(0,t.jsx)(o.SelectItem,{value:e._id,children:e.name||e.email},e._id))})]})]}),(0,t.jsxs)("div",{className:"space-y-4 p-4 rounded-lg bg-muted/30 border border-border/50",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Recurrence"}),(0,t.jsxs)("div",{className:"space-y-2.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-foreground",children:"Repeat"}),(0,t.jsxs)(i.StyledSelect,{value:U.repeat,onValueChange:e=>G("repeat",e),children:[(0,t.jsx)(i.StyledSelectTrigger,{className:"w-full",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsx)(i.StyledSelectContent,{children:k.map(e=>(0,t.jsx)(o.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),"none"!==U.repeat&&(0,t.jsxs)("div",{className:"flex flex-col gap-2 animate-in fade-in-50 slide-in-from-top-2 duration-200",children:[(0,t.jsxs)(p.Label,{htmlFor:"repeat-until-picker",className:"text-xs font-medium text-foreground flex items-center gap-1",children:["Repeat Until ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)(m.Popover,{open:V,onOpenChange:H,children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(d.Button,{intent:"outline",id:"repeat-until-picker",className:"w-full justify-start font-normal",children:[(0,t.jsx)(g.CalendarIcon,{className:"mr-2 h-4 w-4"}),U.repeatUntil?U.repeatUntil.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Select end date"]})}),(0,t.jsx)(m.PopoverContent,{className:"w-auto p-0 bg-white dark:bg-gray-950",align:"start",children:(0,t.jsx)(c.Calendar,{mode:"single",selected:U.repeatUntil,onSelect:e=>{e&&(O(t=>({...t,repeatUntil:e})),H(!1))},disabled:e=>{if(!U.date)return!1;let t=new Date(U.date);t.setHours(0,0,0,0);let r=new Date(e);return r.setHours(0,0,0,0),r<t},className:"bg-white! dark:bg-gray-950!"})})]})]})]})]})}),(0,t.jsxs)(f.SheetFooter,{className:"flex flex-row justify-end gap-3 border-t border-border shrink-0",children:[(0,t.jsx)(l.StyledButton,{type:"button",intent:"outline",onClick:()=>{C?X(!1):v&&v(!1)},disabled:R,label:"Cancel",showArrow:!1}),(0,t.jsx)(l.StyledButton,{type:"button",intent:"primary",onClick:()=>W(),isLoading:R,disabled:R||!U.title.trim()||"external"===U.type&&!U.clientId||"none"!==U.repeat&&!U.repeatUntil,label:R?K?"Updating...":"Creating...":K?"Update Task":"Create Task",className:"min-w-[120px]",showArrow:!1})]})]})});return C?(0,t.jsxs)(f.Sheet,{open:_,onOpenChange:X,children:[(0,t.jsx)(f.SheetTrigger,{asChild:!0,children:C}),Z]}):(0,t.jsx)(f.Sheet,{open:D,onOpenChange:v,children:Z})}e.s(["TaskSheet",()=>C],499398)},24708,e=>{"use strict";var t=e.i(677241);function r(e){return(0,t.constructFrom)(e,Date.now())}e.s(["constructNow",()=>r])},145963,e=>{"use strict";var t=e.i(281092);function r(e,r){let a=(0,t.toDate)(e,r?.in);return a.setHours(23,59,59,999),a}e.s(["endOfDay",()=>r])},494913,e=>{"use strict";var t=e.i(24708),r=e.i(55545),a=e.i(455024),s=e.i(99151),n=e.i(845110),l=e.i(281092);function i(e,t){let r=(0,l.toDate)(e)-(0,l.toDate)(t);return r<0?-1:r>0?1:r}var o=e.i(234662),d=e.i(520062),c=e.i(145963),u=e.i(39978);function p(e,p){return function(e,t,p){var m;let f,h=(0,a.getDefaultOptions)(),g=p?.locale??h.locale??r.defaultLocale,x=i(e,t);if(isNaN(x))throw RangeError("Invalid time value");let v=Object.assign({},p,{addSuffix:p?.addSuffix,comparison:x}),[y,b]=(0,n.normalizeDates)(p?.in,...x>0?[t,e]:[e,t]),j=(m=void 0,e=>{let t=(m?Math[m]:Math.trunc)(e);return 0===t?0:t})(((0,l.toDate)(b)-(0,l.toDate)(y))/1e3),S=Math.round((j-((0,s.getTimezoneOffsetInMilliseconds)(b)-(0,s.getTimezoneOffsetInMilliseconds)(y))/1e3)/60);if(S<2)if(p?.includeSeconds)if(j<5)return g.formatDistance("lessThanXSeconds",5,v);else if(j<10)return g.formatDistance("lessThanXSeconds",10,v);else if(j<20)return g.formatDistance("lessThanXSeconds",20,v);else if(j<40)return g.formatDistance("halfAMinute",0,v);else if(j<60)return g.formatDistance("lessThanXMinutes",1,v);else return g.formatDistance("xMinutes",1,v);else if(0===S)return g.formatDistance("lessThanXMinutes",1,v);else return g.formatDistance("xMinutes",S,v);if(S<45)return g.formatDistance("xMinutes",S,v);if(S<90)return g.formatDistance("aboutXHours",1,v);if(S<o.minutesInDay){let e=Math.round(S/60);return g.formatDistance("aboutXHours",e,v)}if(S<2520)return g.formatDistance("xDays",1,v);else if(S<o.minutesInMonth){let e=Math.round(S/o.minutesInDay);return g.formatDistance("xDays",e,v)}else if(S<2*o.minutesInMonth)return f=Math.round(S/o.minutesInMonth),g.formatDistance("aboutXMonths",f,v);if((f=function(e,t,r){let a,[s,o,p]=(0,n.normalizeDates)(void 0,e,e,t),m=i(o,p),f=Math.abs((0,d.differenceInCalendarMonths)(o,p));if(f<1)return 0;1===o.getMonth()&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-m*f);let h=i(o,p)===-m;a=(0,l.toDate)(s,void 0),+(0,c.endOfDay)(a,void 0)==+(0,u.endOfMonth)(a,void 0)&&1===f&&1===i(s,p)&&(h=!1);let g=m*(f-h);return 0===g?0:g}(b,y))<12){let e=Math.round(S/o.minutesInMonth);return g.formatDistance("xMonths",e,v)}{let e=f%12,t=Math.trunc(f/12);return e<3?g.formatDistance("aboutXYears",t,v):e<9?g.formatDistance("overXYears",t,v):g.formatDistance("almostXYears",t+1,v)}}(e,(0,t.constructNow)(e),p)}e.s(["formatDistanceToNow",()=>p],494913)}]);